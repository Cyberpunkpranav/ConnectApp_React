"use strict";(self.webpackChunkconnect_app=self.webpackChunkconnect_app||[]).push([[739],{8238:function(e,t,n){var a=n(4165),s=n(5861),o=n(9439),c=n(9867),r=(n(9371),n(9045),n(6309)),i=(n(5270),n(2834));t.Z=function(e){var t=localStorage.getItem("id"),n=(0,c.useState)("none"),l=(0,o.Z)(n,2),d=(l[0],l[1],(0,c.useState)(0)),m=(0,o.Z)(d,2),p=m[0],u=m[1],h=(0,c.useState)(0),x=(0,o.Z)(h,2),f=x[0],b=x[1],g=function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null==p||void 0==p){n.next=5;break}if(!(p+f==e.appointmentData.total_amount&&e.appointmentData.appointment_status<7)){n.next=5;break}return n.next=4,(0,r.dX)(e.appointmentData.id,8,t);case 4:e.Appointmentlist();case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,c.useEffect)((function(){g()}),[p+f==e.appointmentData.total_amount]),(0,c.useEffect)((function(){!function(){var t=e.appointmentData;if(null!=t.payment_method)for(var n=Object.values(JSON.parse(t.payment_method_details)),a=0,s=0;s<n.length;s++){var o=parseFloat(n[s]);u(a+=o)}}(),function(){var t=[],n=0;if(e.appointmentData.pending_payments&&null!=e.appointmentData.pending_payments)for(var a=0;a<e.appointmentData.pending_payments.length;a++)1==e.appointmentData.pending_payments[a].is_paid&&t.push(null!==e.appointmentData.pending_payments[a].paid_amount?e.appointmentData.pending_payments[a].paid_amount:0);t.forEach((function(e){n+=Number(e)})),b(n)}()}),[]),null!=p?p+f==e.appointmentData.total_amount?(0,i.jsxs)("div",{className:"text-white bg-lightgreen d-inline-block px-2 fw-normal rounded-2",style:{letterSpacing:"1px"},children:["Paid \u20b9",Number(p)+Number(f)]}):(0,i.jsxs)("div",{className:"text-burntumber bg-seashell fw-bold d-inline-block px-2 fw-normal rounded-2",style:{letterSpacing:"1px"},children:["Pending \u20b9",(Number(e.appointmentData.total_amount)-(Number(p)+Number(f))).toFixed(1)," "]}):(0,i.jsx)("button",{className:"btn button-seashell p-0 m-0",type:"button",disabled:!0,children:(0,i.jsx)("span",{className:"spinner-grow spinner-grow-sm",role:"status","aria-hidden":"true"})})}},7001:function(e,t,n){n.d(t,{n:function(){return x}});var a=n(4165),s=n(3433),o=n(5861),c=n(9439),r=n(9867),i=n(6626),l=n(7992),d=n.n(l),m=n(4012),p=(n(9371),n(606)),u=(n(1230),n(5144),n(9045),n(465),n(6309)),h=n(2834),x=function(e){var t=(0,r.useContext)(i.Jx);localStorage.setItem("appointmentid",e.appointmentid);var n=localStorage.getItem("id"),l={description:"",amount:0,discount:0,cgst:0,sgst:0,gross_amount:0,id:""},x={paymentmethod:"",amount:0},f=(0,r.useState)(!1),b=(0,c.Z)(f,2),g=b[0],N=b[1],v=(0,r.useState)(),j=(0,c.Z)(v,2),y=j[0],w=j[1],_=(0,r.useState)([{description:"",amount:0,discount:0,cgst:0,sgst:0,gross_amount:0,id:""}]),k=(0,c.Z)(_,2),Z=k[0],C=k[1],S=(0,r.useState)(""),P=(0,c.Z)(S,2),A=P[0],D=P[1],L=(0,r.useState)(0),E=(0,c.Z)(L,2),F=E[0],T=E[1],z=(0,r.useState)(0),B=(0,c.Z)(z,2),O=B[0],G=B[1],R=(0,r.useState)(0),W=(0,c.Z)(R,2),J=W[0],M=W[1],I=(0,r.useState)(0),H=(0,c.Z)(I,2),q=H[0],V=H[1],X=(0,r.useState)(e.doctorfee),U=(0,c.Z)(X,2),Y=U[0],K=U[1],Q=(0,r.useState)(),$=(0,c.Z)(Q,2),ee=$[0],te=$[1],ne=(0,r.useState)(),ae=(0,c.Z)(ne,2),se=ae[0],oe=ae[1],ce=(0,r.useState)([{paymentmethod:"",amount:""}]),re=(0,c.Z)(ce,2),ie=re[0],le=re[1],de=(0,r.useState)(),me=(0,c.Z)(de,2),pe=me[0],ue=me[1],he=(0,r.useState)(),xe=(0,c.Z)(he,2),fe=xe[0],be=xe[1];function ge(){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,o.Z)((0,a.Z)().mark((function t(){var n,s,o;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=[],s=0;s<e.appointmentdata.length;s++)if(e.appointmentid==e.appointmentdata[s].id){for(o=0;o<e.appointmentdata[s].other_charges.length;o++)n.push({description:null!=e.appointmentdata[s].other_charges[o].description?e.appointmentdata[s].other_charges[o].description:"N/A",amount:null!=e.appointmentdata[s].other_charges[o].total_amount?e.appointmentdata[s].other_charges[o].total_amount:0,discount:null!=e.appointmentdata[s].other_charges[o].discount?e.appointmentdata[s].other_charges[o].discount:0,cgst:null!=e.appointmentdata[s].other_charges[o]&&null!=e.appointmentdata[s].other_charges[o].gst_rate?e.appointmentdata[s].other_charges[o].gst_rate/2:0,sgst:null!=e.appointmentdata[s].other_charges[o]&&null!=e.appointmentdata[s].other_charges[o].gst_rate?e.appointmentdata[s].other_charges[o].gst_rate/2:0,gross_amount:e.appointmentdata[s].other_charges[o].final_amount&&null!==e.appointmentdata[s].other_charges[o].final_amount?e.appointmentdata[s].other_charges[o].final_amount:"",id:e.appointmentdata[s].other_charges[o].id&&null!=e.appointmentdata[s].other_charges[o].id?e.appointmentdata[s].other_charges[o].id:""});M(e.appointmentdata[s].aartas_discount),T(e.appointmentdata[s].doc_discount),D(e.appointmentdata[s].cons_text)}n.length>0?C(n):C([l]);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ve(){return(ve=(0,o.Z)((0,a.Z)().mark((function t(){var n,s,o,c,r;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=[],s=[],o=[],c=0;c<e.appointmentdata.length;c++)e.appointmentid==e.appointmentdata[c].id&&e.appointmentdata[c].payment_method_details&&(n.push(Object.keys(JSON.parse(e.appointmentdata[c].payment_method_details))),s.push(Object.values(JSON.parse(e.appointmentdata[c].payment_method_details))));if([],{paymentmethod:"",amount:0},n[0]){for(r=0;r<n[0].length;r++)o.push({paymentmethod:n[0][r],amount:s[0][r]});o.length>0?le(o):le([x])}case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function je(){return(je=(0,o.Z)((0,a.Z)().mark((function n(s){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!Z[s].id){n.next=6;break}return C([]),n.next=4,p.Z.post("".concat(t,"/appointment/delete/extra/charges"),{id:Z[s].id}).then((function(t){C([]),Z.splice(s,s),d().Notify.success(t.data.message),e.Appointmentlist()}));case 4:n.next=7;break;case 6:Z.splice(s,s);case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function ye(e,t,n,a){C((function(e){return(0,s.Z)(e)}));var o=n||0,c=(e||0)-(t||0);return c=(c+=o=(o+(a||0))*c/100).toFixed(2)}function we(){for(var e=[],t=0,n=0;n<Z.length;n++)e.push((Number(Z[n].gross_amount)-(Number(Z[n].amount)-Number(Z[n].discount)))/2);return e.forEach((function(e){t+=e})),t=t.toFixed(2)}function _e(){var e=0,t=Number(J)+Number(F)+Number(O);return Z.map((function(t){return e+=Number(t.gross_amount)})),e=(e=e+Number(Y)-t).toFixed(2)}function ke(){for(var e=[],t=0,n=0,a=0;a<ie.length;a++)e.push(Number(ie[a].amount));return e.forEach((function(e){t+=e})),t>_e()?n=t-_e():n}function Ze(){return Ce.apply(this,arguments)}function Ce(){return Ce=(0,o.Z)((0,a.Z)().mark((function s(){var c,r,i,l,m,u,h,x,f,b,g,N,v,j,y,w,_,k,C,S;return(0,a.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:for(S=function(){return(S=(0,o.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,ue(!0),n.next=4,p.Z.post("".concat(t,"/appointment/save/charges"),k).then((function(t){e.Appointmentlist(),1==t.data.status?(d().Notify.success(t.data.message),Me(),Xe(),ue(!1)):(ue(!1),d().Notify.failure(t.data.message))}));case 4:n.next=10;break;case 6:n.prev=6,n.t0=n.catch(0),d().Notify.failure(n.t0.message),ue(!1);case 10:case"end":return n.stop()}}),n,null,[[0,6]])})))).apply(this,arguments)},C=function(){return S.apply(this,arguments)},c=_e(),c=Number(c),r=Number(e.doctorfee),i=Number(F),l=Number(J),m=we(),u=we(),h=[],x=[],f=[],b=[],g=[],N=[],v=[],j=0;j<Z.length;j++)h.push(Z[j].description),x.push(Number(Z[j].amount)),f.push(Number(Z[j].discount)),g.push(Number(Z[j].amount)-Number(Z[j].discount)),Z[j].id&&N.push(Number(Z[j].id)),Z[j].cgst&&Z[j].sgst?v.push(Number(Z[j].cgst+Z[j].sgst)):v.push(0),b.push(Z[j].gross_amount);for(y=[],w=[],_=0;_<ie.length;_++)y.push(ie[_].paymentmethod),w.push(Number(ie[_].amount));k={appointment_id:e.appointmentid,g_total_main:c,cons_fee:r,description:h,total_amount:x,discount:f,amount:g,doc_dis:i,aartas_discount:l,payment_method:y,payment_method_main:y,payment_method_details:w,SGST:Number(u),CGST:Number(m),admin_id:Number(n),cons_text:A,add_to_cart:q,show_cons_fee:Y==e.doctorfee?1:0,ot_id:N,gst_rate:v,final_amount:b,status:e.Data.appointment_status},C(),Me(),Xe();case 24:case"end":return s.stop()}}),s)}))),Ce.apply(this,arguments)}(0,r.useEffect)((function(){ge(),function(){ve.apply(this,arguments)}()}),[e.billform]),(0,r.useEffect)((function(){ge()}),[]);function Se(){return(Se=(0,o.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:N(!0),p.Z.post("".concat(t,"/advance/balance"),{patient_id:e.patientid}).then((function(e){w(e.data.data),N(!1)})).catch((function(e){d().Notify.failure(e.message)}));case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}(0,r.useEffect)((function(){!function(){Se.apply(this,arguments)}(),function(){for(var t=[],n=0,a=0;a<e.appointmentdata.length;a++)if(e.appointmentid==e.appointmentdata[a].id)for(var s=0;s<e.appointmentdata[a].medicine_used.length;s++)t.push(e.appointmentdata[a].medicine_used[s].total_amount);t.forEach((function(e){return n+=e})),n=n.toFixed(2)}()}),[]);var Pe=(0,r.useState)("block"),Ae=(0,c.Z)(Pe,2),De=Ae[0],Le=Ae[1],Ee=function(){"block"==De&&Le("none"),"none"==De&&Le("block")},Fe=(0,r.useState)("none"),Te=(0,c.Z)(Fe,2),ze=Te[0],Be=Te[1],Oe=function(){"block"==ze&&Be("none"),"none"==ze&&Be("block")},Ge=(0,r.useState)("none"),Re=(0,c.Z)(Ge,2),We=Re[0],Je=Re[1],Me=function(){"none"==We&&Je("block"),"block"==We&&Je("none")},Ie=(0,r.useState)("none"),He=(0,c.Z)(Ie,2),qe=He[0],Ve=He[1],Xe=function(){"none"==qe&&Ve("block"),"block"==qe&&Ve("none")};var Ue=function(){var s=(0,o.Z)((0,a.Z)().mark((function s(o){return(0,a.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:d().Loading.circle("Generating Bill",{backgroundColor:"rgb(242, 242, 242,0.5)",svgColor:"#96351E",messageColor:"#96351E",messageFontSize:"1.5rem"});try{p.Z.post("".concat(t,"/appointment/bill"),{appointment_id:o,admin_id:n}).then((function(t){1==t.data.status?(d().Loading.remove(),d().Notify.success(t.data.message),e.Appointmentlist(),window.open(t.data.data.bill_url,"_blank","noreferrer")):(d().Loading.remove(),d().Notify.failure(t.data.message))})).catch((function(){d().Loading.remove()}))}catch(s){d().Loading.remove(),d().Notify.failure(s.message)}case 2:case"end":return a.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}(),Ye=function(){var n=(0,o.Z)((0,a.Z)().mark((function n(s){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:d().Loading.circle("Generating Prescription",{backgroundColor:"rgb(242, 242, 242,0.5)",svgColor:"#96351E",messageColor:"#96351E",messageFontSize:"1.5rem"});try{p.Z.post("".concat(t,"/swift/pdf"),{appointment_id:s}).then((function(t){1==t.data.status?(d().Notify.success(t.data.message),e.Appointmentlist(),window.open(t.data.data.prescription_pdf,"_blank","noreferrer")):d().Notify.failure(t.data.message)})).catch((function(e){d().Loading.remove(),d().Notify.failure(e.message)}))}catch(a){d().Loading.remove(),d().Notify.failure(a.message)}case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),Ke=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(s,o,c){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c,void 0==o||null==o)d().Notify.failure("Please Add a Phone Number to send the message on WhatsApp");else{d().Loading.circle("Sending Bill on Whats App",{backgroundColor:"rgb(242, 242, 242,0.5)",svgColor:"#96351E",messageColor:"#96351E",messageFontSize:"1.5rem"});try{p.Z.post("".concat(t,"/send/bill/whatsapp"),{appointment_id:s,check_pres:r,admin_id:n}).then((function(e){1==e.data.status?(d().Loading.remove(),d().Notify.success("".concat(e.data.message).concat(1==r?" with Prescription":" without Prescription"))):(d().Loading.remove(),d().Notify.failure(e.data.message))})).catch((function(){d().Loading.remove()}))}catch(a){d().Loading.remove(),d().Notify.failure(a.message)}}case 2:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Qe=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n,s,o){var c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=o,void 0==s||null==s)d().Notify.failure("Please Add a Phone Number to send the message on SMS");else{d().Loading.circle("Sending Bill on SMS",{backgroundColor:"rgb(242, 242, 242,0.5)",svgColor:"#96351E",messageColor:"#96351E",messageFontSize:"1.5rem"});try{p.Z.post("".concat(t,"/send/bill/sms"),{appointment_id:n,check_bill:1,check_pre:c}).then((function(e){1==e.data.status?(d().Loading.remove(),d().Notify.success("".concat(e.data.message).concat(1==c?" with Prescription":" without Prescription"))):(d().Loading.remove(),d().Notify.failure(e.data.message))})).catch((function(){d().Loading.remove()}))}catch(a){d().Loading.remove(),d().Notify.failure(a.message)}}case 2:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),$e=(0,r.useState)([]),et=(0,c.Z)($e,2),tt=et[0],nt=et[1],at=(0,r.useState)(!1),st=(0,c.Z)(at,2),ot=st[0],ct=st[1];function rt(){return it.apply(this,arguments)}function it(){return(it=(0,o.Z)((0,a.Z)().mark((function t(){var n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(!0),t.next=3,(0,u.cV)(e.appointmentid);case 3:n=t.sent,nt(n),ct(!1);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,r.useEffect)((function(){rt()}),[]),(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:" position-relative rounded-2 bg-seashell",style:{minHeight:"100%"},children:[(0,h.jsxs)("div",{className:"shadow-sm",children:[(0,h.jsxs)("h5",{className:"text-center fw-bold py-2",children:[e.patientname," Bill"]}),(0,h.jsx)("button",{className:"btn btn-back position-absolute start-0 top-0 ms-2 d-".concat("block"==De?"none":"block"),onClick:function(){"block"===ze&&(Oe(),Ee()),"block"===We&&(Me(),Oe()),"block"===qe&&(Xe(),Me())}}),(0,h.jsx)("button",{className:"btn btn-close position-absolute end-0 top-0 me-2",onClick:function(){e.CloseBillForm()}})]}),(0,h.jsxs)("div",{className:"stage1 d-".concat(De),children:[(0,h.jsxs)("div",{className:"px-4 pt-4",children:[(0,h.jsxs)("label",{className:" text-charcoal fw-bolder mt-2 mb-3",children:[(0,h.jsx)("input",{className:"form-check-input me-1 ",type:"checkbox",checked:Y,onClick:Y==e.doctorfee?function(){return K(0)}:function(){return K(e.doctorfee)}}),"Add Consultation Amount"]}),(0,h.jsxs)("div",{className:"row p-0 m-0 justify-content-between",children:[(0,h.jsxs)("div",{className:"col-4 ps-0 ",children:[(0,h.jsx)("label",{className:"text-charcoal75 fw-bold",children:" Doctor's Consultation Charge "}),(0,h.jsx)("input",{className:"form-control bg-seashell fw-bold",disabled:!0,value:Y})]}),(0,h.jsxs)("div",{className:"col-8 pe-0 ",children:[(0,h.jsx)("label",{className:"text-charcoal75 fw-bold",children:" Consultation text "}),(0,h.jsx)("input",{className:"form-control bg-seashell fw-bold",value:A||"",onChange:function(e){return D(e.target.value)}})]})]}),(0,h.jsxs)("div",{className:"mt-5 text-start",children:[(0,h.jsx)("h5",{className:"fw-bolder text-charcoal",children:"Discounts"}),(0,h.jsxs)("div",{className:"row p-0 m-0",children:[(0,h.jsxs)("div",{className:"col-4 ps-0",children:[(0,h.jsx)("label",{className:"text-charcoal75 fw-bold",children:"Coupon"}),(0,h.jsx)("input",{className:"form-control fw-bold text-charcoal text-start",disabled:!0,value:O||"",onChange:function(e){return G(e.target.value)}})]}),(0,h.jsxs)("div",{className:"col-4",children:[(0,h.jsx)("label",{className:"text-charcoal75 fw-bold",children:"Doctor"}),(0,h.jsx)("input",{className:"form-control bg-seashell fw-bold text-charcoal text-start",value:F||"",onChange:function(e){return T(e.target.value)}})]}),(0,h.jsxs)("div",{className:"col-4",children:[(0,h.jsx)("label",{className:"text-charcoal75 fw-bold",children:"Aartas"}),(0,h.jsx)("input",{className:"form-control bg-seashell fw-bold text-charcoal text-start",value:J||"",onChange:function(e){return M(e.target.value)}})]})]})]})]}),(0,h.jsx)("div",{className:"w-100 position-absolute bottom-0 bg-pearl py-2 bottom_bar",children:pe?(0,h.jsx)("div",{className:"col-6 py-2 pb-2 m-auto text-center",children:(0,h.jsx)("div",{class:"spinner-border",role:"status",children:(0,h.jsx)("span",{class:"visually-hidden",children:"Loading..."})})}):(0,h.jsxs)("div",{className:"row p-0 m-0 text-center align-items-center mt-1 justify-content-between ",children:[(0,h.jsxs)("div",{className:"col-4 align-self-end text-start",children:[(0,h.jsx)("label",{className:" fw-bolder text-charcoal text-wrap text-start",children:" Grand Total "}),(0,h.jsx)("input",{className:"form-control rounded-1 fs-6 text-burntumber text-start border-0 fw-bolder p-0  bg-pearl",value:"\u20b9"+_e()})]}),(0,h.jsx)("div",{className:"col-sm-auto col-2 d-flex justify-content-start ps-2",children:(0,h.jsx)("button",{className:"button button-charcoal ",onClick:function(){Ee(),Oe()},children:"Extra Charges "})})]})})]}),(0,h.jsxs)("div",{className:"stage2 d-".concat(ze," scroll"),children:[(0,h.jsx)("div",{className:"container-fluid text-start p-2",children:(0,h.jsxs)("div",{className:"bg-seashell position-relative",children:[(0,h.jsx)("div",{className:"row p-0 m-0 align-items-center mb-2",children:(0,h.jsx)("div",{className:"col-auto p-0 m-0 ps-2 pe-1",children:(0,h.jsx)("h5",{className:" p-0 m-0 text-charcoal fw-bolder",children:" Extra Charges "})})}),e.isLoading?(0,h.jsx)("div",{className:"col-6 py-2 pb-2 m-auto text-center",children:(0,h.jsx)("div",{class:"spinner-border spinner-border-sm",role:"status",children:(0,h.jsx)("span",{class:"visually-hidden",children:"Loading..."})})}):Z.map((function(e,t){return(0,h.jsx)("div",{className:"container-fluid p-0 m-0",children:(0,h.jsxs)("div",{className:"row p-0 m-0 align-items-center",children:[(0,h.jsxs)("div",{className:"col-10",children:[(0,h.jsxs)("div",{className:"row p-0 m-0",children:[(0,h.jsxs)("div",{className:"col-8 ps-0 ms-0",children:[(0,h.jsx)("label",{className:"fw-bold text-charcoal75 text-start ps-1",children:" Description "}),(0,h.jsx)("input",{className:"form-control bg-seashell m-0 text-start fw-bold ",value:e.description?e.description:"",onChange:function(t){e.description=t.target.value,ye(e.amount,e.discount,e.cgst,e.sgst)}})]}),(0,h.jsxs)("div",{className:"col-4",children:[(0,h.jsx)("label",{className:"fw-bold text-charcoal75 text-start ps-1",children:"Amount"}),(0,h.jsx)("input",{type:"number",className:"form-control text-start bg-seashell m-0 fw-bold ",value:e.amount?e.amount:"",onChange:function(t){e.amount=t.target.value,e.gross_amount=ye(e.amount,e.discount,e.cgst,e.sgst)}})]})]}),(0,h.jsxs)("div",{className:"row p-0 m-0 mt-1",children:[(0,h.jsxs)("div",{className:"col-4 ms-0 ps-0",children:[(0,h.jsx)("label",{className:"fw-bold text-charcoal75 text-start ps-1",children:"Discount \u20b9"}),(0,h.jsx)("input",{type:"number",className:"form-control text-start bg-seashell m-0 fw-bold ",value:e.discount?e.discount:"",onChange:function(t){e.discount=t.target.value,e.gross_amount=ye(e.amount,e.discount,e.cgst,e.sgst)}})]}),(0,h.jsxs)("div",{className:"col-4",children:[(0,h.jsx)("label",{className:"fw-bold text-charcoal75 text-start ps-1",children:" GST % "}),(0,h.jsx)("input",{type:"number",className:"form-control text-start bg-seashell m-0 fw-bold ",value:e.cgst&&e.sgst?e.cgst+e.sgst:"",onChange:function(t){e.cgst=t.target.value/2,e.sgst=t.target.value/2,e.gross_amount=ye(e.amount,e.discount,e.cgst,e.sgst)}})]}),(0,h.jsxs)("div",{className:"col-4 p-0 align-self-end ",children:[(0,h.jsxs)("div",{className:"row p-0 m-0 ",children:[(0,h.jsx)("div",{className:"col-6 p-0 m-0 fw-bold text-charcoal75 text-end",children:" Amount: "}),(0,h.jsx)("input",{type:"number",className:"col-6 p-0 border-0 text-start bg-seashell m-0 ps-1 fw-bold text-burntumber",style:{letterSpacing:"1px"},value:e.amount&&e.discount?e.amount-e.discount:"",onChange:function(t){e.gross_amount=ye(e.amount,e.discount,e.cgst,e.sgst)}})]}),(0,h.jsxs)("div",{className:"row p-0 m-0",children:[(0,h.jsx)("div",{className:"col-6 p-0 m-0 fw-bold text-charcoal75 text-end",children:" incl. gst: "}),(0,h.jsx)("input",{className:"col-6 p-0 border-0 m-0 text-start bg-seashell ps-1 fw-bold text-burntumber",style:{letterSpacing:"1px"},value:e.gross_amount?e.gross_amount:""})]})]})]})]}),(0,h.jsx)("div",{className:"col-2",children:(0,h.jsx)("button",{className:"btn btn-sm p-0 m-0 d-".concat(0==t?"none":"block"),onClick:function(){!function(e){je.apply(this,arguments)}(t),le((function(e){return(0,s.Z)(e)}))},children:(0,h.jsx)("img",{src:"/images/minus.png",className:"img-fluid p-0 m-0",style:{width:"1.5rem"}})})})]})})})),(0,h.jsx)("div",{className:"container-fluid text-center mt-2  ",children:(0,h.jsx)("button",{className:"btn p-0 m-0 py-0",onClick:function(){Z&&Z.length>0?C((function(e){return[].concat((0,s.Z)(e),[l])})):C([l])},children:(0,h.jsx)("img",{src:"/images/add.png",className:"img-fluid",style:{width:"1.8rem"}})})})]})}),(0,h.jsx)("div",{className:"w-100 position-absolute bottom-0 bg-pearl py-2 bottom_bar",children:pe?(0,h.jsx)("div",{className:"col-6 py-2 pb-2 m-auto text-center",children:(0,h.jsx)("div",{class:"spinner-border",role:"status",children:(0,h.jsx)("span",{class:"visually-hidden",children:"Loading..."})})}):(0,h.jsxs)("div",{className:"row p-0 m-0 text-center align-items-center mt-1 ",children:[(0,h.jsxs)("div",{className:"col-3 align-self-end text-start",children:[(0,h.jsx)("label",{className:" fw-bolder text-charcoal text-wrap text-start",children:" Grand Total "}),(0,h.jsx)("input",{className:"form-control rounded-1 fs-6 text-burntumber text-start border-0 fw-bolder p-0 bg-pearl",value:"\u20b9"+_e()})]}),(0,h.jsxs)("div",{className:"col-3 align-self-end text-start",children:[(0,h.jsxs)("label",{className:"fw-bolder text-charcoal text-wrap text-start",children:[(0,h.jsx)("small",{children:"SGST"})," "]}),(0,h.jsx)("input",{className:"form-control rounded-1 text-burntumber text-start border-0 fw-bolder p-0 bg-pearl",disabled:!0,value:ee||"\u20b9"+we(),onChange:function(e){return te(e.target.value)}})]}),(0,h.jsxs)("div",{className:"col-3 align-self-end text-start",children:[(0,h.jsx)("label",{className:"fw-bolder text-charcoal text-wrap text-start",children:(0,h.jsx)("small",{children:"CGST"})}),(0,h.jsx)("input",{className:"form-control rounded-1 text-burntumber text-start border-0 fw-bolder p-0 bg-pearl",disabled:!0,value:se||"\u20b9"+we(),onChange:function(e){return oe(e.target.value)}})]}),(0,h.jsx)("div",{className:" col-3 d-flex justify-content-end ps-2",children:(0,h.jsx)("button",{className:"button button-charcoal ",onClick:function(){Oe(),Me()},children:" Payments "})})]})})]}),(0,h.jsxs)("div",{className:"stage3 d-".concat(We," scroll"),children:[(0,h.jsxs)("div",{className:" text-start position-relative px-3",children:[(0,h.jsx)("h5",{className:"text-charcoal fw-bolder text-start ps-1",children:"Payments"}),ie&&void 0!==ie?ie.map((function(t,n){return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:" mt-4",children:(0,h.jsxs)("div",{className:"row p-0 m-0 align-items-center",children:[(0,h.jsxs)("div",{className:"col-10 ps-0",children:[(0,h.jsx)("h6",{className:"text-charcoal75 fw-bold",children:"Enter Amount"}),(0,h.jsx)("input",{type:"number",placeholder:"\u20b900",value:t.amount,onChange:function(e){t.amount=e.target.value,le((function(e){return(0,s.Z)(e)}))},className:"form-control rounded-1 fw-bold text-charocoal75 bg-seashell w-25 border-2"})]}),(0,h.jsx)("div",{className:"col-2",children:(0,h.jsx)("button",{className:"btn btn-sm p-0 m-0 d-".concat(0==n?"none":"block"),onClick:function(){!function(e){ie.splice(e,e)}(n),le((function(e){return(0,s.Z)(e)}))},children:(0,h.jsx)("img",{src:"/images/minus.png",className:"img-fluid",style:{width:"1.5rem"}})})})]})}),(0,h.jsx)("h6",{className:"text-charcoal75 fw-bold mt-2",children:"Select Payment Method"}),(0,h.jsxs)("div",{className:"d-flex flex-horizontal mt-2 scroll",style:{minHeight:"min-content"},children:[(0,h.jsx)("input",{type:"checkbox",className:"form-check-input p-2 mt-1",onChange:function(){t.paymentmethod="Cash",le((function(e){return(0,s.Z)(e)}))},checked:"Cash"==t.paymentmethod,onClick:function(e){void 0!=fe?be():be(e.target.value)},value:"Cash"}),(0,h.jsx)("span",{children:(0,h.jsx)("h6",{className:"d-block text-charcoal fw-bold pt-1 ms-2 me-5",children:"Cash"})}),(0,h.jsx)("input",{type:"checkbox",className:"form-check-input p-2 mt-1",onChange:function(){t.paymentmethod="Points",le((function(e){return(0,s.Z)(e)}))},checked:"Points"==t.paymentmethod,onClick:function(e){void 0!=fe?be():be(e.target.value)},value:"Points"}),(0,h.jsx)("span",{children:(0,h.jsxs)("h6",{className:"d-block text-charcoal fw-bold pt-1 ms-2 me-5",children:["Points",(0,h.jsx)("div",{className:" text-success fw-bold",children:void 0!=e.Data.patient.reward_points&&void 0!=e.Data.patient.reward_points.points_total&&null!=e.Data.patient.reward_points.points_total?e.Data.patient.reward_points.points_total:0})]})}),(0,h.jsx)("input",{type:"checkbox",className:"form-check-input p-2 mt-1",onChange:function(){t.paymentmethod="Adjust-Advance",le((function(e){return(0,s.Z)(e)}))},checked:"Adjust-Advance"==t.paymentmethod,onClick:function(e){void 0!=fe?be():be(e.target.value)},value:"Adjust-Advance"}),(0,h.jsx)("span",{children:(0,h.jsxs)("h6",{className:"d-block text-charcoal fw-bold pt-1 ms-2 me-5",children:["Adjust-Advance                ",g?(0,h.jsx)("div",{className:" py-2 pb-2 m-auto text-center",children:(0,h.jsx)("div",{class:"spinner-border spinner-border-sm",role:"status",children:(0,h.jsx)("span",{class:"visually-hidden",children:"Loading..."})})}):y?(0,h.jsx)("div",{className:"text-success text-start border-0 rounded-1 fw-bolder p-0  bg-seashell",children:"\u20b9"+y.advnace_total}):(0,h.jsx)("div",{className:"text-success fw-bold",children:" 0 "})]})}),(0,h.jsx)("input",{type:"checkbox",className:"form-check-input p-2 mt-1",onChange:function(){t.paymentmethod="Card",le((function(e){return(0,s.Z)(e)}))},checked:"Card"==t.paymentmethod,onClick:function(e){void 0!=fe?be():be(e.target.value)},value:"Card"}),(0,h.jsx)("span",{children:(0,h.jsx)("h6",{className:"d-block text-charcoal fw-bold pt-1 ms-2 me-5",children:"Card"})}),(0,h.jsx)("input",{type:"checkbox",className:"form-check-input p-2 mt-1",onChange:function(){t.paymentmethod="Paytm",le((function(e){return(0,s.Z)(e)}))},checked:"Paytm"==t.paymentmethod,onClick:function(e){void 0!=fe?be():be(e.target.value)},value:"Paytm"}),(0,h.jsx)("span",{children:(0,h.jsx)("h6",{className:"d-block text-charcoal fw-bold pt-1 ms-2 me-5",children:"Paytm"})}),(0,h.jsx)("input",{type:"checkbox",className:"form-check-input p-2 mt-1",onChange:function(){t.paymentmethod="Phonepe",le((function(e){return(0,s.Z)(e)}))},checked:"Phonepe"==t.paymentmethod,onClick:function(e){void 0!=fe?be():be(e.target.value)},value:"Phonepe"}),(0,h.jsx)("span",{children:(0,h.jsx)("h6",{className:"d-block text-charcoal fw-bold pt-1 ms-2 me-5",children:"Phonepe"})}),(0,h.jsx)("input",{type:"checkbox",className:"form-check-input p-2 mt-1",onChange:function(){t.paymentmethod="Razorpay",le((function(e){return(0,s.Z)(e)}))},checked:"Razorpay"==t.paymentmethod,onClick:function(e){void 0!=fe?be():be(e.target.value)},value:"Razorpay"}),(0,h.jsx)("span",{children:(0,h.jsx)("h6",{className:"d-block text-charcoal fw-bold pt-1 ms-2 me-5",children:"Razorpay"})}),(0,h.jsx)("input",{type:"checkbox",className:"form-check-input p-2 mt-1",onChange:function(){t.paymentmethod="Wire-Transfer",le((function(e){return(0,s.Z)(e)}))},checked:"Wire-Transfer"==t.paymentmethod,onClick:function(e){void 0!=fe?be():be(e.target.value)},value:"Wire-Transfer"}),(0,h.jsx)("span",{children:(0,h.jsx)("h6",{className:"d-block text-charcoal fw-bold pt-1 ms-2 me-5",children:"Wire-Transfer"})})]})]})})):(0,h.jsx)(h.Fragment,{}),(0,h.jsx)("div",{className:"container-fluid text-center mt-2  ",children:(0,h.jsx)("button",{className:"btn py-0",onClick:function(){ie&&ie.length>0?le((function(e){return[].concat((0,s.Z)(e),[x])})):le([x])},children:(0,h.jsx)("img",{src:"/images/add.png",className:"img-fluid",style:{width:"1.8rem"}})})})]}),(0,h.jsx)("div",{className:"w-100 position-absolute bottom-0 bg-pearl py-2 bottom_bar",children:pe?(0,h.jsx)("div",{className:"col-6 py-2 pb-2 m-auto text-center",children:(0,h.jsx)("div",{class:"spinner-border",role:"status",children:(0,h.jsx)("span",{class:"visually-hidden",children:"Loading..."})})}):(0,h.jsxs)("div",{className:"row p-0 m-0 text-center align-items-center mt-1 ",children:[(0,h.jsxs)("div",{className:"col-3 align-self-end text-start",children:[(0,h.jsx)("label",{className:" fw-bolder text-charcoal text-wrap text-start",children:" Grand Total "}),(0,h.jsx)("input",{className:"form-control rounded-1 fs-6 text-burntumber text-start border-0 fw-bolder p-0 bg-pearl",value:"\u20b9"+_e()})]}),(0,h.jsxs)("div",{className:"col-3 align-self-end text-start",children:[(0,h.jsx)("label",{className:" fw-bolder text-charcoal text-wrap text-start",children:" Amount Recieved"}),(0,h.jsxs)("div",{className:"form-control rounded-1 fs-6 text-burntumber text-start border-0 fw-bolder p-0 bg-pearl",children:[" ",ie&&ie.length>0?"\u20b9"+function(){var e=[],t=0;if(ie&&ie.length>0){for(var n=0;n<ie.length;n++)ie[n].amount&&e.push(Number(ie[n].amount));return e.forEach((function(e){t+=Number(e)})),t=t.toFixed(2)}return 0}():"\u20b90"," "]})]}),(0,h.jsxs)("div",{className:"col-3 align-self-end text-start fw-bolder text-charcoal text-wrap text-start ",children:["Extra Amount",(0,h.jsxs)("div",{className:"toolTip",children:[ke()>0?(0,h.jsx)("img",{src:"/images/info.png",className:"p-0 m-0 ms-2 img-fluid toolTip",style:{width:"1rem"}}):(0,h.jsx)(h.Fragment,{}),(0,h.jsx)("span",{className:"tooltiptext",children:"Click to save it as Advance Payment"})]}),(0,h.jsxs)("div",{className:"form-control rounded-1 fs-6 text-success text-start border-0 fw-bolder p-0 bg-pearl",children:[ke()>0?"+ \u20b9".concat(ke()):"\u20b90"," "]})]}),(0,h.jsx)("div",{className:"col-sm-auto col-2 d-flex justify-content-start ps-2",children:(0,h.jsx)("button",{className:"button button-charcoal",onClick:function(){(0,m.H)(),d().Confirm.show("Add Charges and Payments","Do you surely want to add the following Charges and Payments with Grand Total ".concat(_e()),"Yes","No",(function(){V(0),Ze()}),(function(){Me(),Xe()}),{})},children:" Bill & Prescription "})})]})})]}),(0,h.jsxs)("div",{className:"stage4 d-".concat(qe," scroll"),style:{minHeight:"57vh"},children:[(0,h.jsxs)("div",{className:"container px-3",children:[(0,h.jsx)("h5",{className:"text-charcoal fw-bold mb-3",children:"Bill & Prescription"}),(0,h.jsxs)("div",{className:"container p-0 m-0 mb-3",children:[(0,h.jsxs)("button",{className:"btn p-0 m-0 justify-content-end fw-bold",onClick:function(){return rt()},children:[(0,h.jsx)("img",{className:"img-fluid",src:"/images/refresh.png"}),"Referesh Prescriptions"]}),(0,h.jsx)("div",{className:"row p-0 m-0 bg-pearl rounded-2\r ",children:tt?ot?(0,h.jsx)("div",{className:"col-6 py-2 pb-2 m-auto text-center",children:(0,h.jsx)("div",{class:"spinner-border",role:"status",children:(0,h.jsx)("span",{class:"visually-hidden",children:"Loading..."})})}):tt&&tt.map((function(e,t){return(0,h.jsx)("div",{className:"col ",children:(0,h.jsx)("img",{src:"https://aartas-qaapp-as.azurewebsites.net/aartas_uat/public/assets/scanned_documents/".concat(e.file),className:"img-fluid",style:{width:"8rem"}})},t)})):(0,h.jsx)("div",{className:"text-center text-charcoal75 py-4 fw-bold d-flex align-items-center justify-content-center",children:"No prescriptions Scanned"})})]}),(0,h.jsx)("button",{className:"button button-charcoal",onClick:function(){window.open("/scan/prescription","_blank")},children:"Scan Prescription"}),(0,h.jsxs)("div",{className:"row p-0 m-0 mt-4",children:[(0,h.jsx)("h6",{className:"fw-bold text-charcoal75 ps-0 ms-0",children:"Generate Bill & Prescription"}),(0,h.jsx)("div",{className:"col-auto ps-0 ms-0",children:(0,h.jsx)("button",{className:"button button-charcoal px-4",onClick:function(){Ue(e.appointmentid)},children:"Bill"})}),(0,h.jsx)("div",{className:"col-auto",children:(0,h.jsx)("div",{className:"vr rounded-1 align-self-center",style:{padding:"0.8px"}})}),(0,h.jsx)("div",{className:"col-6",children:(0,h.jsx)("button",{className:"button button-charcoal",onClick:function(){Ye(e.appointmentid)},children:"Prescription"})})]}),(0,h.jsxs)("div",{className:"row p-0 m-0 mt-4",children:[(0,h.jsx)("h6",{className:"fw-bold text-charcoal75 ms-0 ps-0",children:"Send Bill and Prescription"}),(0,h.jsxs)("div",{className:"row ps-0 ms-0",children:[(0,h.jsx)("div",{className:"col-12 ms-0 ps-0 mt-2 ",children:(0,h.jsxs)("div",{className:"row ps-0 ms-0",children:[(0,h.jsxs)("h6",{className:"ms-0 ps-0 text-charcoal fw-bold",children:["On WhatsApp ",(0,h.jsx)("span",{className:"ms-2 text-success",children:1==e.Data.whatsapp_sent?"(Already Sent on Whats App)":""})]}),(0,h.jsx)("div",{className:"col-6 ms-0 ps-0",children:(0,h.jsxs)("button",{className:"btn border-0 p-0 m-0 fw-bold",onClick:function(){Ke(e.appointmentid,e.Data.patient.phone_number,0)},children:[(0,h.jsx)("img",{src:"/images/whatsapp.png",className:"img-fluid",style:{width:"1.5rem"}}),"Bill"]})}),(0,h.jsx)("div",{className:"col-6",children:(0,h.jsxs)("button",{className:"btn border-0 p-0 m-0 fw-bold",onClick:function(){Ke(e.appointmentid,e.Data.patient.phone_number,1)},children:[(0,h.jsx)("img",{src:"/images/whatsapp.png",className:"img-fluid",style:{width:"1.5rem"}}),"Bill with Prescription"]})})]})}),(0,h.jsx)("div",{className:"col-12 ms-0 ps-0 mt-2",children:(0,h.jsxs)("div",{className:"row ps-0 ms-0",children:[(0,h.jsx)("h6",{className:"ms-0 ps-0 text-charcoal fw-bold",children:"On SMS"}),(0,h.jsx)("div",{className:"col-6 ms-0 ps-0",children:(0,h.jsxs)("button",{className:"btn border-0 p-0 m-0 fw-bold",onClick:function(){Qe(e.appointmentid,e.Data.patient.phone_number,0)},children:[(0,h.jsx)("img",{src:"/images/message.png",className:"img-fluid",style:{width:"1.2rem"}}),"Bill"]})}),(0,h.jsx)("div",{className:"col-6",children:(0,h.jsxs)("button",{className:"btn border-0 p-0 m-0 fw-bold",onClick:function(){Qe(e.appointmentid,e.Data.patient.phone_number,1)},children:[(0,h.jsx)("img",{src:"/images/message.png",className:"img-fluid",style:{width:"1.2rem"}}),"Bill with Prescription"]})})]})})]})]})]}),(0,h.jsx)("div",{className:"w-100 position-absolute bottom-0 bg-pearl py-2 bottom_bar",children:pe?(0,h.jsx)("div",{className:"col-6 py-2 pb-2 m-auto text-center",children:(0,h.jsx)("div",{class:"spinner-border",role:"status",children:(0,h.jsx)("span",{class:"visually-hidden",children:"Loading..."})})}):(0,h.jsxs)("div",{className:"row p-0 m-0 text-center align-items-center mt-1 justify-content-between ",children:[(0,h.jsxs)("div",{className:"col-4 align-self-end text-start",children:[(0,h.jsx)("label",{className:" fw-bolder text-charcoal text-wrap text-start",children:" Grand Total "}),(0,h.jsx)("input",{className:"form-control rounded-1 fs-6 text-burntumber text-start border-0 fw-bolder p-0  bg-pearl",value:"\u20b9"+_e()})]}),(0,h.jsx)("div",{className:"col-sm-auto col-2 d-flex justify-content-start ps-2",children:(0,h.jsx)("button",{className:"button button-charcoal ",onClick:function(){e.setsingleload(0),e.Appointmentlist(),e.CloseBillForm()},children:" Done "})})]})})]})]})})}},5270:function(e,t,n){n.d(t,{H:function(){return u}});var a=n(4165),s=n(3433),o=n(5861),c=n(9439),r=n(606),i=n(9867),l=n(6626),d=n(7992),m=n.n(d),p=(n(9371),n(2834)),u=function(e){var t=(0,i.useContext)(l.Jx),n=localStorage.getItem("id"),d=(0,i.useState)(void 0==e.paymentsi?0:1),u=(0,c.Z)(d,2),h=u[0],x=u[1],f=(0,i.useState)([]),b=(0,c.Z)(f,2),g=b[0],N=b[1],v=(0,i.useState)([]),j=(0,c.Z)(v,2),y=j[0],w=j[1],_=(0,i.useState)([]),k=(0,c.Z)(_,2),Z=k[0],C=k[1],S=(0,i.useState)(!1),P=(0,c.Z)(S,2),A=P[0],D=P[1],L=(0,i.useState)(""),E=(0,c.Z)(L,2),F=E[0],T=E[1],z=(0,i.useState)(),B=(0,c.Z)(z,2),O=B[0],G=B[1],R=(0,i.useState)(!1),W=(0,c.Z)(R,2),J=W[0],M=W[1],I={paymentmethod:"",amount:0},H={paymentmethod:"",amount:0};function q(){return V.apply(this,arguments)}function V(){return(V=(0,o.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:D(!0),r.Z.get("".concat(t,"/get/balance/list?patient_id=").concat(e.patientid?e.patientid:"")).then((function(e){G(e.data.data["Advanve Balance"]),D(!1)}));case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function X(){return X=(0,o.Z)((0,a.Z)().mark((function s(){var c,i,l,d,p,u;return(0,a.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:for(u=function(){return(u=(0,o.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return D(!0),n.next=3,r.Z.post("".concat(t,"/save/advance"),d).then((function(t){e.Appointmentlist(),C([]),T(""),q(),m().Notify.success(t.data.message),D(!1)}));case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)},p=function(){return u.apply(this,arguments)},c=[],i=[],l=0;l<Z.length;l++)i.push(Z[l].paymentmethod),c.push(Z[l].amount);d={patient_id:e.patientid,admin_id:Number(n),description:F,payment_method:i,payment_method_main:i,payment_method_details:c},p();case 7:case"end":return s.stop()}}),s)}))),X.apply(this,arguments)}function U(){return(U=(0,o.Z)((0,a.Z)().mark((function t(){var n,s,o;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=[],s=0;s<e.appointmentdata.length;s++)if(e.appointmentid==e.appointmentdata[s].id)for(o=0;o<e.appointmentdata[s].pending_payments.length;o++)n.push(e.appointmentdata[s].pending_payments[o]);N(n);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Y(){return Y=(0,o.Z)((0,a.Z)().mark((function s(){var c,i,l,d,p,u,h,f,b;return(0,a.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:for(b=function(){return(b=(0,o.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return M(!0),n.next=3,r.Z.post("".concat(t,"/appointment/save/pending/charges"),h).then((function(t){e.Appointmentlist(),m().Notify.success(t.data.message),e.setsingleload(0),x(1),M(!1),e.ClosePaymentsForm()}));case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)},f=function(){return b.apply(this,arguments)},c=[],i=[],l="",d=0;d<e.appointmentdata.length;d++)for(p=0;p<e.appointmentdata[d].pending_payments.length;p++)e.appointmentid==e.appointmentdata[d].id&&0==e.appointmentdata[d].pending_payments[p].is_paid&&(l=e.appointmentdata[d].pending_payments[p].id);for(u=0;u<y.length;u++)c.push(y[u].paymentmethod),i.push(Number(y[u].amount));h={payment_method:c,payment_method_main:c,payment_method_details:i,admin_id:Number(n),pending_id:l},f();case 9:case"end":return s.stop()}}),s)}))),Y.apply(this,arguments)}(0,i.useEffect)((function(){q()}),[]),(0,i.useEffect)((function(){!function(){U.apply(this,arguments)}()}),[]);var K=function(e){if(e&&null!=e)return e=e.split("-").reverse().join("-")};return(0,p.jsxs)("div",{className:"container-fluid p-0 m-0",children:[(0,p.jsxs)("div",{className:"shadow-sm pt-2 pb-1",children:[(0,p.jsxs)("h5",{className:"text-center fw-bold",children:[e.patientname," Payments Section"]}),(0,p.jsx)("button",{className:"btn-close position-absolute end-0 p-2 top-0",onClick:e.ClosePaymentsForm})]}),(0,p.jsx)("div",{className:"d-flex justify-content-start p-0 m-0 gx-2 mt-3 ms-3",children:["Advance payments","Pending Payments"].map((function(e,t){return(0,p.jsx)("button",{className:"button button-".concat(t===h?"charcoal":"seashell"," rounded-1 me-1 border-charcoal rounded-0"),onClick:function(){x(t)},children:e})}))}),(0,p.jsxs)("div",{className:"container-fluid  p-0 m-0 ps-3 mt-4  d-".concat(0===h?"block":"none"),children:[(0,p.jsxs)("h6",{className:"text-charcoal75 fw-bolder mt-2 mb-2",children:["Advance Payments from ",e.patientname]}),A||e.isLoading?(0,p.jsx)("div",{className:"col-6 py-2 pb-2 m-auto ",children:(0,p.jsx)("div",{class:"spinner-border spinner-border-sm",role:"status",children:(0,p.jsx)("span",{class:"visually-hidden",children:"Loading..."})})}):(0,p.jsx)("div",{className:"scroll scroll-y",style:{maxHeight:"25vh"},children:void 0!==O&&O?(0,p.jsxs)("table",{className:"border table rounded-1",children:[(0,p.jsxs)("thead",{className:"bg-seashell position-sticky top-0",children:[(0,p.jsx)("th",{className:"ps-2 text-charcoal75",children:"Description"}),(0,p.jsx)("th",{className:"ps-2 text-charcoal75",children:"date recieved"}),(0,p.jsx)("th",{className:"ps-2 text-charcoal75",children:"Amount recieved"})]}),(0,p.jsxs)("tbody",{className:"align-middle",children:[O&&O.map((function(e){return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"text-charcoal fw-bold",children:e.description}),(0,p.jsx)("td",{className:"text-charcoal fw-bold",children:K(e.date)}),(0,p.jsxs)("td",{className:"text-charcoal fw-bold",children:["\u20b9",e.credit_amount]})]})})),(0,p.jsxs)("tr",{className:"bg-pearl position-sticky bottom-0",children:[(0,p.jsx)("td",{className:"fw-bold",children:"Total amount"}),(0,p.jsx)("td",{}),(0,p.jsxs)("td",{className:"fw-bold text-success",children:["\u20b9",void 0!=O&&void 0!=O[0]?O[0].balance:""]})]})]})]}):(0,p.jsx)("div",{className:"bg-lightyellow fw-bolder rounded-1 p-2 m-1 mt-2 text-center",children:"No Advance Payments Found"})}),(0,p.jsx)("h6",{className:"text-charcoal75 fw-bolder mb-2 mt-3",children:"Add Advance Payment"}),(0,p.jsxs)("div",{className:"row p-0 m-0 align-items-center",children:[(0,p.jsx)("div",{className:"col-3 ps-0",children:(0,p.jsx)("p",{className:"text-charcoal p-0 m-0 fw-bold",children:"Description"})}),(0,p.jsx)("div",{className:"col-9",children:(0,p.jsx)("input",{type:"text",className:"form-control p-0 m-0 p-1 bg-seashell mx-auto",value:F||"",onChange:function(e){return T(e.target.value)}})})]}),(0,p.jsxs)("div",{className:"row p-0 m-0 align-items-center",children:[(0,p.jsx)("div",{className:"col-auto p-0 m-0",children:(0,p.jsx)("p",{className:"text-charcoal fw-bold mt-3",children:"Add Payment Method"})}),(0,p.jsx)("div",{className:"col-auto p-0 m-0",children:(0,p.jsx)("button",{className:"btn py-0",onClick:function(){return C((function(e){return[].concat((0,s.Z)(e),[I])}))},children:(0,p.jsx)("img",{src:"/images/add.png",className:"img-fluid"})})})]}),Z.map((function(e,t){return(0,p.jsxs)("div",{className:"row p-0 m-0 mt-2 justify-content-around",children:[(0,p.jsx)("div",{className:"col-5 p-0 m-0 ",children:(0,p.jsxs)("select",{className:"form-control bg-seashell py-1",value:e.paymentmethod,onChange:function(t){e.paymentmethod=t.target.value,C((function(e){return(0,s.Z)(e)}))},children:[(0,p.jsx)("option",{className:"text-charcoal75 fw-bolder",children:"Payment Method"}),(0,p.jsx)("option",{value:"Cash",children:"Cash"}),(0,p.jsx)("option",{value:"Card",children:"Card"}),(0,p.jsx)("option",{value:"Paytm",children:"Paytm"}),(0,p.jsx)("option",{value:"Phonepe",children:"Phone Pe"}),(0,p.jsx)("option",{value:"Wire-Transfer",children:"Wire-Transfer"}),(0,p.jsx)("option",{value:"Razorpay",children:"Razorpay"}),(0,p.jsx)("option",{value:"Points",children:"Points"}),(0,p.jsx)("option",{value:"Adjust-Advance",children:"Adjust-Advance Cash"})]})}),(0,p.jsx)("div",{className:"col-4 p-0 m-0 ms-1",children:(0,p.jsx)("input",{className:"form-control bg-seashell py-1",value:e.amount,onChange:function(t){e.amount=t.target.value,C((function(e){return(0,s.Z)(e)}))}})}),(0,p.jsx)("div",{className:"col-1 col-lg-1 col-md-1 col-sm-1 m-0 p-0 ",children:(0,p.jsx)("button",{className:"btn p-0 m-0",onClick:function(){!function(e){Z.splice(e,e)}(t),C((function(e){return(0,s.Z)(e)}))},children:(0,p.jsx)("img",{src:"/images/delete.png",className:"img-fluid",style:{width:"1.5rem"}})})})]})})),(0,p.jsx)("div",{className:"container text-center",children:(0,p.jsx)("button",{className:"button  button-charcoal rounded-1 mt-3 mb-2",disabled:!F,onClick:function(){return X.apply(this,arguments)},children:"Save"})})]}),(0,p.jsx)("div",{className:"container-fluid p-0 m-0 ps-3 d-".concat(1===h?"block":"none"," "),children:g&&null!=g&&0!=g.length?J?(0,p.jsx)("div",{className:"col-6 py-2 pb-2 m-auto ",children:(0,p.jsx)("div",{class:"spinner-border",role:"status",children:(0,p.jsx)("span",{class:"visually-hidden",children:"Loading..."})})}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("h6",{className:"fw-bolder text-charcoal75 mt-2",children:"Previous paid payments"}),(0,p.jsx)("div",{className:"container-fluid overflow-scroll p-0 m-0 rounded-1",children:(0,p.jsxs)("table",{className:"table p-0 m-0 border-0 bg-pearl p-2",children:[(0,p.jsxs)("thead",{className:"p-0 m-0 border-0",children:[(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{className:"p-0 m-0 px-1 border-0",rowspan:"2",children:"Amount Paid"}),(0,p.jsx)("th",{className:"p-0 m-0 px-1 border-0",rowspan:"2",children:"Pending Date"}),(0,p.jsx)("th",{className:"p-0 m-0 px-1 border-0",rowspan:"2",children:"Paid Date"}),(0,p.jsx)("th",{className:"p-0 m-0 px-1 border-0 border-bottom",colspan:"7",scope:"colgroup",children:"Payment Method"})]}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{className:"p-0 m-0 px-1 border-0 bg-pearl",scope:"col",children:"Cash"}),(0,p.jsx)("th",{className:"p-0 m-0 px-1 border-0 bg-pearl",scope:"col",children:"Card"}),(0,p.jsx)("th",{className:"p-0 m-0 px-1 border-0 bg-pearl",scope:"col",children:"Paytm"}),(0,p.jsx)("th",{className:"p-0 m-0 px-1 border-0 bg-pearl",scope:"col",children:"Phonepe"}),(0,p.jsx)("th",{className:"p-0 m-0 px-1 border-0 bg-pearl",scope:"col",children:"Razorpay"}),(0,p.jsx)("th",{className:"p-0 m-0 px-1 border-0 bg-pearl",scope:"col",children:"Wire-Transfer"}),(0,p.jsx)("th",{className:"p-0 m-0 px-1 border-0 bg-pearl",scope:"col",children:"Points"})]})]}),(0,p.jsx)("tbody",{children:g.map((function(e){return(0,p.jsxs)("tr",{className:"d-".concat(1==e.is_paid?"":"none"),children:[(0,p.jsx)("td",{className:"p-0 m-0 px-1 border-0",children:e.paid_amount}),(0,p.jsx)("td",{className:"p-0 m-0 px-1 border-0",children:K(e.pending_date)}),(0,p.jsx)("td",{className:"p-0 m-0 px-1 border-0",children:K(e.paid_date)}),(0,p.jsx)("td",{className:"p-0 m-0 px-1 border-0",children:e.payment_method_details&&null!=e.payment_method_details?JSON.parse(e.payment_method_details).Cash:"N/A"}),(0,p.jsx)("td",{className:"p-0 m-0 px-1 border-0",children:e.payment_method_details&&null!=e.payment_method_details?JSON.parse(e.payment_method_details).Card:"N/A"}),(0,p.jsx)("td",{className:"p-0 m-0 px-1 border-0",children:e.payment_method_details&&null!=e.payment_method_details?JSON.parse(e.payment_method_details).Paytm:"N/A"}),(0,p.jsx)("td",{className:"p-0 m-0 px-1 border-0",children:e.payment_method_details&&null!=e.payment_method_details?JSON.parse(e.payment_method_details).Phonepe:"N/A"}),(0,p.jsx)("td",{className:"p-0 m-0 px-1 border-0",children:e.payment_method_details&&null!=e.payment_method_details?JSON.parse(e.payment_method_details).Razorpay:"N/A"}),(0,p.jsx)("td",{className:"p-0 m-0 px-1 border-0",children:e.payment_method_details&&null!=e.payment_method_details?JSON.parse(e.payment_method_details)["Wire-Transfer"]:"N/A"}),(0,p.jsx)("td",{className:"p-0 m-0 px-1 border-0",children:e.payment_method_details&&null!=e.payment_method_details?JSON.parse(e.payment_method_details).Points:"N/A"})]})}))})]})}),g.map((function(e){return(0,p.jsxs)("div",{className:"d-".concat(0==e.is_paid?"block":"none"," "),children:[(0,p.jsxs)("div",{className:"row p-0 m-0 align-items-center mt-2 justify-content-center",children:[(0,p.jsx)("div",{className:"col-auto",children:(0,p.jsxs)("span",{className:"text-burntumber fw-bolder",children:["Pending Amount: ",e.pending_amount]})}),(0,p.jsx)("div",{className:"col-auto",children:(0,p.jsx)("button",{className:"btn p-0",onClick:function(){return w((function(e){return[].concat((0,s.Z)(e),[H])}))},children:(0,p.jsx)("img",{src:"/images/add.png",className:"img-fluid"})})})]}),y.map((function(e,t){return(0,p.jsxs)("div",{className:"",children:[(0,p.jsx)("label",{className:"text-charcoal fw-bold mt-3",children:"Select Payment Method to Pay Remaining pendings"}),(0,p.jsxs)("div",{className:"row p-0 m-0 justify-content-start",children:[(0,p.jsx)("div",{className:"col-5 col-lg-5 col-md-5 col-sm-5 p-0 m-0 ",children:(0,p.jsxs)("select",{className:"form-control bg-seashell py-1",value:e.paymentmethod,onChange:function(t){e.paymentmethod=t.target.value,w((function(e){return(0,s.Z)(e)}))},children:[(0,p.jsx)("option",{className:"text-charcoal75 fw-bolder",children:"Payment Method"}),(0,p.jsx)("option",{value:"Cash",children:"Cash"}),(0,p.jsx)("option",{value:"Card",children:"Card"}),(0,p.jsx)("option",{value:"Paytm",children:"Paytm"}),(0,p.jsx)("option",{value:"Phonepe",children:"Phone Pe"}),(0,p.jsx)("option",{value:"Wire-Transfer",children:"Wire Transfer"}),(0,p.jsx)("option",{value:"Razorpay",children:"Razorpay"}),(0,p.jsx)("option",{value:"Points",children:"Points"}),(0,p.jsx)("option",{value:"Adjust-Advance",children:"Adjust-Advance Cash"})]})}),(0,p.jsx)("div",{className:"col-5 col-lg-5 col-md-5 col-sm-1 p-0 m-0 ms-1",children:(0,p.jsx)("input",{className:"form-control bg-seashell py-1",value:e.amount,onChange:function(t){e.amount=t.target.value,w((function(e){return(0,s.Z)(e)}))}})}),(0,p.jsx)("div",{className:"col-1 col-lg-1 col-md-1 col-sm-1 m-0 p-0 ms-2 ",children:(0,p.jsx)("button",{className:"btn btn-sm p-0 m-0",onClick:function(){!function(e){y.splice(e,e)}(t),w((function(e){return(0,s.Z)(e)}))},children:(0,p.jsx)("img",{src:"/images/delete.png",className:"img-fluid",style:{width:"1.5rem"}})})})]})]})}))]})})),(0,p.jsx)("div",{className:"container text-center",children:(0,p.jsx)("button",{className:"button button-charcoal mt-lg-4 mt-md-3 mt-1 mb-2",onClick:function(){return Y.apply(this,arguments)},children:"Save"})})]}):void 0!==e.paymentsi?(0,p.jsx)("div",{className:"rounded-1 bg-lightgreen text-white fw-bolder p-2 my-4",children:"Please see or update the bill first"}):(0,p.jsx)("div",{className:"rounded-1 bg-lightgreen text-white fw-bolder p-2 my-4",children:"No Pending Payments Found"})})]})}},6309:function(e,t,n){n.d(t,{Ow:function(){return u},cV:function(){return m},dX:function(){return p}});var a=n(4165),s=n(5861),o=n(606),c=n(7992),r=n.n(c),i="https://aartas-qaapp-as.azurewebsites.net/aartas_uat/public/api/connect",l=localStorage.getItem("id"),d=localStorage.getItem("ClinicId"),m=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.get("".concat(i,"/all/document?appointment_id=").concat(t)).then((function(e){n=e.data.data})).catch((function(e){r().Notify.failure(e.message)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),r().Notify.failure(e.t0.message);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n,s){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r().Loading.circle("Upadating Appointment Status",{backgroundColor:"rgb(242, 242, 242,0.5)",svgColor:"#96351E",messageColor:"#96351E",messageFontSize:"1.5rem"}),e.next=4,o.Z.post("".concat(i,"/appointment/change/status"),{appointment_id:t,status:n,admin_id:s}).then((function(e){r().Loading.remove(),e})).catch((function(e){r().Loading.remove(),r().Notify.failure(e.message)}));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),r().Loading.remove(),r().Notify.failure(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n,a){return e.apply(this,arguments)}}(),u=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.get("".concat(i,"/DSR/appointments?admin_id=").concat(l,"&clinic_id=").concat(d)).then((function(e){t=e.data.data.all_appointments_status})).catch((function(e){r().Notify.failure(e.message)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),r().Notify.failure(e.t0.message);case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},6692:function(e,t,n){n.d(t,{R:function(){return s}});n(9867);var a=n(2834),s=function(e){return console.log(e.bill),(0,a.jsxs)("div",{className:"container p-0 m-0 mb-3 bg-seashell",style:{height:"70vh"},children:[(0,a.jsx)("button",{className:"btn-close position-absolute top-0 end-0 mt-2 me-2",onClick:function(){return e.toggle_Scannedbill()}}),(0,a.jsx)("h5",{className:"fw-bold text-center shadow-sm pt-2 pb-1",children:"Generated Bill"}),e.bill&&e.bill.length>0?(0,a.jsx)("div",{children:(0,a.jsx)("iframe",{src:e.bill,width:"100%",style:{height:"60vh"},children:" "})}):(0,a.jsx)("h4",{className:"text-center mt-5 pt-5 fw-bold text-charcoal50",children:"No Generated bill found"})]})}},2627:function(e,t,n){n.d(t,{s:function(){return s}});n(9867);var a=n(2834),s=function(e){return console.log(e.prescriptions),(0,a.jsxs)("div",{className:"container p-0 m-0 mb-3 bg-seashell",style:{height:"80vh"},children:[(0,a.jsx)("button",{className:"btn-close position-absolute top-0 end-0 mt-2 me-2",onClick:function(){return e.toggle_ScannedPres()}}),(0,a.jsx)("h5",{className:"fw-bold text-center shadow-sm pt-2 pb-1",children:"Scanned Prescription"}),e.prescriptions&&e.prescriptions.length>0?(0,a.jsx)("div",{children:(0,a.jsx)("iframe",{src:e.prescriptions,width:"100%",style:{height:"70vh"},children:" "})}):(0,a.jsx)("h4",{className:"text-center mt-5 pt-5 fw-bold text-charcoal50",children:"No Scanned Prescriptions"})]})}}}]);
//# sourceMappingURL=739.e25426f9.chunk.js.map