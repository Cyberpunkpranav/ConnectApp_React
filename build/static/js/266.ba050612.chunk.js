"use strict";(self.webpackChunkconnect_app=self.webpackChunkconnect_app||[]).push([[266],{4012:function(e,t,a){a.d(t,{H:function(){return c}});a(9045);var s=a(7992),n=a.n(s),c=function(){return n().Confirm.init({className:"notiflix-confirm",width:"30rem",zindex:4003,position:"top",distance:"0rem",backgroundColor:"#f2f2f2",borderRadius:"20px",backOverlay:!0,backOverlayColor:"rgba(0,0,0,0.5)",rtl:!1,fontFamily:"Urbanist",cssAnimation:!0,cssAnimationDuration:300,cssAnimationStyle:"fade",plainText:!0,titleColor:"#222023",titleFontSize:"1.5rem",titleMaxLength:34,messageColor:"#222023",messageFontSize:"1.2rem",messageMaxLength:110,buttonsFontSize:"1rem",buttonsMaxLength:34,okButtonColor:"#f8f8f8",okButtonBackground:"#222023",cancelButtonColor:"#222023",cancelButtonBackground:"#ffffff"})}},7266:function(e,t,a){a.d(t,{Ps:function(){return X},fd:function(){return M},c3:function(){return A},AL:function(){return Z},Md:function(){return V}});var s=a(3433),n=a(4165),c=a(5861),l=a(9439),r=a(606),o=a(9867),i=a(811),d=a(3295),m=a(480),u=(a(4594),a(2834)),h=function(e){var t=e.apiData,a=e.fileName;return(0,u.jsx)("button",{className:"button button-lightyellow m-0 p-0 text-start px-2 text-charcoal fw-bold ms-lg-2",onClick:function(e){return function(e,t){var a={Sheets:{data:m.P6.json_to_sheet(e)},SheetNames:["data"]},s=m.cW(a,{bookType:"xlsx",type:"array"}),n=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetcharset=UTF-8"});d.saveAs(n,t+".xlsx")}(t,a)},children:"Export"})},p=function(e){var t=(0,o.useState)([]),a=(0,l.Z)(t,2),s=a[0],r=a[1],i=e.fromdate+"-"+e.todate+"Purchase Entry",d=function(e){if(e)return e=e.split("-").reverse().join("-")};function m(e,t,a,s){if(e&&t&&null!==a)return(Number(e)+Number(t)+Number(a))*Number(s)}function p(e,t,a){if(e&&t&&null!==a)return Number(e)+Number(t)+Number(a)}var x=[];function b(){return N.apply(this,arguments)}function N(){return(N=(0,c.Z)((0,n.Z)().mark((function t(){var a,s,c;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.purchaseentryarr.length){for(a=0;a<e.purchaseentryarr.length;a++)s=e.purchaseentryarr[a].medicines.map((function(e){return{Type:"Medicine","PE ID":e.purchase_entry.bill_id&&null!=e.purchase_entry.bill_id?"PE-"+e.purchase_entry.bill_id:"","Invoice No.":e.purchase_entry.invoice_no&&null!=e.purchase_entry.invoice_no?e.purchase_entry.invoice_no:"","Bill Date":d(e.purchase_entry.bill_date),Distributor:e.purchase_entry.distributor.entity_name,GSTIN:e.purchase_entry.distributor.GSTIN_no,"Item ID":null!=e.id?e.id:"","Item Name":e.medicine&&e.medicine.name&&null!=e.medicine.name?e.medicine.name:"","HSN Code":e.medicine&&null!==e.medicine.hsn_code?e.medicine.hsn_code:"","Batch No.":null!=e.batch_no?e.batch_no:"",ExpiryDate:null!==e.expiry_date?d(e.expiry_date):"",MRP:null!=e.mrp?e.mrp:"",Rate:null!=e.rate?e.rate:"",Qty:e.qty,Discount:null!=e.discount?e.discount:"","Trade Disc.":null!=e.trade_discount?e.trade_discount:"","CGST in Rs":Number(e.CGST)*Number(e.qty),"CGST %":e.CGST_rate,"SGST in Rs":Number(e.SGST)*Number(e.qty),"SGST %":e.SGST_rate,"IGST in Rs":Number(e.IGST)*Number(e.qty),"IGST %":e.IGST_rate,"Total Tax":m(e.CGST,e.SGST,e.IGST,e.qty),"Total Tax %":p(e.CGST_rate,e.SGST_rate,e.IGST_rate),"Cost in Rs":e.cost,"Total Rs":e.total_amount?e.total_amount:""}})),x.push(s),s=e.purchaseentryarr[a].vaccines.map((function(e){return{Type:"Vaccine","PE ID":e.purchase_entry.bill_id&&null!=e.purchase_entry.bill_id?"PE-"+e.purchase_entry.bill_id:"","Invoice No.":e.purchase_entry.invoice_no&&null!=e.purchase_entry.invoice_no?e.purchase_entry.invoice_no:"","Bill Date":d(e.purchase_entry.bill_date),Distributor:e.purchase_entry.distributor.entity_name,GSTIN:e.purchase_entry.distributor.GSTIN_no,"Item ID":null!=e.id?e.id:"","Item Name":e.vaccines&&e.vaccines.name&&null!=e.vaccines.name?e.medicine.name:"","HSN Code":e.vaccines&&null!==e.vaccines.hsn_code?e.vaccines.hsn_code:"","Batch No.":null!=e.batch_no?e.batch_no:"",ExpiryDate:null!==e.expiry_date?d(e.expiry_date):"",MRP:null!=e.mrp?e.mrp:"",Rate:null!=e.rate?e.rate:"",Qty:e.qty,Discount:null!=e.discount?e.discount:"","Trade Disc.":null!=e.trade_discount?e.trade_discount:"","CGST in Rs":Number(e.CGST)*Number(e.qty),"CGST %":e.CGST_rate,"SGST in Rs":Number(e.SGST)*Number(e.qty),"SGST %":e.SGST_rate,"IGST in Rs":Number(e.IGST)*Number(e.qty),"IGST %":e.IGST_rate,"Total Tax in Rs":m(e.CGST,e.SGST,e.IGST,e.qty),"Total Tax %":p(e.CGST_rate,e.SGST_rate,e.IGST_rate),"Cost Rs":e.cost,"Total Rs":e.total_amount?e.total_amount:""}})),x.push(s);c=x.flat(),r(c)}case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,o.useEffect)((function(){function e(){return(e=(0,c.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[e.purchaseentryarr]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(h,{apiData:s,fileName:i})})},x=function(e){var t=(0,o.useState)([]),a=(0,l.Z)(t,2),s=a[0],r=a[1],i=e.fromdate+"-"+e.todate+"Purchase Return",d=function(e){if(e)return e=e.split("-").reverse().join("-")};function m(e,t,a,s){if(e&&t&&null!==a)return(Number(e)+Number(t)+Number(a))*Number(s)}function p(e,t,a){if(e&&t&&null!==a)return Number(e)+Number(t)+Number(a)}var x=[];function b(){return N.apply(this,arguments)}function N(){return(N=(0,c.Z)((0,n.Z)().mark((function t(){var a,s,c,l;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===e.purchasereturnarr.length){t.next=10;break}a=(0,n.Z)().mark((function t(){var a,l;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.purchasereturnarr[s].distributor.entity_name,l=e.purchasereturnarr[s].distributor.GSTIN_no,console.log(),c=e.purchasereturnarr[s].purchase_medicines.map((function(e){return{Type:"Medicine","PE ID":e.purchase_entry.bill_id&&null!=e.purchase_entry.bill_id?"PE-"+e.purchase_entry.bill_id:"","Invoice No.":e.purchase_entry.invoice_no&&null!=e.purchase_entry.invoice_no?e.purchase_entry.invoice_no:"","Bill Date":d(e.purchase_entry.bill_date),Distributor:a,GSTIN:l,"Item ID":null!=e.id?e.id:"","Item Name":e.medicine&&e.medicine.name&&null!=e.medicine.name?e.medicine.name:"","HSN Code":e.medicine&&null!==e.medicine.hsn_code?e.medicine.hsn_code:"","Batch No.":null!=e.batch_no?e.batch_no:"",ExpiryDate:null!==e.expiry_date?d(e.expiry_date):"",MRP:null!=e.mrp?e.mrp:"",Rate:null!=e.rate?e.rate:"",Qty:e.qty,Discount:null!=e.discount?e.discount:"","Trade Disc.":null!=e.trade_discount?e.trade_discount:"","CGST in Rs":Number(e.CGST)*Number(e.qty),"CGST %":e.CGST_rate,"SGST in Rs":Number(e.SGST)*Number(e.qty),"SGST %":e.SGST_rate,"IGST in Rs":Number(e.IGST)*Number(e.qty),"IGST %":e.IGST_rate,"Total Tax in Rs":m(e.CGST,e.SGST,e.IGST,e.qty),"Total Tax %":p(e.CGST_rate,e.SGST_rate,e.IGST_rate),"Cost Rs":e.cost,"Total Rs":e.total_amount?e.total_amount:""}})),x.push(c),c=e.purchasereturnarr[s].purchase_vaccines.map((function(e){return{Type:"Vaccine","PE ID":e.purchase_entry.bill_id&&null!=e.purchase_entry.bill_id?"PE-"+e.purchase_entry.bill_id:"","Invoice No.":e.purchase_entry.invoice_no&&null!=e.purchase_entry.invoice_no?e.purchase_entry.invoice_no:"","Bill Date":d(e.purchase_entry.bill_date),Distributor:a,GSTIN:l,"Item ID":null!=e.id?e.id:"","Item Name":e.vaccine&&e.vaccine.name&&null!=e.vaccine.name?e.vaccine.name:"","HSN Code":e.vaccine&&null!==e.vaccine.hsn_code?e.vaccine.hsn_code:"","Batch No.":null!=e.batch_no?e.batch_no:"",ExpiryDate:null!==e.expiry_date?d(e.expiry_date):"",MRP:null!=e.mrp?e.mrp:"",Rate:null!=e.rate?e.rate:"",Qty:e.qty,"Discount %":null!=e.discount?e.discount:"","Trade Disc. %5":null!=e.trade_discount?e.trade_discount:"","CGST in Rs":Number(e.CGST)*Number(e.qty),"CGST %":e.CGST_rate,"SGST in Rs":Number(e.SGST)*Number(e.qty),"SGST %":e.SGST_rate,"IGST in Rs":Number(e.IGST)*Number(e.qty),"IGST %":e.IGST_rate,"Total Tax in Rs":m(e.CGST,e.SGST,e.IGST,e.qty),"Total Tax %":p(e.CGST_rate,e.SGST_rate,e.IGST_rate),"Cost Rs":e.cost,"Total Rs":e.total_amount?e.total_amount:""}})),x.push(c);case 7:case"end":return t.stop()}}),t)})),s=0;case 3:if(!(s<e.purchasereturnarr.length)){t.next=8;break}return t.delegateYield(a(),"t0",5);case 5:s++,t.next=3;break;case 8:l=x.flat(),r(l);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,o.useEffect)((function(){function e(){return(e=(0,c.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[e.purchasereturnarr]),console.log(e.purchasereturnarr),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(h,{apiData:s,fileName:i})})},b=function(e){var t=(0,o.useState)([]),a=(0,l.Z)(t,2),s=a[0],r=a[1],i=e.fromdate+"-"+e.todate+"Sale Entry",d=function(e){if(e)return e=e.split("-").reverse().join("-")};function m(e,t,a){if(e&&t&&null!==a)return Number(e)+Number(t)+Number(a)}function p(e,t,a){if(e&&t&&null!==a)return Number(e)+Number(t)+Number(a)}function x(e,t,a,s){return e?e-=t+a+s:0}function b(){return N.apply(this,arguments)}function N(){return(N=(0,c.Z)((0,n.Z)().mark((function t(){var a,s,c,l,o;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===e.saleentryarr.length){t.next=11;break}a=[],s=(0,n.Z)().mark((function t(){var s,r,o,i;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=e.saleentryarr[c].bill_id?e.saleentryarr[c].bill_id:"",r=e.saleentryarr[c].bill_date?d(e.saleentryarr[c].bill_date):"",o=null!==e.saleentryarr[c].patient.full_name?e.saleentryarr[c].patient.full_name:"",i=null!==e.saleentryarr[c].doctor_name?e.saleentryarr[c].doctor_name:"",l=e.saleentryarr[c].sale_medicines.map((function(e){return{Type:"Medicine","Bill ID":s,Name:o,Doctor:i,"Bill Date":r,"Item ID":null!=e.medicine_stocks.id?e.medicine_stocks.id:"","Item Name":e.medicine&&e.medicine.name&&null!=e.medicine.name?e.medicine.name:"","HSN Code":e.medicine&&null!==e.medicine.hsn_code?e.medicine.hsn_code:"","Batch No.":null!=e.medicine_stocks.batch_no?e.medicine_stocks.batch_no:"",ExpiryDate:null!==e.medicine_stocks.expiry_date?d(e.medicine_stocks.expiry_date):"",Rate:null!=e.medicine_stocks.rate?e.medicine_stocks.rate:"",Cost:null!=e.medicine_stocks.cost?e.medicine_stocks.cost:"",MRP:null!=e.medicine_stocks.mrp?e.medicine_stocks.mrp:"",Qty:e.qty,"Disc. %":null!=e.discount?e.discount:"","Taxable Amt":x(Number(e.total_amount),Number(e.CGST),Number(e.SGST),Number(e.IGST)),"Total CGST":Number(e.CGST)*Number(e.qty),"CGST %":e.CGST_rate,"Total SGST":Number(e.SGST)*Number(e.qty),"SGST %":e.SGST_rate,"Total IGST":Number(e.IGST)*Number(e.qty),"IGST %":e.IGST_rate,"Total Tax %":m(e.CGST_rate,e.SGST_rate,e.IGST_rate),"Total Tax ":p(e.CGST,e.SGST,e.IGST)*Number(e.qty),Amount:null!==e.total_amount?e.total_amount:"","Grand Total":e.total_amount?e.total_amount:""}})),a.push(l),l=e.saleentryarr[c].sale_vaccines.map((function(e){return{Type:"Vaccine","Bill ID":s,Name:o,Doctor:i,"Bill Date":r,"Item ID":null!=e.vaccine_stocks.id?e.vaccine_stocks.id:"","Item Name":e.vaccine&&e.vaccine.name&&null!=e.vaccine.name?e.vaccine.name:"","HSN Code":e.vaccine&&null!==e.vaccine.hsn_code?e.vaccine.hsn_code:"","Batch No.":null!=e.vaccine_stocks.batch_no?e.vaccine_stocks.batch_no:"",ExpiryDate:null!==e.vaccine_stocks.expiry_date?d(e.vaccine_stocks.expiry_date):"",Rate:null!=e.vaccine_stocks.rate?e.vaccine_stocks.rate:"",Cost:null!=e.vaccine_stocks.cost?e.vaccine_stocks.cost:"",MRP:null!=e.vaccine_stocks.mrp?e.vaccine_stocks.mrp:"",Qty:e.qty,"Disc. %":null!=e.discount?e.discount:"","Taxable Amt":x(Number(e.total_amount),Number(e.CGST),Number(e.SGST),Number(e.IGST)),"Total CGST":Number(e.CGST)*Number(e.qty),"CGST %":e.CGST_rate,"Total SGST":Number(e.SGST)*Number(e.qty),"SGST %":e.SGST_rate,"Total IGST":Number(e.IGST)*Number(e.qty),"IGST %":e.IGST_rate,"Total Tax %":m(e.CGST_rate,e.SGST_rate,e.IGST_rate),"Total Tax ":p(e.CGST,e.SGST,e.IGST)*Number(e.qty),Amount:null!==e.total_amount?e.total_amount:"","Grand Total":e.total_amount?e.total_amount:""}})),a.push(l);case 8:case"end":return t.stop()}}),t)})),c=0;case 4:if(!(c<e.saleentryarr.length)){t.next=9;break}return t.delegateYield(s(),"t0",6);case 6:c++,t.next=4;break;case 9:o=a.flat(),r(o);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,o.useEffect)((function(){function e(){return(e=(0,c.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[e.saleentryarr]),console.log(e.saleentryarr),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(h,{apiData:s,fileName:i})})},N=function(e){var t=(0,o.useState)([]),a=(0,l.Z)(t,2),s=a[0],r=a[1],i=e.fromdate+"-"+e.todate+"Sale Returns",d=function(e){if(e)return e=e.split("-").reverse().join("-")};function m(e,t,a,s){if(e&&t&&null!==a)return(Number(e)+Number(t)+Number(a))*Number(s)}function p(e,t,a){if(e&&t&&null!==a)return Number(e)+Number(t)+Number(a)}var x=[];function b(){return N.apply(this,arguments)}function N(){return(N=(0,c.Z)((0,n.Z)().mark((function t(){var a,s,c,l;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===e.salereturnarr.length){t.next=10;break}a=(0,n.Z)().mark((function t(){var a,l,r,o,i;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=null!==e.salereturnarr[s].return_date?d(e.salereturnarr[s].return_date):"",l=null!==e.salereturnarr[s].sale_entry_id?"P-"+e.salereturnarr[s].sale_entry_id:"",r=null!==e.salereturnarr[s].return_no?"SR-"+e.salereturnarr[s].return_no:"",o=null!==e.salereturnarr[s].sale_entry.patient.full_name?e.salereturnarr[s].sale_entry.patient.full_name:"",i=null!==e.salereturnarr[s].grand_total?e.salereturnarr[s].grand_total:"",console.log(),c=e.salereturnarr[s].sale_medicines.map((function(e){return{"Return No.":r,Name:o,Type:"Medicine","SE ID":l,"Return Date":a,"Item ID":null!=e.id?e.id:"","Item Name":e.medicine&&e.medicine.name&&null!=e.medicine.name?e.medicine.name:"","HSN Code":e.medicine&&null!==e.medicine.hsn_code?e.medicine.hsn_code:"","Batch No.":null!=e.medicine_stocks.batch_no?e.medicine_stocks.batch_no:"",ExpiryDate:null!==e.medicine_stocks.expiry_date?d(e.medicine_stocks.expiry_date):"",MRP:null!=e.medicine_stocks.mrp?e.medicine_stocks.mrp:"",Rate:null!=e.medicine_stocks.rate?e.medicine_stocks.rate:"",Cost:null!=e.medicine_stocks.cost?e.medicine_stocks.cost:"",Discount:null!=e.discount?e.discount:"","Selling Cost in Rs":null!==e.disc_mrp?e.disc_mrp:"",Qty:e.qty,"CGST in Rs":Number(e.CGST)*Number(e.qty),"CGST %":e.CGST_rate,"SGST in Rs":Number(e.SGST)*Number(e.qty),"SGST %":e.SGST_rate,"IGST in Rs":Number(e.IGST)*Number(e.qty),"IGST %":e.IGST_rate,"Total Tax in Rs":m(e.CGST,e.SGST,e.IGST,e.qty),"Total Tax %":p(e.CGST_rate,e.SGST_rate,e.IGST_rate),"Total in Rs":e.total_amount?e.total_amount:"","Returned Amount":i}})),x.push(c),c=e.salereturnarr[s].sale_vaccines.map((function(e){return{"Return No.":r,Name:o,Type:"Vaccine","SE ID":l,"Return Date":a,"Item ID":null!=e.id?e.id:"","Item Name":e.vaccine&&e.vaccine.name&&null!=e.vaccine.name?e.vaccine.name:"","HSN Code":e.vaccine&&null!==e.vaccine.hsn_code?e.vaccine.hsn_code:"","Batch No.":null!=e.vaccine_stocks.batch_no?e.vaccine_stocks.batch_no:"",ExpiryDate:null!==e.medicine_stocks.expiry_date?d(e.vaccine_stocks.expiry_date):"",MRP:null!=e.vaccine_stocks.mrp?e.vaccine_stocks.mrp:"",Rate:null!=e.vaccine_stocks.rate?e.vaccine_stocks.rate:"",Cost:null!=e.vaccine_stocks.cost?e.vaccine_stocks.cost:"",Discount:null!=e.discount?e.discount:"","Selling Cost in Rs":null!==e.disc_mrp?e.disc_mrp:"",Qty:e.qty,"CGST in Rs":Number(e.CGST)*Number(e.qty),"CGST %":e.CGST_rate,"SGST in Rs":Number(e.SGST)*Number(e.qty),"SGST %":e.SGST_rate,"IGST in Rs":Number(e.IGST)*Number(e.qty),"Total Tax in Rs":m(e.CGST,e.SGST,e.IGST),"Total Tax %":p(e.CGST_rate,e.SGST_rate,e.IGST_rate),"Total in Rs":e.total_amount?e.total_amount:"","Returned Amount":i}})),x.push(c);case 10:case"end":return t.stop()}}),t)})),s=0;case 3:if(!(s<e.salereturnarr.length)){t.next=8;break}return t.delegateYield(a(),"t0",5);case 5:s++,t.next=3;break;case 8:l=x.flat(),r(l);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,o.useEffect)((function(){function e(){return(e=(0,c.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[e.salereturnarr]),console.log(e.salereturnarr),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(h,{apiData:s,fileName:i})})},j=a(5602),f=function(e){return(0,u.jsx)("div",{style:{height:"auto",maxWidth:64,width:"100%"},children:(0,u.jsx)(j.Z,{size:256,style:{height:"auto",maxWidth:"100%",width:"100%"},value:e.id,viewBox:"0 0 256 256"})})},g=a(7992),v=a.n(g),y=a(7548),_=a.n(y),S=a(4012);a(9045),a(9371);function w(e){var t=[{c1:"PO-14",c2:(0,u.jsx)("button",{className:"button button-lightblue rounded-5",children:"Pharmacy"}),c3:"Lucky Distributor",c4:"10/10/2022",c5:"Kabir S",c6:"30",c7:"10,000",c8:(0,u.jsx)("button",{className:"button button-lightgreen rounded-5",children:"Approved"})},{c1:"PO-14",c2:(0,u.jsx)("button",{className:"button button-lightyellow rounded-5",children:"Consumables"}),c3:"Lucky Distributor",c4:"10/10/2022",c5:"Kabir S",c6:"30",c7:"10,000",c8:(0,u.jsx)("button",{className:"button button-lightyellow rounded-5",children:"Pending"})},{c1:"PO-14",c2:(0,u.jsx)("button",{className:"button button-lightblue rounded-5",children:"Pharmacy"}),c3:"Lucky Distributor",c4:"10/10/2022",c5:"Kabir S",c6:"30",c7:"10,000",c8:(0,u.jsx)("button",{className:"button button-lightred rounded-5",children:"Cancelled"})},{c1:"PO-14",c2:(0,u.jsx)("button",{className:"button button-lightblue rounded-5",children:"Pharmacy"}),c3:"Lucky Distributor",c4:"10/10/2022",c5:"Kabir S",c6:"30",c7:"10,000",c8:(0,u.jsx)("button",{className:"button button-burntumber rounded-5",children:"Rejected"})},{c1:"PO-14",c2:(0,u.jsx)("button",{className:"button button-lightblue rounded-5",children:"Pharmacy"}),c3:"Lucky Distributor",c4:"10/10/2022",c5:"Kabir S",c6:"30",c7:"10,000",c8:(0,u.jsx)("button",{className:"button button-lightgreen rounded-5",children:"Approved"})}];return(0,u.jsx)(u.Fragment,{children:t.map((function(t,a){return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:t.c1}),(0,u.jsx)("td",{children:t.c2}),(0,u.jsx)("td",{children:t.c3}),(0,u.jsx)("td",{children:t.c4}),(0,u.jsx)("td",{children:t.c5}),(0,u.jsx)("td",{children:t.c6}),(0,u.jsx)("td",{children:t.c7}),(0,u.jsx)("td",{children:t.c8}),(0,u.jsxs)("td",{children:[(0,u.jsx)("button",{className:"btn",children:(0,u.jsx)("img",{src:"/images/enter.png",alt:"displaying_image",style:{width:"1.5rem"},className:"me-1"})}),(0,u.jsx)("button",{className:"btn",onClick:e.itemdetails,children:(0,u.jsx)("img",{src:"/images/archivebox.png",alt:"displaying_image",className:"ms-1",style:{width:"1.5rem"}})})]}),(0,u.jsx)("td",{children:(0,u.jsx)("button",{className:"btn position-relative cursor-pointer more p-0 m-0",children:(0,u.jsx)("img",{src:"/images/delete.png",alt:"displaying_image",style:{width:"1.5rem"}})})})]},a)}))})}function T(){return(0,u.jsx)(u.Fragment,{children:[{c1:"01",c2:"Dolo 650",c3:"04",c4:"600",c5:"Lucky Distributors"}].map((function(e,t){return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:e.c1}),(0,u.jsx)("td",{children:e.c2}),(0,u.jsx)("td",{children:e.c3}),(0,u.jsx)("td",{children:e.c4}),(0,u.jsx)("td",{children:e.c5}),(0,u.jsx)("td",{children:(0,u.jsx)("img",{src:"/images/cart.png",alt:"displaying_image",style:{width:"1.5rem"},className:"me-1"})}),(0,u.jsx)("td",{children:(0,u.jsx)("button",{className:"btn position-relative cursor-pointer more p-0 m-0",children:(0,u.jsx)("img",{src:"/images/more.png",alt:"displaying_image",style:{width:"1.5rem"}})})})]},t)}))})}function k(){return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("table",{className:"table datatable text-center",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"No."}),(0,u.jsx)("th",{children:"Item Name"}),(0,u.jsx)("th",{children:"Total Qty"}),(0,u.jsx)("th",{children:"Amount"})]})}),(0,u.jsx)("tbody",{children:[{c1:"01",c2:"Dolo 650",c3:"10",c4:"600"}].map((function(e,t){return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:e.c1}),(0,u.jsx)("td",{children:e.c2}),(0,u.jsx)("td",{children:e.c3}),(0,u.jsx)("td",{children:e.c4})]},e.id)}))})]})})}var C=function(e){var t=(0,o.useContext)(i.Jx),a=(0,o.useState)(),s=(0,l.Z)(a,2),d=s[0],m=s[1],h=(0,o.useState)(),p=(0,l.Z)(h,2),x=p[0],b=p[1],N=(0,o.useState)(),j=(0,l.Z)(N,2),f=j[0],g=j[1],y=(0,o.useState)(),_=(0,l.Z)(y,2),w=_[0],T=_[1],k=(0,o.useState)(),C=(0,l.Z)(k,2),G=C[0],Z=C[1],I=(0,o.useState)(),D=(0,l.Z)(I,2),R=D[0],P=D[1],A=(0,o.useState)(),q=(0,l.Z)(A,2),E=q[0],M=q[1],L=(0,o.useState)(),H=(0,l.Z)(L,2),F=H[0],B=H[1],Q=(0,o.useState)(),O=(0,l.Z)(Q,2),z=O[0],V=O[1],U=(0,o.useState)(),Y=(0,l.Z)(U,2),W=Y[0],J=Y[1],X=(0,o.useState)(),K=(0,l.Z)(X,2),$=K[0],ee=K[1],te=(0,o.useState)(),ae=(0,l.Z)(te,2),se=ae[0],ne=ae[1],ce=(0,o.useState)(),le=(0,l.Z)(ce,2),re=le[0],oe=le[1],ie=(0,o.useState)(),de=(0,l.Z)(ie,2),me=de[0],ue=de[1],he=(0,o.useState)(),pe=(0,l.Z)(he,2),xe=pe[0],be=pe[1],Ne=(0,o.useState)(),je=(0,l.Z)(Ne,2),fe=je[0],ge=je[1],ve=function(){var a=(0,c.Z)((0,n.Z)().mark((function a(){var s;return(0,n.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s={display_name:d,name:x,salt_name:f,manufacturer:w,strength:G,medicine_unit:R,packaging:E,packaging_type_id:F,medicine_form_id:z,schedule:W,hsn_code:$,rack_number:se,max_stock_count:re,min_stock_count:me,alert_stock_count:xe,image:fe},!(d&&x&&f&&w&&G&&R&&E&&F&&z&&W&&$&&se&&re&&me&&xe&&fe)){a.next=12;break}return a.prev=2,a.next=5,r.Z.post("".concat(t,"/medicine/add"),s).then((function(t){e.ToggleNewMedicine(),ye(),1==t.data.status?v().Notify.success(t.data.message):v().Notify.warning(t.data.message)}));case 5:a.next=10;break;case 7:a.prev=7,a.t0=a.catch(2),v().Notify.failure(a.t0.message);case 10:a.next=13;break;case 12:v().Notify.warning("Please Fill all Details");case 13:case"end":return a.stop()}}),a,null,[[2,7]])})));return function(){return a.apply(this,arguments)}}();var ye=function(){var e=(0,c.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(),b(),g(),T(),Z(),P(),M(),B(),V(),J(),ee(),ne(),oe(),ue(),be(),ge();case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,u.jsxs)("div",{className:"position-relative bg-seashell p-0 m-0 fw-bold",children:[(0,u.jsx)("h5",{className:"p-0 m-0 text-center py-2 border-bottom",children:"Add New Medicine"}),(0,u.jsx)("button",{className:"btn btn-close position-absolute end-0 top-0 mt-1 me-1",onClick:e.ToggleNewMedicine}),(0,u.jsxs)("div",{className:"scroll scroll-y",style:{height:"78vh"},children:[(0,u.jsx)("div",{className:"row p-0 m-0",children:(0,u.jsxs)("div",{className:"row p-0 m-0 justify-content-end",children:[(0,u.jsx)("p",{className:"text-charcoal fw-bold p-0 m-0 py-2 text-center",children:"Basic Details"}),(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("p",{className:"p-0 m-0",children:"Display Name"}),(0,u.jsx)("input",{className:"form-control w-75 bg-seashell p-0 m-0 px-2 py-1",value:d||"",onChange:function(e){m(e.target.value)}})]}),(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("p",{className:"p-0 m-0",children:"Name"}),(0,u.jsx)("input",{className:"form-control w-75 bg-seashell p-0 m-0 px-2 py-1",value:x||"",onChange:function(e){b(e.target.value)}})]}),(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("p",{className:"p-0 m-0",children:"Salt Name"}),(0,u.jsx)("input",{className:"form-control w-75 bg-seashell p-0 m-0 px-2 py-1",value:f||"",onChange:function(e){g(e.target.value)}})]}),(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("p",{className:"p-0 m-0",children:"Manufacturer"}),(0,u.jsx)("input",{className:"form-control w-75 bg-seashell p-0 m-0 px-2 py-1",value:w||"",onChange:function(e){T(e.target.value)}})]})]})}),(0,u.jsx)("div",{className:"row p-0 m-0",children:(0,u.jsxs)("div",{className:"row p-0 m-0 justify-content-end mt-3",children:[(0,u.jsx)("p",{className:"text-charcoal fw-bold p-0 m-0 py-2 text-center",children:"Other Details  "}),(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("p",{className:"p-0 m-0",children:"Strength"}),(0,u.jsx)("input",{className:"form-control w-75 bg-seashell p-0 m-0 px-2 py-1",value:G||"",onChange:function(e){Z(e.target.value)}})]}),(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("p",{className:"p-0 m-0",children:"Medicine Unit"}),(0,u.jsxs)("select",{className:"form-control w-75 bg-seashell p-0 m-0 px-2 py-1",value:R||"",onChange:function(e){P(e.target.value)},children:[(0,u.jsx)("option",{children:"Select Unit"}),(0,u.jsx)("option",{value:"1",children:"mg"}),(0,u.jsx)("option",{value:"2",children:"ml"}),(0,u.jsx)("option",{value:"3",children:"mcg"}),(0,u.jsx)("option",{value:"4",children:"g"}),(0,u.jsx)("option",{value:"5",children:"%"})]})]}),(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("p",{className:"p-0 m-0",children:"Packaging"}),(0,u.jsx)("input",{className:"form-control w-75 bg-seashell p-0 m-0 px-2 py-1",value:E||"",onChange:function(e){M(e.target.value)}})]}),(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("p",{className:"p-0 m-0",children:"Packaging Type"}),(0,u.jsxs)("select",{className:"form-control w-75 bg-seashell p-0 m-0 px-2 py-1",value:F||"",onChange:function(e){B(e.target.value)},children:[(0,u.jsx)("option",{children:"Select Packaging Type"}),(0,u.jsx)("option",{value:"1",children:"Strip"}),(0,u.jsx)("option",{value:"2",children:"Tube"}),(0,u.jsx)("option",{value:"3",children:"Bottle"}),(0,u.jsx)("option",{value:"4",children:"Syringe"})]})]}),(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("p",{className:"p-0 m-0",children:"Medicine Form"}),(0,u.jsxs)("select",{className:"form-control w-75 bg-seashell p-0 m-0 px-2 py-1",value:z||"",onChange:function(e){V(e.target.value)},children:[(0,u.jsx)("option",{children:"Select Medicine form"}),(0,u.jsx)("option",{value:"1",children:"tablet"}),(0,u.jsx)("option",{value:"2",children:"capsule"}),(0,u.jsx)("option",{value:"3",children:"liquid"}),(0,u.jsx)("option",{value:"4",children:"topical"}),(0,u.jsx)("option",{value:"5",children:"cream"}),(0,u.jsx)("option",{value:"6",children:"device"}),(0,u.jsx)("option",{value:"7",children:"drop"}),(0,u.jsx)("option",{value:"8",children:"foam"}),(0,u.jsx)("option",{value:"9",children:"gel"}),(0,u.jsx)("option",{value:"10",children:"inhaler"}),(0,u.jsx)("option",{value:"11",children:"injection"}),(0,u.jsx)("option",{value:"12",children:"lotion"}),(0,u.jsx)("option",{value:"13",children:"ointment"}),(0,u.jsx)("option",{value:"14",children:"patch"}),(0,u.jsx)("option",{value:"15",children:"powder"}),(0,u.jsx)("option",{value:"16",children:"spray"})]})]}),(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("p",{className:"p-0 m-0",children:"Schedule"}),(0,u.jsxs)("select",{className:"form-control w-75 bg-seashell p-0 m-0 px-2 py-1",value:W||"",onChange:function(e){J(e.target.value)},children:[(0,u.jsx)("option",{children:"Select Schedule"}),(0,u.jsx)("option",{value:"G",children:"G"}),(0,u.jsx)("option",{value:"H",children:"H"}),(0,u.jsx)("option",{value:"X",children:"X"}),(0,u.jsx)("option",{value:"J",children:"J"}),(0,u.jsx)("option",{value:"A",children:"A"}),(0,u.jsx)("option",{value:"B",children:"B"}),(0,u.jsx)("option",{value:"C",children:"C"}),(0,u.jsx)("option",{value:"D",children:"D"}),(0,u.jsx)("option",{value:"E",children:"E"}),(0,u.jsx)("option",{value:"F",children:"F"}),(0,u.jsx)("option",{value:"K",children:"K"}),(0,u.jsx)("option",{value:"M",children:"M"}),(0,u.jsx)("option",{value:"N",children:"N"}),(0,u.jsx)("option",{value:"O",children:"O"}),(0,u.jsx)("option",{value:"P",children:"P"}),(0,u.jsx)("option",{value:"Q",children:"Q"}),(0,u.jsx)("option",{value:"R",children:"R"}),(0,u.jsx)("option",{value:"S",children:"S"}),(0,u.jsx)("option",{value:"T",children:"T"}),(0,u.jsx)("option",{value:"U",children:"U"}),(0,u.jsx)("option",{value:"V",children:"V"}),(0,u.jsx)("option",{value:"Y",children:"Y"})]})]})]})}),(0,u.jsxs)("div",{className:"row p-0 m-0 justify-content-center mt-3",children:[(0,u.jsx)("p",{className:"text-charcoal fw-bold p-0 m-0 py-2 text-center",children:"Choose Medicine Photo"}),(0,u.jsx)("div",{className:"col-4 ms-5",children:(0,u.jsx)("input",{type:"file",className:"form-control bg-seashell p-0 m-0 px-2 py-1",value:fe||"",onChange:function(e){ge(e.target.value)}})})]}),(0,u.jsxs)("div",{className:"row p-0 m-0 justify-content-end mt-3 mb-3",children:[(0,u.jsx)("p",{className:"text-charcoal fw-bold p-0 m-0 py-2 text-center",children:"HSN Code and Count"}),(0,u.jsxs)("div",{className:"col-12",children:[(0,u.jsx)("p",{className:"p-0 m-0",children:"HSN Code"}),(0,u.jsx)("input",{className:"form-control bg-seashell p-0 m-0 px-2 py-1",value:$||"",onChange:function(e){ee(e.target.value)}})]}),(0,u.jsxs)("div",{className:"col-3",children:[(0,u.jsx)("p",{className:"p-0 m-0",children:"Rack Number"}),(0,u.jsx)("input",{className:"form-control bg-seashell p-0 m-0 px-2 py-1",value:se||"",onChange:function(e){ne(e.target.value)}})]}),(0,u.jsxs)("div",{className:"col-3",children:[(0,u.jsx)("p",{className:"p-0 m-0",children:"Max. Stock Count"}),(0,u.jsx)("input",{className:"form-control bg-seashell p-0 m-0 px-2 py-1",value:re||"",onChange:function(e){oe(e.target.value)}})]}),(0,u.jsxs)("div",{className:"col-3",children:[(0,u.jsx)("p",{className:"p-0 m-0",children:"Min. Stock Count"}),(0,u.jsx)("input",{className:"form-control bg-seashell p-0 m-0 px-2 py-1",value:me||"",onChange:function(e){ue(e.target.value)}})]}),(0,u.jsxs)("div",{className:"col-3",children:[(0,u.jsx)("p",{className:"p-0 m-0",children:"Alert Stock Count "}),(0,u.jsx)("input",{className:"form-control bg-seashell p-0 m-0 px-2 py-1",value:xe||"",onChange:function(e){be(e.target.value)}})]})]})]}),(0,u.jsx)("div",{className:"bg-pearl border p-3 align-items-center ",children:(0,u.jsxs)("div",{className:"row p-0 m-0 text-center justify-content-between align-items-center align-self-center",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("button",{className:"button button-charcoal ",onClick:function(){(0,S.H)(),v().Confirm.show("Save Purchase Entry","Do you surely want to add ".concat(d," as New Medicine "),"Yes","No",(function(){ve()}),(function(){return 0}),{})},children:"Save"})}),(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("button",{className:"button button-seashell",onClick:ye,children:"Cancel"})})]})})]})},G=function(e){var t=(0,o.useContext)(i.Jx),a=(0,o.useState)(),s=(0,l.Z)(a,2),d=s[0],m=s[1],h=(0,o.useState)(),p=(0,l.Z)(h,2),x=p[0],b=p[1],N=(0,o.useState)(),j=(0,l.Z)(N,2),f=j[0],g=j[1],y=(0,o.useState)(),_=(0,l.Z)(y,2),w=_[0],T=_[1],k=(0,o.useState)(),C=(0,l.Z)(k,2),G=C[0],Z=C[1],I=(0,o.useState)(),D=(0,l.Z)(I,2),R=D[0],P=D[1],A=(0,o.useState)(),q=(0,l.Z)(A,2),E=q[0],M=q[1],L=(0,o.useState)(),H=(0,l.Z)(L,2),F=H[0],B=H[1],Q=(0,o.useState)(),O=(0,l.Z)(Q,2),z=O[0],V=O[1],U=(0,o.useState)(),Y=(0,l.Z)(U,2),W=Y[0],J=Y[1],X=(0,o.useState)(),K=(0,l.Z)(X,2),$=K[0],ee=K[1],te=(0,o.useState)(),ae=(0,l.Z)(te,2),se=ae[0],ne=ae[1],ce=(0,o.useState)(),le=(0,l.Z)(ce,2),re=le[0],oe=le[1],ie=(0,o.useState)(),de=(0,l.Z)(ie,2),me=de[0],ue=de[1],he=(0,o.useState)(),pe=(0,l.Z)(he,2),xe=pe[0],be=pe[1],Ne=(0,o.useState)(""),je=(0,l.Z)(Ne,2),fe=je[0],ge=je[1],ve=e.data,ye=function(){var e=(0,c.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(ve.display_name),b(ve.name),g(ve.salt_name),T(ve.manufacturer),Z(ve.strength),P(ve.medicine_unit),M(ve.packaging),B(ve.packaging_type_id),V(ve.medicine_form_id),J(ve.schedule),ee(ve.hsn_code),ne(ve.rack_number),oe(ve.max_stock_count),ue(ve.min_stock_count),be(ve.alert_stock_count),ge(ve.image);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){ye()}),[]);var _e=function(){var a=(0,c.Z)((0,n.Z)().mark((function a(){var s;return(0,n.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s={medicine_id:ve.id,display_name:d,name:x,salt_name:f,manufacturer:w,strength:G,medicine_unit:Number(R),packaging:E,packaging_type_id:Number(F),medicine_form_id:Number(z),schedule:W,hsn_code:$,rack_number:se,max_stock_count:Number(re),min_stock_count:Number(me),alert_stock_count:Number(xe),image:fe?{name:fe[0].name,size:fe[0].size,type:fe[0].type,webkitRelativePath:fe[0].webkitRelativePath,lastModifiedDate:fe[0].lastModifiedDate,lastModified:fe[0].lastModified}:""},console.log(e.data),console.log(e.data.id),a.prev=3,a.next=6,r.Z.post("".concat(t,"/medicine/update"),s).then((function(t){console.log(t),v().Notify.success(t.data.message),e.medcinelist()}));case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(3),v().Notify.failure(a.t0.message);case 11:case"end":return a.stop()}}),a,null,[[3,8]])})));return function(){return a.apply(this,arguments)}}();return null!==fe&&console.log(fe[0]),console.log(ve),(0,u.jsxs)("div",{className:"position-relative bg-seashell p-0 m-0 fw-bold",children:[(0,u.jsx)("h5",{className:"p-0 m-0 text-center py-2 border-bottom",children:"Update Medicine"}),(0,u.jsx)("button",{className:"btn btn-close position-absolute end-0 top-0 mt-1 me-1",onClick:e.ToggleUpdateMedicine}),(0,u.jsxs)("div",{className:"scroll scroll-y",style:{height:"78vh"},children:[(0,u.jsx)("div",{className:"row p-0 m-0",children:(0,u.jsxs)("div",{className:"row p-0 m-0 justify-content-end",children:[(0,u.jsx)("p",{className:"text-charcoal fw-bold p-0 m-0 py-2 text-center",children:"Basic Details"}),(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("p",{className:"p-0 m-0",children:"Display Name"}),(0,u.jsx)("input",{className:"form-control w-75 bg-seashell p-0 m-0 px-2 py-1",value:d||"",onChange:function(e){m(e.target.value)}})]}),(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("p",{className:"p-0 m-0",children:"Name"}),(0,u.jsx)("input",{className:"form-control w-75 bg-seashell p-0 m-0 px-2 py-1",value:x||"",onChange:function(e){b(e.target.value)}})]}),(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("p",{className:"p-0 m-0",children:"Salt Name"}),(0,u.jsx)("input",{className:"form-control w-75 bg-seashell p-0 m-0 px-2 py-1",value:f||"",onChange:function(e){g(e.target.value)}})]}),(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("p",{className:"p-0 m-0",children:"Manufacturer"}),(0,u.jsx)("input",{className:"form-control w-75 bg-seashell p-0 m-0 px-2 py-1",value:w||"",onChange:function(e){T(e.target.value)}})]})]})}),(0,u.jsx)("div",{className:"row p-0 m-0",children:(0,u.jsxs)("div",{className:"row p-0 m-0 justify-content-end mt-3",children:[(0,u.jsx)("p",{className:"text-charcoal fw-bold p-0 m-0 py-2 text-center",children:"Other Details  "}),(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("p",{className:"p-0 m-0",children:"Strength"}),(0,u.jsx)("input",{className:"form-control w-75 bg-seashell p-0 m-0 px-2 py-1",value:G||"",onChange:function(e){Z(e.target.value)}})]}),(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("p",{className:"p-0 m-0",children:"Medicine Unit"}),(0,u.jsxs)("select",{className:"form-control w-75 bg-seashell p-0 m-0 px-2 py-1",value:R||"",onChange:function(e){P(e.target.value)},children:[(0,u.jsx)("option",{children:"Select Unit"}),(0,u.jsx)("option",{value:"1",children:"mg"}),(0,u.jsx)("option",{value:"2",children:"ml"}),(0,u.jsx)("option",{value:"3",children:"mcg"}),(0,u.jsx)("option",{value:"4",children:"g"}),(0,u.jsx)("option",{value:"5",children:"%"})]})]}),(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("p",{className:"p-0 m-0",children:"Packaging"}),(0,u.jsx)("input",{className:"form-control w-75 bg-seashell p-0 m-0 px-2 py-1",value:E||"",onChange:function(e){M(e.target.value)}})]}),(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("p",{className:"p-0 m-0",children:"Packaging Type"}),(0,u.jsxs)("select",{className:"form-control w-75 bg-seashell p-0 m-0 px-2 py-1",value:F||"",onChange:function(e){B(e.target.value)},children:[(0,u.jsx)("option",{children:"Select Packaging Type"}),(0,u.jsx)("option",{value:"1",children:"Strip"}),(0,u.jsx)("option",{value:"2",children:"Tube"}),(0,u.jsx)("option",{value:"3",children:"Bottle"}),(0,u.jsx)("option",{value:"4",children:"Syringe"})]})]}),(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("p",{className:"p-0 m-0",children:"Medicine Form"}),(0,u.jsxs)("select",{className:"form-control w-75 bg-seashell p-0 m-0 px-2 py-1",value:z||"",onChange:function(e){V(e.target.value)},children:[(0,u.jsx)("option",{children:"Select Medicine form"}),(0,u.jsx)("option",{value:"1",children:"tablet"}),(0,u.jsx)("option",{value:"2",children:"capsule"}),(0,u.jsx)("option",{value:"3",children:"liquid"}),(0,u.jsx)("option",{value:"4",children:"topical"}),(0,u.jsx)("option",{value:"5",children:"cream"}),(0,u.jsx)("option",{value:"6",children:"device"}),(0,u.jsx)("option",{value:"7",children:"drop"}),(0,u.jsx)("option",{value:"8",children:"foam"}),(0,u.jsx)("option",{value:"9",children:"gel"}),(0,u.jsx)("option",{value:"10",children:"inhaler"}),(0,u.jsx)("option",{value:"11",children:"injection"}),(0,u.jsx)("option",{value:"12",children:"lotion"}),(0,u.jsx)("option",{value:"13",children:"ointment"}),(0,u.jsx)("option",{value:"14",children:"patch"}),(0,u.jsx)("option",{value:"15",children:"powder"}),(0,u.jsx)("option",{value:"16",children:"spray"})]})]}),(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("p",{className:"p-0 m-0",children:"Schedule"}),(0,u.jsxs)("select",{className:"form-control w-75 bg-seashell p-0 m-0 px-2 py-1",value:W||"",onChange:function(e){J(e.target.value)},children:[(0,u.jsx)("option",{children:"Select Schedule"}),(0,u.jsx)("option",{value:"G",children:"G"}),(0,u.jsx)("option",{value:"H",children:"H"}),(0,u.jsx)("option",{value:"X",children:"X"}),(0,u.jsx)("option",{value:"J",children:"J"}),(0,u.jsx)("option",{value:"A",children:"A"}),(0,u.jsx)("option",{value:"B",children:"B"}),(0,u.jsx)("option",{value:"C",children:"C"}),(0,u.jsx)("option",{value:"D",children:"D"}),(0,u.jsx)("option",{value:"E",children:"E"}),(0,u.jsx)("option",{value:"F",children:"F"}),(0,u.jsx)("option",{value:"K",children:"K"}),(0,u.jsx)("option",{value:"M",children:"M"}),(0,u.jsx)("option",{value:"N",children:"N"}),(0,u.jsx)("option",{value:"O",children:"O"}),(0,u.jsx)("option",{value:"P",children:"P"}),(0,u.jsx)("option",{value:"Q",children:"Q"}),(0,u.jsx)("option",{value:"R",children:"R"}),(0,u.jsx)("option",{value:"S",children:"S"}),(0,u.jsx)("option",{value:"T",children:"T"}),(0,u.jsx)("option",{value:"U",children:"U"}),(0,u.jsx)("option",{value:"V",children:"V"}),(0,u.jsx)("option",{value:"Y",children:"Y"})]})]})]})}),(0,u.jsxs)("div",{className:"row p-0 m-0 justify-content-end mt-3 mb-3",children:[(0,u.jsx)("p",{className:"text-charcoal fw-bold p-0 m-0 py-2 text-center",children:"HSN Code and Count"}),(0,u.jsxs)("div",{className:"col-3",children:[(0,u.jsx)("p",{className:"p-0 m-0",children:"HSN Code"}),(0,u.jsx)("input",{className:"form-control bg-seashell p-0 m-0 px-2 py-1",value:$||"",onChange:function(e){ee(e.target.value)}})]}),(0,u.jsxs)("div",{className:"col-3",children:[(0,u.jsx)("p",{className:"p-0 m-0",children:"Rack Number"}),(0,u.jsx)("input",{className:"form-control bg-seashell p-0 m-0 px-2 py-1",value:se||"",onChange:function(e){ne(e.target.value)}})]}),(0,u.jsxs)("div",{className:"col-3",children:[(0,u.jsx)("p",{className:"p-0 m-0",children:"Max. Stock Count"}),(0,u.jsx)("input",{className:"form-control bg-seashell p-0 m-0 px-2 py-1",value:re||"",onChange:function(e){oe(e.target.value)}})]}),(0,u.jsxs)("div",{className:"col-3",children:[(0,u.jsx)("p",{className:"p-0 m-0",children:"Min. Stock Count"}),(0,u.jsx)("input",{className:"form-control bg-seashell p-0 m-0 px-2 py-1",value:me||"",onChange:function(e){ue(e.target.value)}})]}),(0,u.jsxs)("div",{className:"col-3",children:[(0,u.jsx)("p",{className:"p-0 m-0",children:"Alert Stock Count "}),(0,u.jsx)("input",{className:"form-control bg-seashell p-0 m-0 px-2 py-1",value:xe||"",onChange:function(e){be(e.target.value)}})]})]})]}),(0,u.jsx)("div",{className:"bg-pearl border p-2 align-items-center ",children:(0,u.jsxs)("div",{className:"row p-0 m-0 text-center justify-content-between align-items-center align-self-center",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("button",{className:"button button-charcoal ",onClick:function(){(0,S.H)(),v().Confirm.show("Save Purchase Entry","Do you surely want to Update ".concat(ve.display_name," Details"),"Yes","No",(function(){_e()}),(function(){return 0}),{})},children:"Update"})}),(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("button",{className:"button button-seashell",onClick:ye,children:"Set Previous"})})]})})]})};function Z(e){var t,a=(0,o.useContext)(i.Pl),s=[{option:"Sale Entry",display:a.sale_entry_view?1:0},{option:"Sale Returns",display:a.sale_return_view?1:0}],n=(0,o.useState)(0),c=(0,l.Z)(n,2),r=c[0],d=c[1];return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("section",{className:"salesection pt-1",children:(0,u.jsx)("div",{className:"container-fluid p-0 m-0",children:(0,u.jsx)("div",{className:"row gx-3 p-0 m-0",children:(0,u.jsx)("div",{className:"col-10",children:(0,u.jsx)("div",{className:"row",children:s.map((function(e,t){return(0,u.jsx)("div",{className:"col-auto salebuttons d-".concat(1==e.display?"":"none"),children:(0,u.jsx)("button",{className:"btn btn-sm rounded-pill text-".concat(t===r?"light":"dark"," bg-").concat(t===r?"charcoal":"seashell"),onClick:function(e){return d(t)},children:e.option})})}))})})})})}),(0,u.jsx)("section",{className:"tablesrender position-relative",children:(0,u.jsx)("div",{className:"container-fluid p-0 m-0 pt-3",children:(0,u.jsx)("div",{className:"",children:(t=r,0===t?(0,u.jsx)(I,{function:e.func,function2:e.function}):1===t?(0,u.jsx)(P,{}):(0,u.jsx)("div",{className:"fs-2",children:"Nothing Selected"}))})})})]})}function I(e){var t=(0,o.useContext)(i.Pl),a=(0,o.useContext)(i.U8),s=localStorage.getItem("ClinicId"),d=localStorage.getItem("id"),m=(0,o.useContext)(i.Jx),h=(0,o.useState)("none"),p=(0,l.Z)(h,2),x=p[0],N=p[1],j=(0,o.useState)(1),f=(0,l.Z)(j,2),g=f[0],y=(f[1],(0,o.useState)()),S=(0,l.Z)(y,2),w=S[0],T=S[1],k=(0,o.useState)(),C=(0,l.Z)(k,2),G=C[0],Z=C[1],I=(0,o.useState)(!1),P=(0,l.Z)(I,2),q=P[0],E=P[1],M=(0,o.useState)([]),L=(0,l.Z)(M,2),H=L[0],F=L[1],B=(0,o.useState)([]),Q=(0,l.Z)(B,2),O=Q[0],z=Q[1],V=(0,o.useState)(),U=(0,l.Z)(V,2),Y=U[0],W=U[1],J=(0,o.useState)("none"),X=(0,l.Z)(J,2),K=X[0],$=X[1],ee=(0,o.useState)([]),te=(0,l.Z)(ee,2),ae=te[0],se=te[1],ne=(0,o.useState)("none"),ce=(0,l.Z)(ne,2),le=ce[0],re=ce[1],oe=(0,o.useState)(),ie=(0,l.Z)(oe,2),de=ie[0],me=ie[1],ue=(0,o.useState)(),he=(0,l.Z)(ue,2),pe=he[0],xe=he[1],be=function(){"none"===K&&$("block"),"block"===K&&$("none")},Ne=function(){"none"===x&&N("block"),"block"===x&&(N("none"),W())},je=function(){"none"===le&&re("block"),"block"===le&&(re("none"),me())};function fe(e){if(void 0==e||void 0==e.selected){E(!0);try{r.Z.get("".concat(m,"/sale/entry?clinic_id=").concat(s,"&limit=25&offset=0&from_date=").concat(w||a,"&to_date=").concat(G||(w||a))).then((function(e){console.log(e),F(e.data.data.sale_entry),E(!1)})).catch((function(e){v().Notify.warning(e),E(!1)}))}catch(t){v().Notify.warning(t.message),E(!1)}}else{E(!0);try{r.Z.get("".concat(m,"/sale/entry?clinic_id=").concat(s,"&limit=25&offset=").concat(25*e.selected,"&from_date=").concat(w||a,"&to_date=").concat(G||(w||a))).then((function(e){console.log(e),F(e.data.data.sale_entry),E(!1)})).catch((function(e){v().Notify.warning(e),E(!1)}))}catch(t){v().Notify.warning(t.message),E(!1)}}}(0,o.useEffect)((function(){!function(){try{r.Z.get("".concat(m,"/sale/entry?clinic_id=").concat(s,"&from_date=").concat(w||a,"&to_date=").concat(G||w||a)).then((function(e){xe(e.data.data.total_count),se(Math.round(e.data.data.total_count/25)+1),E(!1)})).catch((function(e){v().Notify.warning(e),E(!1)}))}catch(e){v().Notify.warning(e.message),E(!1)}}()}),[g,w,G]),(0,o.useEffect)((function(){fe(),function(){try{r.Z.get("".concat(m,"/sale/entry?clinic_id=").concat(s,"&limit=").concat(pe,"&offset=0&from_date=").concat(w||a,"&to_date=").concat(G||w||a)).then((function(e){console.log(e),z(e.data.data.sale_entry),E(!1)})).catch((function(e){v().Notify.warning(e),E(!1)}))}catch(e){v().Notify.warning(e.message),E(!1)}}()}),[pe]);var ge=function(e){if(e)return e=e.split("-").reverse().join("-")},ve=[[1,"Confirmed","lightgreen"],[2,"Payment done","success"],[3,"Completed","lightyellow"],[4,"Cancelled","lightred"]];function ye(e){for(var t,a=0;a<ve.length;a++)if(e==ve[a][0]){t=ve[a][1];break}return t}function _e(e){for(var t,a=0;a<ve.length;a++)if(e==ve[a][0]){t=ve[a][2];break}return t}var Se=function(){var e=(0,c.Z)((0,n.Z)().mark((function e(t,a){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.target.value,a),e.prev=1,e.next=4,r.Z.post("".concat(m,"/sale/entry/change/status"),{sale_entry_id:a,status:t.target.value,admin_id:d}).then((function(e){console.log(e),v().Notify.success(e.data.message),fe()}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),v().Notify.failure(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,a){return e.apply(this,arguments)}}(),we=function(){var e=(0,c.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v().Loading.circle("Generating Bill",{backgroundColor:"rgb(242, 242, 242,0.5)",svgColor:"#96351E",messageColor:"#96351E",messageFontSize:"1.5rem"});try{r.Z.post("".concat(m,"/sale/entry/bill"),{sale_entry_id:t,admin_id:d}).then((function(e){console.log(e),v().Notify.success(e.data.message),window.open(e.data.data.bill_url,"_blank","noreferrer"),v().Loading.remove()}))}catch(a){v().Notify.failure(a.message),v().Loading.remove()}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Te=function(){var e=(0,c.Z)((0,n.Z)().mark((function e(t,a){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0==a||null==a)v().Notify.failure("Please Add a Phone Number to send the message on WhatsApp");else{v().Loading.circle("Sending Bill on Whats App",{backgroundColor:"rgb(242, 242, 242,0.5)",svgColor:"#96351E",messageColor:"#96351E",messageFontSize:"1.5rem"});try{r.Z.post("".concat(m,"/sale/entry/send/bill/whatsapp"),{sale_entry_id:t,admin_id:d}).then((function(e){console.log(e),v().Notify.success(e.data.message),v().Loading.remove()}))}catch(s){v().Notify.failure(s.message),v().Loading.remove()}}case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return console.log(H,ae),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("button",{className:"button addentrypurchase button-charcoal position-absolute d-".concat(1==t.sale_entry_add?"":"none"),onClick:be,children:[(0,u.jsx)("img",{src:"/images/addiconwhite.png",alt:"displaying_image",className:"img-fluid p-0 m-0",style:{width:"1.5rem"}}),"Entry Sale"]}),(0,u.jsxs)("div",{className:"row p-0 m-0 justify-content-lg-between justify-content-md-evenly justify-content-center text-center mt-2",children:[(0,u.jsx)("div",{className:"col-lg-2 col-md-2 col-3 text-center p-0 m-0 ",children:(0,u.jsxs)("button",{type:"button",className:"btn p-0 m-0 heading text-charcoal fw-bolder  ",style:{width:"fit-content"},children:[" ",pe," ",pe>0?"Sale Entries":"Sale Entry"," "," "]})}),(0,u.jsx)("div",{className:"col-lg-8 col-md-8 col-7  p-0 m-0  border-0",children:(0,u.jsxs)("div",{className:"row p-0 m-0 border-burntumber fw-bolder rounded-1",children:[(0,u.jsx)("div",{className:"col-6 p-0 m-0 text-burntumber text-center fw-bolder bg-pearl  rounded-1 ",children:(0,u.jsx)("input",{type:"date",placeholder:"fromdate",className:"p-0 m-0 border-0 bg-pearl text-burntumber text-center fw-bolder ",value:w||(a||""),onChange:function(e){T(e.target.value)}})}),(0,u.jsx)("div",{className:"col-6 p-0 m-0  text-burntumber text-center fw-bolder bg-pearl rounded-1",children:(0,u.jsx)("input",{type:"date",className:" p-0 m-0 border-0 bg-pearl text-burntumber text-center fw-bolder",value:G||(w||(a||"")),onChange:function(e){Z(e.target.value)}})})]})}),(0,u.jsx)("div",{className:"col-2 p-0 m-0 export col-md-2 col-lg-2 align-self-center text-center ",children:(0,u.jsx)(b,{saleentryarr:O,fromdate:ge(w),todate:ge(G)})})]}),(0,u.jsx)("div",{className:"scroll scroll-y p-0 m-0 mt-2",style:{minHeight:"40vh",height:"58vh",maxHeight:"70vh"},children:(0,u.jsxs)("table",{className:"table text-start table-responsive",children:[(0,u.jsx)("thead",{className:" p-0 m-0 position-sticky top-0 bg-pearl",children:(0,u.jsxs)("tr",{className:" ",children:[(0,u.jsx)("th",{className:"text-charcoal75 fw-bolder p-0 m-0 px-1",children:" Bill ID "}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bolder p-0 m-0 px-1",children:" Patient Name "}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bolder p-0 m-0 px-1",children:" Bill Date "}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bolder p-0 m-0 px-1",children:" Bill Total "}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bolder p-0 m-0 px-1",children:" Appointment Date "}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bolder p-0 m-0 px-1",children:" Doctor Name "}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bolder p-0 m-0 px-1",children:" Invoice No. "}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bolder p-0 m-0 px-1 text-center",children:" Status "}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bolder p-0 m-0 px-1 text-center",children:" Actions "})]})}),q?(0,u.jsx)("tbody",{className:"text-center",style:{minHeight:"55vh",height:"55vh"},children:(0,u.jsx)("tr",{className:"position-absolute border-0 start-0 end-0 px-5",children:(0,u.jsxs)("div",{class:"d-flex align-items-center spinner",children:[(0,u.jsx)("strong",{className:"",style:{fontSize:"1rem"},children:"Getting Details please be Patient ..."}),(0,u.jsx)("div",{className:"spinner-border ms-auto",role:"status","aria-hidden":"true"})]})})}):H&&0!=H.length?(0,u.jsx)("tbody",{children:H.map((function(e,t){return(0,u.jsxs)("tr",{className:" bg-".concat(t%2==0?"seashell":"pearl"," align-middle"),children:[(0,u.jsxs)("td",{className:"text-charcoal fw-bold",children:[" ",e.bill_id&&null!==e.bill_id?"P-"+e.bill_id:""," "]}),(0,u.jsxs)("td",{className:"text-charcoal fw-bold",children:[" ",e.patient&&e.patient&&null!=e.patient.full_name?e.patient.full_name:""," "]}),(0,u.jsxs)("td",{className:"text-charcoal fw-bold",children:[" ",e.bill_date&&e.bill_date?ge(e.bill_date):""," "]}),(0,u.jsxs)("td",{className:"text-charcoal fw-bold",children:[" ",e.grand_total&&e.grand_total?"Rs. "+e.grand_total:""," "]}),(0,u.jsxs)("td",{className:"text-charcoal fw-bold",children:[" ",e.appointment&&null!=e.appointment&&e.appointment.appointment_date&&null!=e.appointment.appointment_date?ge(e.appointment.appointment_date):""," "]}),(0,u.jsxs)("td",{className:"text-charcoal fw-bold",children:[" ",e&&null!=e.doctor_name?e.doctor_name:""," "]}),(0,u.jsxs)("td",{className:"text-charcoal fw-bold",children:[" ",e.appointment&&null!=e.appointment&&e.appointment.bill_id&&null!=e.appointment.bill_id?e.appointment.bill_id:""," "]}),(0,u.jsx)("td",{className:"text-charcoal fw-bold text-center",children:(0,u.jsxs)("select",{disabled:4==e.sale_entry_status,className:" fw-bolder border-0 bg-".concat(t%2==0?"seashell":"pearl"," text-center rounded-pill  bg-").concat(_e(e.sale_entry_status)),name:e.id,onChange:function(t){Se(t,e.id)},style:{appearance:"none"},children:[(0,u.jsxs)("option",{className:"button",selected:!0,disabled:!0,children:[" ",ye(e.sale_entry_status)," "]}),(0,u.jsx)("option",{className:"text-lightred bg-pearl",value:"1",children:" Confirmed "},0),(0,u.jsx)("option",{className:"text-lightblue  bg-pearl",value:"2",children:" Payment Done "},1),(0,u.jsx)("option",{className:"text-lightred  bg-pearl",value:"3",children:" Completed "},2),(0,u.jsx)("option",{className:"text-charcoal  bg-pearl",value:"4",children:" Cancelled "},3)]})}),(0,u.jsx)("td",{className:"text-charcoal text-center bg-transparent fw-bold p-0 m-0 px-1 ",children:(0,u.jsxs)("div",{className:"dropdown  bg-".concat(de==t?"lightyellow":""," d-inline-block text-center text-decoration-none"),children:[(0,u.jsx)("button",{className:"button border-0 p-0 m-0 text-decoration-none dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,u.jsx)("img",{src:"/images/confirmed.png",alt:"displaying_image",style:{width:"1.5rem"}})}),(0,u.jsxs)("ul",{className:"dropdown-menu text-start",children:[(0,u.jsxs)("li",{className:"text-start dropdown-item border-bottom ",onClick:function(){me(t),je()},children:[" ",(0,u.jsx)("img",{src:"/images/rupee.png",alt:"displaying_image",style:{width:"1.5rem"},className:"me-1"})," Payments "]}),(0,u.jsxs)("li",{className:" text-start dropdown-item border-bottom",onClick:function(){W(t),Ne()},children:[" ",(0,u.jsx)("img",{src:"/images/archivebox.png",alt:"displaying_image",className:"ms-1",style:{width:"1.5rem"}})," "," Inventory "]}),(0,u.jsxs)("li",{className:"text-start dropdown-item border-bottom",onClick:function(){we(e.id)},children:[" ",(0,u.jsx)("img",{src:"/images/pdf.png",alt:"displaying_image",style:{width:"2rem"}})," "," Generate Bill "]}),(0,u.jsxs)("li",{className:"text-start dropdown-item",onClick:function(){Te(e.id,e.patient.phone_number)},children:[" ",(0,u.jsx)("img",{src:"/images/whatsapp.png",alt:"displaying_image",style:{width:"2rem"}})," "," Send Bill On WhatsApp"," "," "]})]})]})}),(0,u.jsx)("td",{className:"position-absolute mt-1 d-".concat(t==Y?x:"none"," start-0 end-0 border border-1 bg-seashell p-0 m-0"),style:{zIndex:"2",top:"-7.5rem",height:"90vh"},children:t==Y?(0,u.jsx)(R,{saleentryarr:H[t],itembillid:"P-"+e.bill_id,toggle_seidw:Ne}):(0,u.jsx)(u.Fragment,{})}),(0,u.jsx)("td",{className:"col-lg-8 col-xl-6 col-md-8 col-sm-10 start-0 end-0 top-0 mx-auto shadow rounded-4 position-absolute bg-pearl d-".concat(de==t?le:"none"),style:{marginTop:"10rem"},children:t==de?(0,u.jsx)(D,{GETSalesList:fe,saleentryarr:H[t],toggle_payments:je,itembillid:"P-"+e.bill_id}):(0,u.jsx)(u.Fragment,{})})]},t)}))}):(0,u.jsx)("tbody",{className:"text-center p-0 m-0",style:{minHeight:"55vh",maxHeight:"55vh"},children:(0,u.jsx)("div",{className:"position-absolute border-0 start-0 end-0 mx-3 p-2",children:(0,u.jsx)("strong",{className:"text-charcoal fw-bolder text-center",children:" No Sale Entries "})})})]})}),(0,u.jsx)("div",{className:"container-fluid mt-2 d-flex justify-content-center",children:(0,u.jsx)(_(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:".",pageCount:ae,marginPagesDisplayed:3,pageRangeDisplayed:2,onPageChange:fe,containerClassName:"pagination scroll align-self-center align-items-center",pageClassName:"page-item text-charcoal",pageLinkClassName:"page-link text-decoration-none text-charcoal border-charcoal rounded-1 mx-1",previousClassName:"btn button-charcoal-outline me-2",previousLinkClassName:"text-decoration-none text-charcoal",nextClassName:"btn button-charcoal-outline ms-2",nextLinkClassName:"text-decoration-none text-charcoal",breakClassName:"d-flex mx-2 text-charcoal fw-bold fs-4",breakLinkClassName:"text-decoration-none text-charcoal",activeClassName:"active "})}),(0,u.jsx)("section",{className:"newsaleentryform p-0 m-0 position-absolute d-".concat(K," border border-1 mx-auto start-0 end-0 bg-seashell"),style:{height:"90vh"},children:(0,u.jsx)(A,{toggle_nsef:be,GETSalesList:fe})})]})}function D(e){var t=(0,o.useContext)(i.Jx),a=(0,o.useContext)(i.Pl),d=localStorage.getItem("id"),m=(0,o.useState)(),h=(0,l.Z)(m,2),p=h[0],x=h[1],b=(0,o.useState)([]),N=(0,l.Z)(b,2),j=(N[0],N[1],(0,o.useState)(0)),f=(0,l.Z)(j,2),g=f[0],y=f[1],_=(0,o.useState)(),w=(0,l.Z)(_,2),T=w[0],k=w[1],C={paymentmethod:"",amount:0};function G(){return(G=(0,c.Z)((0,n.Z)().mark((function t(){var a,s,c,l,r;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=[],c=[],(a=[]).push(Object.keys(JSON.parse(e.saleentryarr.payment_method_details))),s.push(Object.values(JSON.parse(e.saleentryarr.payment_method_details))),l=[],{paymentmethod:"",amount:0},a[0]){for(r=0;r<a[0].length;r++)c.push({paymentmethod:a[0][r],amount:s[0][r]});x(c)}p.push(l);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Z(e){p.splice(e,e)}(0,o.useEffect)((function(){!function(){G.apply(this,arguments)}()}),[]);function I(){return(I=(0,c.Z)((0,n.Z)().mark((function a(){var s,c,l,o;return(0,n.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:for(s=[],c=[],l=0;l<p.length;l++)s.push(p[l].amount),c.push(p[l].paymentmethod);return o={sale_entry_id:e.saleentryarr.id,g_total_main:e.saleentryarr.grand_total,payment_method:c,payment_method_main:c,payment_method_details:s,admin_id:d},a.prev=4,k(!0),a.next=8,r.Z.post("".concat(t,"/sale/entry/save/charges"),o).then((function(t){e.GETSalesList(),k(!1),v().Notify.success(t.data.message)}));case 8:a.next=14;break;case 10:a.prev=10,a.t0=a.catch(4),k(!1),v().Notify.failure(a.t0.message);case 14:case"end":return a.stop()}}),a,null,[[4,10]])})))).apply(this,arguments)}var D=function(){var e=(0,c.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0,p&&p.map((function(e){return t+=Number(e.amount)})),console.log(t),y(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function R(){p&&p.length>0?x((function(e){return[].concat((0,s.Z)(e),[C])})):x([C])}function P(){var t=[],a=0,s=0;if(p&&void 0!==p){for(var n=0;n<p.length;n++)t.push(Number(p[n].amount));return console.log(t),t.forEach((function(e){a+=e})),a>e.saleentryarr.grand_total?s=a-e.saleentryarr.grand_total:s}}return(0,o.useEffect)((function(){D()}),[e.saleentryarr]),console.log(e.saleentryarr,p,g),console.log(p),(0,u.jsxs)("div",{className:"p-0 m-0 text-center",children:[(0,u.jsxs)("h6",{className:"text-center mt-2 fw-bold",children:[e.itembillid," Payments"]}),(0,u.jsx)("hr",{className:"p-0 m-0 mt-1"}),(0,u.jsx)("button",{className:"btn-close position-absolute top-0 end-0 p-2 m-2 ",onClick:function(){return e.toggle_payments()}}),(0,u.jsxs)("p",{className:"text-charcoal p-0 m-auto fw-bolder",children:["Grand Total :"," ",(0,u.jsxs)("span",{className:"text-burntumber",children:["Rs ",e.saleentryarr.grand_total]})]}),(0,u.jsx)("hr",{className:"p-0 m-0 mb-1"}),(0,u.jsxs)("div",{className:"container-fluid text-start position-relative",children:[(0,u.jsx)("div",{className:"d-".concat(g==e.saleentryarr.grand_total?"":"none"," bg-lightgreen fw-bold text-center p-2 my-2"),children:"Payment Done"}),(0,u.jsx)("h6",{className:"text-charcoal fw-bolder text-center",children:"Payments"}),(0,u.jsx)("h6",{className:"text-burntumber fw-bolder text-center",children:P()>0?"Amount Exceeded by ".concat(P()):""}),p?p.map((function(t,n){return 1==a.sale_entry_charges_edit||null==e.saleentryarr.payment_method_details?(0,u.jsxs)("div",{className:"row p-0 m-0 justify-content-end g-2",children:[(0,u.jsx)("div",{className:"col-4 ",children:(0,u.jsxs)("select",{className:"form-control border-success py-1 text-center",value:t.paymentmethod,onChange:function(e){t.paymentmethod=e.target.value,x((function(e){return(0,s.Z)(e)}))},children:[(0,u.jsx)("option",{className:"text-charcoal75 fw-bolder",children:" Payment Method "}),(0,u.jsx)("option",{value:"Cash",children:"Cash"}),(0,u.jsx)("option",{value:"Card",children:"Card"}),(0,u.jsx)("option",{value:"Paytm",children:"Paytm"}),(0,u.jsx)("option",{value:"Phonepe",children:"Phone Pe"}),(0,u.jsx)("option",{value:"Wire-Transfer",children:"Wire Transfer"}),(0,u.jsx)("option",{value:"Razorpay",children:"Razorpay"}),(0,u.jsx)("option",{value:"Points",children:"Points"}),(0,u.jsx)("option",{value:"Adjust-Advance",children:"Adjust-Advance"})]})}),(0,u.jsx)("div",{className:"col-4 text-center ",children:(0,u.jsx)("input",{className:"form-control border-success py-1 text-center",value:t.amount,onChange:function(e){t.amount=e.target.value,x((function(e){return(0,s.Z)(e)}))}})}),(0,u.jsx)("div",{className:"col-2 text-center",children:(0,u.jsx)("button",{className:"btn btn-sm p-0 m-0",onClick:function(){Z(n),x((function(e){return(0,s.Z)(e)}))},children:(0,u.jsx)("img",{src:"/images/delete.png",className:"img-fluid",style:{width:"1.5rem"}})})})]}):(0,u.jsxs)("div",{className:"row p-0 m-0 justify-content-center g-2",children:[(0,u.jsx)("div",{className:"col-4 text-center ",children:(0,u.jsx)("input",{className:"form-control py-1",disabled:!0,value:t.paymentmethod})}),(0,u.jsx)("div",{className:"col-4 text-center ",children:(0,u.jsx)("input",{className:"form-control py-1 text-center",disabled:!0,value:t.amount,onChange:function(e){t.amount=e.target.value,x((function(e){return(0,s.Z)(e)}))}})})]})})):(0,u.jsx)(u.Fragment,{}),(0,u.jsx)("div",{className:"container-fluid text-center mt-2 ",children:1==a.sale_entry_charges_edit||null==e.saleentryarr.payment_method_details?(0,u.jsx)("button",{className:"btn py-0",onClick:R,children:(0,u.jsx)("img",{src:"/images/add.png",className:"img-fluid",style:{width:"2rem"}})}):(0,u.jsx)(u.Fragment,{})})]}),(0,u.jsx)("div",{className:"mt-2",children:T?(0,u.jsx)("div",{className:"container-fliud pt-2",children:(0,u.jsxs)("div",{className:"d-flex fs-6 align-items-center justify-content-around",children:[(0,u.jsx)("h6",{className:"text-burntumber",children:"Updating..."}),(0,u.jsx)("div",{className:"text-burntumber spinner-border ml-auto",role:"status","aria-hidden":"true"})]})}):(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("button",{className:"button button-burntumber m-0 p-0 py-1 px-5",disabled:g==e.saleentryarr.grand_total,onClick:function(t){(0,S.H)(),v().Confirm.show("Add Charges and Payments","Do you surely want to add the following Charges and Payments of  ".concat(e.itembillid),"Yes","No",(function(){!function(){I.apply(this,arguments)}()}),(function(){return 0}),{})},children:" Save "})}),(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("button",{className:"button button-pearl border-charcoal p-0 m-0 py-1 px-5",onClick:function(){x(),e.toggle_payments()},children:" Cancel "})})]})})]})}function R(e){var t=(0,o.useState)("block"),a=(0,l.Z)(t,2),s=a[0],n=a[1],c=(0,o.useState)("none"),r=(0,l.Z)(c,2),i=r[0],d=r[1],m=(0,o.useState)(0),h=(0,l.Z)(m,2),p=h[0],x=h[1];0==p&&"none"==s&&(n("block"),d("none")),1==p&&"none"==i&&(d("block"),n("none"));var b=(0,o.useState)(!1),N=(0,l.Z)(b,2),j=N[0],f=N[1];function g(e,t,a){if(e&&t&&null!==a)return Number(e)+Number(t)+Number(a)}function v(e,t,a,s){if(e&&t&&null!==a)return Number(Number(e)+Number(t)+Number(a))*Number(s)}return console.log(e.saleentryarr),(0,u.jsxs)("div",{className:"container-fluid p-0 m-0 bg-seashell ",children:[(0,u.jsxs)("h5",{className:"text-center text-charcoal pt-3",children:[e.itembillid," Sale Entry Item Details"]}),(0,u.jsx)("button",{type:"button",className:"btn-close closebtn position-absolute end-0 me-4",onClick:e.toggle_seidw,"aria-label":"Close"}),(0,u.jsx)("div",{className:"col-2 d-none",children:(0,u.jsxs)("div",{className:" position-relative searchbutton",style:{top:"0.25rem",right:"1rem"},children:[(0,u.jsx)("input",{type:"text",className:" form-control d-inline PEsearch bg-seashell",placeholder:"Search PE"}),(0,u.jsx)("button",{className:"btn p-0 m-0 bg-transparent border-0 position-absolute",style:{width:"2rem",right:"0",left:"0",top:"0.25rem"},children:(0,u.jsx)("img",{src:"/images/search.png",alt:"displaying_image",className:"img-fluid p-0 m-0"})})]})}),(0,u.jsx)("div",{className:"d-flex p-0 m-0 mt-3 mb-1 justify-content-center",children:["Medicine","Vaccine"].map((function(e,t){return(0,u.jsx)("button",{className:"button shadow-0 rounded-0 border-charcoal button-".concat(t==p?"charcoal":"seashell"),onClick:function(){x(t)},children:e})}))}),(0,u.jsxs)("div",{className:"row p-0 m-0 justify-content-between",children:[(0,u.jsxs)("div",{className:"col-auto ms-2 mb-2 text-burntumber rounded-1 fw-bolder bg-pearl",children:[(0,u.jsx)("p",{className:"text-charcoal p-0 m-0 ms-1 text-start",children:"Grand Total"}),(0,u.jsx)("hr",{className:"p-0 m-0"}),(0,u.jsx)("h5",{className:"text-charcoal p-0 m-0 fw-bold text-start ms-1",children:e.saleentryarr.grand_total?e.saleentryarr.grand_total:0})]}),(0,u.jsxs)("div",{className:"col-auto align-self-end justify-content-end me-4",children:[(0,u.jsx)("input",{type:"checkbox",className:"form-check-input",value:j||"",onChange:function(){f(1!=j)}}),(0,u.jsx)("label",{children:"Show Tax Details"})]})]}),(0,u.jsx)("div",{className:"scroll bg-seashell scroll-y d-".concat(s),style:{minHeight:"65vh",Height:"65vh",maxHeight:"70vh"},children:(0,u.jsxs)("table",{className:"table datatable text-center bg-seashell",children:[(0,u.jsxs)("thead",{children:[(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Stock ID"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Medicine"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"MRP"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Qty"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Disc. %"}),(0,u.jsx)("th",{colspan:1==j?"8":"2",scope:"col-group",className:"border p-0 m-0 px-1",children:"Total Tax"}),(0,u.jsxs)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:[" ","Amt"]}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Grand Total"})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"CGST%"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"Total CGST"}),(0,u.jsxs)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:["SGST%"," "]}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"Total SGST"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"IGST%"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"Total IGST"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1",children:"Total%"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1",children:"Total Tax"})]})]}),e.saleentryarr.sale_medicines&&0!==e.saleentryarr.sale_medicines.length?(0,u.jsx)("tbody",{className:"border align-items-center p-0 m-0",children:e.saleentryarr.sale_medicines.map((function(e,t){return(0,u.jsxs)("tr",{className:"border p-0 m-0 align-middle",children:[(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.medicine_stocks&&null!==e.medicine_stocks.id?"m"+e.medicine_stocks.id:""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.medicine&&null!==e.medicine.name?e.medicine.name:""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.main_mrp?e.main_mrp:""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.qty&&null!=e.qty?e.qty:""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:null!=e.discount?e.discount:""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.SGST_rate?Number(e.SGST_rate):""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.SGST?Number(e.SGST)*Number(e.qty):""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.CGST_rate?Number(e.CGST_rate):""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.CGST?Number(e.CGST)*Number(e.qty):""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.IGST_rate?Number(e.IGST_rate):""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.IGST?Number(e.IGST)*Number(e.qty):""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:g(e.CGST_rate,e.SGST_rate,e.IGST_rate)}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:v(e.CGST,e.SGST,e.IGST,e.qty)}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.disc_mrp?e.disc_mrp:""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e&&e.total_amount?e.total_amount:""})]},t)}))}):(0,u.jsx)("body",{className:"text-center p-0 m-0 border border-1 ",children:(0,u.jsx)("div",{className:"position-absolute border-0 start-0 end-0 mx-3 p-2",children:(0,u.jsx)("p",{className:" text-center text-charcoal fw-bold",children:"No Medicines Found"})})})]})}),(0,u.jsx)("div",{className:"scroll bg-seashell scroll-y d-".concat(i),style:{minHeight:"65vh",Height:"65vh",maxHeight:"65vh"},children:(0,u.jsxs)("table",{className:"table datatable table-responsive text-center bg-seashell",children:[(0,u.jsxs)("thead",{children:[(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Stock ID"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Vaccine"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"MRP"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Qty"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Disc. %"}),(0,u.jsx)("th",{colspan:1==j?"8":"2",scope:"col-group",className:"border p-0 m-0 px-1",children:"Total Tax"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Amt"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Grand Total"})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"CGST%"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"Total CGST"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"SGST%"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"Total SGST"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"IGST%"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"Total IGST"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1",children:"Total%"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1",children:"Total Tax"})]})]}),void 0!==e.saleentryarr.sale_vaccines&&0!==e.saleentryarr.sale_vaccines.length?(0,u.jsx)("tbody",{className:"border align-items-center p-0 m-0",children:e.saleentryarr.sale_vaccines.map((function(e,t){return(0,u.jsxs)("tr",{className:"border p-0 m-0 align-middle",children:[(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.vaccine_stocks&&null!==e.vaccine_stocks.id?"v"+e.vaccine_stocks.id:""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.vaccine&&null!==e.vaccine.name?e.vaccine.name:""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.main_mrp?e.main_mrp:""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.qty&&null!=e.qty?e.qty:""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:null!=e.discount?e.discount:""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.SGST_rate?Number(e.SGST_rate):""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.SGST?Number(e.SGST)*Number(e.qty):""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.CGST_rate?Number(e.CGST_rate):""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.CGST?Number(e.CGST)*Number(e.qty):""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.IGST_rate?Number(e.IGST_rate):""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.IGST?Number(e.IGST)*Number(e.qty):""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:g(e.CGST_rate,e.SGST_rate,e.IGST_rate)}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:v(e.CGST,e.SGST,e.IGST,e.qty)}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.disc_mrp?e.disc_mrp:""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.total_amount?e.total_amount:""})]},t)}))}):(0,u.jsx)("body",{className:"text-center p-0 m-0 border border-1 ",children:(0,u.jsx)("div",{className:"position-absolute border-0 start-0 end-0 mx-3 p-2 ",children:(0,u.jsx)("p",{className:" text-center fw-bold text-charcoal",children:"No Vaccines Found"})})})]})})]})}function P(){var e=(0,o.useContext)(i.U8),t=localStorage.getItem("ClinicId"),a=(0,o.useContext)(i.Jx),s=(0,o.useState)("none"),n=(0,l.Z)(s,2),c=n[0],d=n[1],m=(0,o.useState)(),h=(0,l.Z)(m,2),p=h[0],x=h[1],b=(0,o.useState)(),j=(0,l.Z)(b,2),f=j[0],g=j[1],y=(0,o.useState)(!1),S=(0,l.Z)(y,2),w=S[0],T=S[1],k=(0,o.useState)([]),C=(0,l.Z)(k,2),G=C[0],Z=C[1],I=(0,o.useState)([]),D=(0,l.Z)(I,2),R=D[0],P=D[1],A=(0,o.useState)(),M=(0,l.Z)(A,2),L=M[0],H=M[1],F=(0,o.useState)("none"),B=(0,l.Z)(F,2),Q=B[0],O=B[1],z=(0,o.useState)(),V=(0,l.Z)(z,2),U=V[0],Y=V[1],W=(0,o.useState)(),J=(0,l.Z)(W,2),X=J[0],K=J[1];function $(s){if(void 0==s||void 0==s.selected)try{r.Z.get("".concat(a,"/sale/return?clinic_id=").concat(t,"&limit=25&offset=0&from_date=").concat(p||e,"&to_date=").concat(f||(p||e))).then((function(e){console.log(e),Z(e.data.data.sale_return),T(!1)})).catch((function(e){v().Notify.warning(e),T(!1)}))}catch(n){v().Notify.warning(n.data.message),T(!1)}else try{r.Z.get("".concat(a,"/sale/return?clinic_id=").concat(t,"&limit=25&offset=").concat(25*s.selected,"&from_date=").concat(p||e,"&to_date=").concat(f||(p||e))).then((function(e){console.log(e),Z(e.data.data.sale_return),T(!1)})).catch((function(e){v().Notify.warning(e),T(!1)}))}catch(n){v().Notify.warning(n.data.message),T(!1)}}console.log(G,X),(0,o.useEffect)((function(){!function(){try{r.Z.get("".concat(a,"/sale/return?clinic_id=").concat(t,"&from_date=").concat(p||e,"&to_date=").concat(f||p||e)).then((function(e){K(e.data.data.total_count),Y(Math.round(e.data.data.total_count/25)+1),T(!1)})).catch((function(e){v().Notify.warning(e),T(!1)}))}catch(s){v().Notify.warning(s.message),T(!1)}}()}),[p,f]),(0,o.useEffect)((function(){$(),function(){T(!0);try{r.Z.get("".concat(a,"/sale/return?clinic_id=").concat(t,"&limit=").concat(X,"&offset=0&from_date=").concat(p||e,"&to_date=").concat(f||p||e)).then((function(e){console.log(e),K(e.data.data.total_count),P(e.data.data.sale_return),T(!1)})).catch((function(e){v().Notify.warning(e),T(!1)}))}catch(s){v().Notify.warning(s.data.message),T(!1)}}()}),[X]);var ee=function(){"none"===c&&d("block"),"block"===c&&d("none")},te=function(){"none"===Q&&O("block"),"block"===Q&&O("none")},ae=function(e){if(e)return e=e.split("-").reverse().join("-")};return console.log(G),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("button",{className:"button addentrypurchase button-charcoal position-absolute",onClick:te,children:[(0,u.jsx)("img",{src:"/images/addiconwhite.png",alt:"displaying_image",className:"img-fluid p-0 m-0",style:{width:"1.5rem"}}),"Entry Return"]}),(0,u.jsxs)("div",{classsName:"p-0 m-0",children:[(0,u.jsxs)("div",{className:"row p-0 m-0 justify-content-lg-between justify-content-md-evenly justify-content-center text-center mt-2",children:[(0,u.jsx)("div",{className:"col-lg-2 col-md-2 col-3 text-center p-0 m-0 ",children:(0,u.jsxs)("button",{type:"button",className:"btn p-0 m-0 heading text-charcoal fw-bolder  ",style:{width:"fit-content"},children:[X," ",X>0?"Sale Returns":"Sale Return"," "]})}),(0,u.jsx)("div",{className:"col-lg-8 col-md-8 col-7  p-0 m-0  border-0 ",children:(0,u.jsxs)("div",{className:"row p-0 m-0 border-burntumber fw-bolder rounded-1 text-center justify-content-center ",children:[(0,u.jsx)("div",{className:"col-6 p-0 m-0 text-burntumber text-center fw-bolder bg-pearl  rounded-1 ",children:(0,u.jsx)("input",{type:"date",placeholder:"fromdate",className:"p-0 m-0 border-0 bg-pearl text-burntumber text-center fw-bolder ",value:p||(e||""),onChange:function(e){x(e.target.value)}})}),(0,u.jsx)("div",{className:"col-6 p-0 m-0 text-burntumber bg-pearl fw-bolder rounded-1",children:(0,u.jsx)("input",{type:"date",className:"p-0 m-0 border-0 text-burntumber fw-bolder bg-pearl",placeholder:"todate",value:f||(p||(e||"")),onChange:function(e){g(e.target.value)}})})]})}),(0,u.jsx)("div",{className:"col-md-2 col-lg-2 col-2 p-0 m-0 export align-self-center text-center ",children:(0,u.jsx)(N,{salereturnarr:R,fromdate:ae(p),todate:ae(f)})})]}),(0,u.jsx)("div",{className:"scroll scroll-y overflow-scroll p-0 m-0",style:{minHeight:"40vh",height:"59vh",maxHeight:"70vh"},children:(0,u.jsxs)("table",{className:"table text-center p-0 m-0",children:[(0,u.jsx)("thead",{className:"p-0 m-0 align-middle",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"fw-bolder text-charcoal75",scope:"col",children:"Return No."}),(0,u.jsx)("th",{className:"fw-bolder text-charcoal75",scope:"col",children:"Name"}),(0,u.jsx)("th",{className:"fw-bolder text-charcoal75",scope:"col",children:"Sale Entry ID"}),(0,u.jsx)("th",{className:"fw-bolder text-charcoal75",scope:"col",children:"Return Date"}),(0,u.jsx)("th",{className:"fw-bolder text-charcoal75",scope:"col",children:"Return Amount"}),(0,u.jsx)("th",{className:"fw-bolder text-charcoal75",scope:"col",children:"Actions"}),(0,u.jsx)("th",{className:"fw-bolder text-charcoal75",scope:"col",children:"more"})]})}),w?(0,u.jsx)("body",{className:" text-center",style:{minHeight:"55vh"},children:(0,u.jsx)("tr",{className:"position-absolute border-0 start-0 end-0 px-5",children:(0,u.jsxs)("div",{class:"d-flex align-items-center",children:[(0,u.jsx)("strong",{className:"fs-5",children:"Getting Details please be Patient ..."}),(0,u.jsx)("div",{class:"spinner-border ms-auto",role:"status","aria-hidden":"true"})]})})}):G&&0!=G.length?(0,u.jsx)("tbody",{children:G.map((function(e,t){return(0,u.jsxs)("tr",{className:"bg-".concat(t%2==0?"seashell":"pearl"," align-middle"),children:[(0,u.jsxs)("td",{className:"p-0 m-0 text-charcoal fw-bold",children:["SR-",e.return_no]}),(0,u.jsx)("td",{className:"p-0 m-0 text-charcoal fw-bold",children:e.sale_entry&&e.sale_entry.patient&&null!=e.sale_entry.patient.full_name?e.sale_entry.patient.full_name:"N/A"}),(0,u.jsx)("td",{className:"p-0 m-0 text-charcoal fw-bold",children:e.sale_entry&&e.sale_entry&&null!=e.sale_entry.id?"P-"+e.sale_entry.id:"N/A"}),(0,u.jsx)("td",{className:"p-0 m-0 text-charcoal fw-bold",children:e.return_date?ae(e.return_date):""}),(0,u.jsx)("td",{className:"p-0 m-0 text-charcoal fw-bold",children:e.grand_total?e.grand_total:"N/A"}),(0,u.jsx)("td",{className:"p-0 m-0 text-charcoal fw-bold",children:(0,u.jsx)("button",{className:"btn",onClick:function(){H(t),ee()},children:(0,u.jsx)("img",{src:"/images/archivebox.png",alt:"displaying_image",className:"ms-1",style:{width:"1.5rem"}})})}),(0,u.jsx)("td",{className:"p-0 m-0 text-charcoal fw-bold",children:(0,u.jsx)("button",{className:"btn position-relative cursor-pointer more p-0 m-0",children:(0,u.jsx)("img",{src:"/images/more.png",alt:"displaying_image",style:{width:"1.5rem"}})})}),(0,u.jsx)("td",{className:" position-absolute d-".concat(t==L?c:"none"," bg-seashell border border-1 start-0 end-0 p-0 m-0"),style:{top:"-7.5rem",zIndex:"2"},children:t==L?(0,u.jsx)(E,{salereturnarr:G[t],toggle_sridw:ee}):(0,u.jsx)(u.Fragment,{})})]},t)}))}):(0,u.jsx)("tbody",{className:"text-center position-relative p-0 m-0 ",style:{minHeight:"55vh"},children:(0,u.jsx)("tr",{className:"",children:(0,u.jsx)("td",{className:"fw-bolder text-charcoal text-center position-absolute border-0 start-0 end-0 mx-3 p-2 border-0",children:"No Sale Returns"})})})]})}),(0,u.jsx)("div",{className:"container-fluid d-flex justify-content-center",children:(0,u.jsx)(_(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:". . .",pageCount:U,marginPagesDisplayed:3,pageRangeDisplayed:2,onPageChange:$,containerClassName:"pagination",pageClassName:"page-item text-charcoal",pageLinkClassName:"page-link text-decoration-none text-charcoal border-charcoal rounded-1 mx-1",previousClassName:"btn button-charcoal-outline me-2",previousLinkClassName:"text-decoration-none text-charcoal",nextClassName:"btn button-charcoal-outline ms-2",nextLinkClassName:"text-decoration-none text-charcoal",breakClassName:"mx-2 text-charcoal fw-bold fs-4",breakLinkClassName:"text-decoration-none text-charcoal",activeClassName:"active"})})]}),(0,u.jsx)("section",{className:"newsalereturnform position-absolute start-0 end-0 border border-1 bg-seashell d-".concat(Q),children:(0,u.jsx)(q,{toggle_nref:te,GETSaleReturns:$})})]})}function A(e){(0,o.useRef)(null);var t=(0,o.useContext)(i.q2),a=(0,o.useContext)(i.Jx),d=(0,o.useContext)(i.j8),m=localStorage.getItem("ClinicId"),h=(0,o.useRef)(null),p=(0,o.useRef)(null),x=(0,o.useRef)(null),b=(0,o.useRef)(null),N=(0,o.useState)(e.patientname?e.patientname:""),j=(0,l.Z)(N,2),f=j[0],g=j[1],y=(0,o.useState)([]),_=(0,l.Z)(y,2),w=_[0],T=_[1],k=(0,o.useState)("none"),C=(0,l.Z)(k,2),G=C[0],Z=C[1],I=(0,o.useState)(e.patientid?e.patientid:""),D=(0,l.Z)(I,2),R=D[0],P=D[1],A=(0,o.useState)([]),q=(0,l.Z)(A,2),E=q[0],M=q[1],L=(0,o.useState)(e.DoctorID?e.DoctorID:""),H=(0,l.Z)(L,2),F=H[0],B=H[1],Q=(0,o.useState)(e.DoctorName?e.DoctorName:""),O=(0,l.Z)(Q,2),z=O[0],V=O[1],U=(0,o.useState)(),Y=(0,l.Z)(U,2),W=Y[0],J=Y[1],X=(0,o.useState)(m),K=(0,l.Z)(X,2),$=K[0],ee=(K[1],(0,o.useState)()),te=(0,l.Z)(ee,2),ae=(te[0],te[1],(0,o.useState)(0)),se=(0,l.Z)(ae,2),ne=se[0],ce=se[1],le=(0,o.useState)(0),re=(0,l.Z)(le,2),oe=re[0],ie=re[1],de=(0,o.useState)(),me=(0,l.Z)(de,2),ue=me[0],he=me[1],pe=(0,o.useState)(!1),xe=(0,l.Z)(pe,2),be=xe[0],Ne=xe[1],je=(0,o.useState)([]),fe=(0,l.Z)(je,2),ge=fe[0],ve=fe[1],ye=(0,o.useState)([]),_e=(0,l.Z)(ye,2),Se=_e[0],we=_e[1],Te=(0,o.useState)([]),ke=(0,l.Z)(Te,2),Ce=ke[0],Ge=ke[1],Ze=(0,o.useState)(),Ie=(0,l.Z)(Ze,2),De=Ie[0],Re=Ie[1],Pe=(0,o.useState)(),Ae=(0,l.Z)(Pe,2),qe=Ae[0],Ee=Ae[1],Me=(0,o.useState)(),Le=(0,l.Z)(Me,2),He=Le[0],Fe=Le[1],Be=(0,o.useState)([]),Qe=(0,l.Z)(Be,2),Oe=Qe[0],ze=Qe[1],Ve=(0,o.useState)(),Ue=(0,l.Z)(Ve,2),Ye=Ue[0],We=Ue[1],Je=(0,o.useState)(),Xe=(0,l.Z)(Je,2),Ke=Xe[0],$e=Xe[1],et=(0,o.useState)(),tt=(0,l.Z)(et,2),at=tt[0],st=tt[1],nt=(0,o.useState)("none"),ct=(0,l.Z)(nt,2),lt=ct[0],rt=ct[1],ot=function(e){if(e)return e=e.split("-").reverse().join("-")},it=function(e){e?(st(e.id),ce(1)):(st(),ce(0))},dt=function(){var e=(0,c.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $e(!0),e.prev=1,e.next=4,r.Z.get("".concat(a,"/stock/list?search=").concat(t)).then((function(e){var a=[],s=[],n=[];a.push(e.data.data.medicines?e.data.data.medicines:[]),s.push(e.data.data.vaccines?e.data.data.vaccines:[]),n=(n=a.concat(s)).flat(),console.log(n),we(n),$e(!1),t.length>1?h.current.style.display="block":h.current.style.display="none"}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),v().Notify.warning(e.t0.data.message);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),mt=function(){var e=(0,c.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0)){e.next=11;break}return Re(!0),e.prev=2,e.next=5,r.Z.get("".concat(a,"/sale/item/search/by/id?item=").concat(t)).then((function(e){Re(!1),Ge([e.data.data])}));case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),Re(!1),v().Notify.failure(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}();function ut(e,t,a){var s=t;return Number(a)>Number(s)&&v().Notify.failure("Selling Cost should not less than Cost"),console.log(typeof a,typeof s),e?1==e?t=Number(t):s=(s=Number(t)*Number(e)).toFixed(2):0}function ht(e){var t="";t=e.vaccine_brand_id?"v":"m";var a={productid:e.id,type:e.type?e.type:t,product:e.item_name?e.item_name:qe,batch:e.batch_no,expiry:e.expiry_date,quantity:e.current_stock,qtytoSale:1,discount:0,cost:e.cost,mainmrp:e.mrp,disccost:e.mrp,gst:Number(e.CGST_rate)+Number(e.SGST_rate)+Number(e.IGST_rate),totalamt:e.mrp};Oe&&0==Oe.length?ze([a]):ze((function(e){return[].concat((0,s.Z)(e),[a])}))}function pt(){return(pt=(0,c.Z)((0,n.Z)().mark((function e(t){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=[]).push(Oe.filter((function(e){return e.batch!==t}))),a=a.flat(),ze(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xt(){return bt.apply(this,arguments)}function bt(){return(bt=(0,c.Z)((0,n.Z)().mark((function t(){var s,c,l,o,i,d,m,u,h;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=[],c=[],l=[],o=[],i=[],d=[],m=[],void 0===z&&void 0===W){t.next=22;break}for(u=0;u<Oe.length;u++)s.push(Oe[u].type+Oe[u].productid),c.push(Oe[u].qtytoSale),l.push(Oe[u].discount),o.push(Oe[u].disccost),i.push(Oe[u].mainmrp),d.push(Oe[u].gst),m.push(Oe[u].totalamt);return h={clinic_id:$,doctor_id:F,doctor_name:F?z:W,patient_id:R,pro_id:s,qty:c,discount:l,disc_mrp:o,main_mrp:i,gst:d,total_amount:m,grand_total:Ye,appointment_id:"",add_to_cart:oe,deliver:ne,address_id:at},he(!0),t.prev=11,t.next=14,r.Z.post("".concat(a,"/sale/entry/save"),h).then((function(t){he(!1),void 0==e.saleindex&&(e.GETSalesList(),e.toggle_nsef()),1==t.data.status?v().Notify.success(t.data.message):v().Notify.warning(t.data.message),Nt()})).catch((function(e){console.log(e),v().Notify.failure(e.message),he(!1)}));case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(11),v().Notify.failure(t.t0.message),he(!1);case 20:t.next=23;break;case 22:v().Notify.failure("Please Choose A Doctor to further proceed the sale entry");case 23:case"end":return t.stop()}}),t,null,[[11,16]])})))).apply(this,arguments)}(0,o.useEffect)((function(){d.map((function(e){return e[0]==F?V(e[1]):""}))}),[F]),(0,o.useEffect)((function(){!function(){var e=0;Oe.map((function(t){return e+=Number(t.totalamt)})),We(e)}()}),[Oe]),(0,o.useEffect)((function(){1==oe&&xt()}),[oe]);var Nt=function(){var e=(0,c.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ze([]),st(),Ee(),V(),B(),P(),We(),ie(),ce(0),g(),M();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();console.log(R,F,z,ne,qe,He);return(0,u.jsxs)("div",{className:"container-fluid p-0 m-0",children:[(0,u.jsxs)("div",{className:"position-relative mb-3",children:[(0,u.jsx)("h5",{className:"text-center text-charcoal pt-2 ",children:"New Sale Entry"}),(0,u.jsx)("button",{className:"btn btn-close position-absolute end-0 top-0 me-2",disabled:!!ue,onClick:e.toggle_nsef})]}),(0,u.jsx)("hr",{className:"p-0 m-0"}),(0,u.jsx)("div",{className:"p-0 m-0 text-center bg-seashell",children:t.map((function(e,t){return(0,u.jsxs)("label",{className:" text-burntumber fw-bolder d-".concat(m==e.id?"block":"none"),children:[(0,u.jsx)("input",{type:"checkbox",className:"radio form me-1  text-burntumber fw-bolder",checked:m==e.id,name:e.id},t),e.title," ",e.address]})}))}),(0,u.jsx)("hr",{className:"p-0 m-0"}),(0,u.jsx)("div",{className:"my-2 text-center align-self-center",children:(0,u.jsxs)("div",{className:" form-switch justify-content-center position-relative",children:[(0,u.jsx)("label",{className:"form-check-label text-charcoal fw-bolder",for:"flexSwitchCheckDefault",children:" Deliver to Customer "}),(0,u.jsx)("input",{className:"form-check-input ms-2 outline-none text-center",type:"checkbox",role:"switch",id:"flexSwitchCheckDefault",checked:1==ne,onChange:function(){0==ne&&rt("block"),1==ne&&(at?(ce(0),rt("none")):rt("block"))}}),(0,u.jsx)("div",{className:"d-".concat(lt," position-absolute start-0 end-0 m-5 mt-0 top-0 bg-pearl shadow rounded-1 "),style:{zIndex:2},ref:x,children:(0,u.jsxs)("div",{className:"p-0 m-0 position-relative text-wrap",children:[(0,u.jsx)("button",{className:"btn btn-close position-absolute end-0 p-1 m-1",onClick:function(){rt("none")}}),E&&E.address&&0!==E.address.length?(0,u.jsxs)("div",{className:"row p-0 m-0 gx-2  ",children:[(0,u.jsx)("h6",{className:"ms-1 text-burntumber fw-bold text-start",children:" Choose Address for Delivery "}),E.address.map((function(e){return(0,u.jsxs)("div",{className:"col-12 px-1 m-2 text-start card bg-".concat(at==e.id?"lightgreen":"lightyellow"," text-charcoal fw-bold"),onClick:function(){at?it():it(e)},children:[(0,u.jsxs)("div",{children:["Patient Name:- ",e.full_name]}),(0,u.jsxs)("div",{children:[" Address:- ",e.address_line1&&null!==e.address_line1?e.address_line1:""," "]}),(0,u.jsxs)("div",{children:[" ",e.address_line2&&null!==e.address_line2?e.address_line2:""," "]}),(0,u.jsxs)("div",{children:[" PinCode:- ",e.zip_code&&null!==e.zip_code?e.zip_code:""," "]})]})}))]}):(0,u.jsxs)("div",{className:"text-danger fw-bold p-2",children:["Addresses not found.Update Patient Details to get Address"," "]})]})})]})}),(0,u.jsxs)("div",{className:"row p-0 m-0",children:[(0,u.jsxs)("div",{className:"col-4",children:[(0,u.jsx)("label",{className:"m-0",children:"Search Using Phone or Name"}),(0,u.jsx)("input",{type:"text",className:"form-control bg-seashell selectpatient col-10 position-relative",placeholder:"Search for Patients",value:f||"",onFocus:function(){return Ne(!0)},onChange:function(e){Ne(!0),g(e.target.value),r.Z.get("".concat(a,"/patient/list?search=").concat(f,"&limit=5&offset=0")).then((function(e){T(e.data.data.patients_list),Ne(!1)})),f&&f.length>1?Z("block"):Z("none")}}),(0,u.jsx)("div",{className:"col-auto d-".concat(G," text-decoration-none searchinput position-absolute rounded-1 shadow bg-pearl px-2"),style:{width:"max-content",zIndex:"2"},children:1==be||void 0==f?(0,u.jsxs)("p",{className:"btn text-charcoal75 fs-6 p-0 m-0 ps-1",children:[" Loading..."," "," "]}):0==w.length?(0,u.jsx)("p",{className:"text-danger btn fs-6 p-0 m-0",children:"Patient not found"}):w.map((function(e){return(0,u.jsxs)("div",{className:"col-auto p-0 m-0 ms-1 bg-pearl text-decoration-none list-style-none text-charcoal text-start px-1 border-bottom",style:{width:"max-content"},onClick:function(){!function(e,t,a){g(t),P(e),M(a),Z("none")}(e.id,e.full_name,e)},children:[e.full_name," ",e.phone_number]})}))})]}),(0,u.jsxs)("div",{className:"col-4",children:[(0,u.jsx)("label",{children:"Select Doctor"}),(0,u.jsx)("div",{className:"col-12",children:(0,u.jsxs)("select",{className:"col-10 form-control selectdoctor bg-seashell",placeholder:"Select Doctor",value:F||"",onChange:function(e){B(e.target.value)},children:[(0,u.jsx)("option",{className:"text-charcoal50",children:"Select Doctor"}),d.map((function(e,t){return(0,u.jsxs)("option",{className:"text-charcoal",value:e[0],children:[" ","Dr."," ",e[1]," "]},t)}))]})})]}),(0,u.jsxs)("div",{className:"col-4",children:[(0,u.jsx)("label",{children:"Other Doctor"}),(0,u.jsx)("div",{className:"col-12",children:(0,u.jsx)("input",{className:"col-10 form-control bg-seashell",placeholder:"Other Doctors",value:W||"",onChange:function(e){J(e.target.value)}})})]})]}),(0,u.jsxs)("div",{className:"container-fluid mt-4 text-center p-0 m-0",children:[(0,u.jsxs)("div",{className:"col-12 p-0 m-0 justify-content-center",children:[(0,u.jsx)("h6",{className:"text-charcoal p-0 m-0 fw-bolder text-start ms-1",children:"Add Products"}),(0,u.jsx)("hr",{className:"p-0 m-0"}),(0,u.jsxs)("div",{className:"row p-0 m-0 my-2 justify-content-center",children:[(0,u.jsxs)("div",{className:"col-4",children:[(0,u.jsx)("input",{className:"form-control bg-seashell",placeholder:"Search Product by Name",value:qe||"",onChange:function(e){dt(e.target.value),Ee(e.target.value),Fe(),ve(),b.current.style.display="none"}}),(0,u.jsx)("div",{ref:h,className:"position-absolute rounded-1 mt-1",style:{Width:"max-content",zIndex:"1"},children:Se?Ke?(0,u.jsxs)("div",{className:"rounded-1 p-1 bg-pearl",children:["Searching Please wait....",(0,u.jsx)("div",{className:"spinner-border my-auto",style:{width:"1rem",height:"1rem"},role:"status",children:(0,u.jsx)("span",{className:"sr-only",children:" "})})]}):0==Ke&&0==Se.length?(0,u.jsx)("div",{className:"bg-burntumber text-light rounded-1 p-1",children:" Oops! Not Avaliable "}):(0,u.jsxs)("div",{className:"rounded-4 scroll border border-1 bg-pearl p-1 d-".concat(Se&&Se.length>0?"block":"none"),style:{height:"30vh"},children:[(0,u.jsxs)("p",{className:"text-start p-2 position-sticky top-0 bg-pearl fw-bold text-charcoal75 ms-2",style:{fontSize:"0.8rem"},children:[" ",Se.length," Search Results "]}),Se.map((function(e,t){return(0,u.jsxs)("div",{style:{cursor:"pointer",Width:"10rem"},className:"bg-".concat(t%2==0?"pearl":"seashell"," text-start fw-bold p-2 border-bottom text-charcoal "),onClick:function(t){ve(e),Ee(e.display_name?e.display_name:e.name),Fe(e.id),b.current.style.display="block"},children:[" ",e.display_name?e.display_name:e.name," ",(0,u.jsxs)("span",{className:"text-burntumber fw-bold rounded-2 px-1",children:[e&&void 0!==e.stock_info?e.stock_info.length:""," stocks"]})," "]})}))]}):(0,u.jsx)("div",{className:"bg-seashell"})}),(0,u.jsxs)("div",{ref:b,className:"position-absolute start-50 mt-1 bg-pearl scroll scroll-y align-self-center rounded-2 border border-1 p-2 d-".concat(ge&&ge.stock_info&&void 0!==ge.stock_info?"block":"none"),style:{zIndex:"2",width:"10rem","min-height":"30vh"},children:[(0,u.jsxs)("p",{className:"text-start fw-bold text-charcoal75",style:{fontSize:"0.8rem"},children:[" ",ge&&void 0!==ge.stock_info?ge.stock_info.length:""," "," Batch Stocks "]}),ge&&0!=ge.length?0==ge.stock_info.length?(0,u.jsx)("div",{className:"bg-burntumber text-white fw-bold p-2",children:"Oops! Not Available"}):ge.stock_info.map((function(e,t){return(0,u.jsxs)("div",{style:{cursor:"pointer",Width:"max-content"},className:"bg-".concat(t%2==0?"pearl":"seashell"," border-bottom text-wrap"),onClick:function(){ht(e),Ee(),Fe(),ve(),we()},children:[(0,u.jsx)("p",{className:"text-start m-0 p-0 fw-bold",children:qe}),(0,u.jsxs)("p",{className:"text-start p-0 m-0 ",children:[" BatchNo. -"," "," ",e.batch_no&&null!==e.batch_no?e.batch_no:""," "]}),(0,u.jsxs)("p",{className:"text-start p-0 m-0 ",children:[" Stock -"," "," ",e.current_stock&&e.current_stock?e.current_stock:""," "]}),(0,u.jsxs)("p",{className:"text-start p-0 m-0 ",children:[" Expiry Date -"," "," ",e.expiry_date?ot(e.expiry_date):""," "]})]})})):(0,u.jsx)("div",{className:"bg-seashell p-2",children:"Not Avaliable"})]}),(0,u.jsx)("div",{})]}),(0,u.jsx)("div",{className:"col-1 text-burntumber fw-bold align-self-center",children:"OR"}),(0,u.jsxs)("div",{className:"col-4 ",children:[(0,u.jsx)("input",{className:"form-control bg-seashell border border-1 rounded-1",value:He||"",placeholder:"Search Product by ID",onChange:function(e){mt(e.target.value),Fe(e.target.value),p.current.style.display="block"}}),(0,u.jsx)("div",{ref:p,className:"position-absolute rounded-1 mt-1",style:{Width:"max-content",zIndex:"2"},children:Ce?De?(0,u.jsxs)("div",{className:"rounded-1 p-1 bg-pearl",children:["Searching Please wait....",(0,u.jsxs)("div",{className:"spinner-border my-auto",style:{width:"1rem",height:"1rem"},role:"status",children:[(0,u.jsx)("span",{className:"sr-only",children:" "})," "]})]}):0==De&&0==Ce.length?(0,u.jsx)("div",{className:"bg-burntumber text-light rounded-1 p-1",children:"Oops! Not Avaliable"}):Ce.map((function(e,t){return(0,u.jsx)("div",{style:{cursor:"pointer",Width:"max-content"},className:"p-0 p-1 rounded-pill shadow bg-".concat(t%2==0?"pearl":"seashell"," fs-6 "),onClick:function(t){Fe(e.type+e.id),ht(e),p.current.style.display="none"},children:e.item_name?e.item_name:""})})):(0,u.jsx)("div",{className:"bg-seashell"})})]})]})]}),(0,u.jsxs)("div",{className:"col-12 m-0 p-0",children:[(0,u.jsx)("div",{className:"d-flex p-0 m-0 justify-content-between",children:(0,u.jsx)("h6",{className:"text-charcoal p-0 m-0 fw-bolder text-start ms-1",children:"Product Added"})}),(0,u.jsx)("hr",{className:"p-0 m-0"}),(0,u.jsx)("div",{className:"p-0 m-0 scroll scroll-y",style:{height:"35vh"},children:(0,u.jsxs)("table",{className:"table p-0 m-0",children:[(0,u.jsxs)("thead",{className:"p-0 m-0",children:[(0,u.jsxs)("tr",{className:"p-0 m-0 ",children:[(0,u.jsx)("th",{className:"p-0 m-0 px-2",rowSpan:"2",children:" Item ID "}),(0,u.jsx)("th",{className:"p-0 m-0 px-2",rowSpan:"2",children:" Item Name "}),(0,u.jsx)("th",{className:"p-0 m-0 px-2",rowSpan:"2",children:" BatchNo. "}),(0,u.jsx)("th",{className:"p-0 m-0 px-2",rowSpan:"2",children:" Expiry Date "}),(0,u.jsx)("th",{className:"p-0 m-0 px-2",rowSpan:"2",children:" Avl.Stock "}),(0,u.jsx)("th",{className:"p-0 m-0 px-2",rowSpan:"2",children:" Qty To Sale "}),(0,u.jsx)("th",{className:"p-0 m-0 px-2",rowSpan:"2",children:" Discount % "}),(0,u.jsx)("th",{className:"p-0 m-0 px-2",colSpan:"4",scope:"col-group",children:" Costing "}),(0,u.jsx)("th",{className:"p-0 m-0 px-2",rowSpan:"2",children:" Total Amount "}),(0,u.jsx)("th",{className:"p-0 m-0 px-2",rowSpan:"2",children:" Delete "})]}),(0,u.jsxs)("tr",{className:"p-0 m-0",children:[(0,u.jsx)("th",{className:"p-0 m-0 px-2",scope:"col",children:" MRP "}),(0,u.jsx)("th",{className:"p-0 m-0 px-2",scope:"col",children:" Cost "}),(0,u.jsx)("th",{className:"p-0 m-0 px-2",scope:"col",children:" GST Rate "}),(0,u.jsx)("th",{className:"p-0 m-0 px-2",scope:"col",children:" Selling Cost/Unit "})]})]}),Oe&&0!==Oe.length?(0,u.jsx)("tbody",{className:"p-0 m-0",children:Oe.map((function(e){return(0,u.jsxs)("tr",{className:"p-0 m-0 align-middle bg-".concat(Number(e.disccost)<Number(e.cost)?"lightred50":""),children:[(0,u.jsxs)("td",{children:[e.type," ",e.productid," "]}),(0,u.jsx)("td",{children:e.product}),(0,u.jsx)("td",{children:e.batch}),(0,u.jsx)("td",{children:ot(e.expiry)}),(0,u.jsx)("td",{children:e.quantity}),(0,u.jsxs)("td",{children:[(0,u.jsx)("input",{className:"border border-1 rounded-1 w-25 text-center p-0 m-0 bg-seashell",value:e.qtytoSale?e.qtytoSale:"",onChange:function(t){t.target.value<=e.quantity?e.qtytoSale=t.target.value:v().Notify.failure("Quantity Cannot be Greater then Current Stock Available"),e.totalamt=ut(e.qtytoSale,e.disccost),ze((function(e){return(0,s.Z)(e)}))}})," "]}),(0,u.jsxs)("td",{className:"text-center p-0 m-0",style:{Width:"0rem"},children:[(0,u.jsx)("input",{className:"border border-1 rounded-1 w-25 text-center p-0 m-0 bg-seashell",value:e.discount?e.discount:"",onChange:function(t){var a,n;e.discount=t.target.value,e.disccost=(a=e.mainmrp,(n=t.target.value)?(Number(a)-Number(a)*Number(n)/100).toFixed(2):Number(a)),e.totalamt=ut(e.qtytoSale,Number(e.disccost),Number(e.cost)),ze((function(e){return(0,s.Z)(e)}))}})," "]}),(0,u.jsx)("td",{children:e.mainmrp}),(0,u.jsx)("td",{children:e.cost}),(0,u.jsx)("td",{children:e.gst+"%"}),(0,u.jsx)("td",{children:e.disccost}),(0,u.jsx)("td",{children:e.totalamt}),(0,u.jsx)("td",{children:(0,u.jsx)("button",{className:"btn p-0 m-0",onClick:function(){!function(e){pt.apply(this,arguments)}(e.batch)},children:(0,u.jsx)("img",{src:"images/delete.png",style:{width:"1.5rem"}})})})]})}))}):(0,u.jsx)("tbody",{className:"p-0 m-0 position-relative",children:(0,u.jsx)("tr",{className:"p-0 m-0",children:(0,u.jsx)("td",{className:"p-0 m-0 position-absolute text-charcoal fw-bold start-0 end-0",children:" No Product Added "})})})]})})]})]}),(0,u.jsx)("div",{className:"col-12 position-absolute start-0 end-0 bottom-0 py-3 border border-1 text-center bg-pearl align-items-center rounded-bottom",children:(0,u.jsxs)("div",{className:"row p-0 m-0",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsxs)("div",{className:"col-3",children:[(0,u.jsxs)("p",{className:"text-charcoal75 p-0 m-0 fw-bolder card-title text-start ms-3",children:[" "," "," Order Total"," "," "]}),(0,u.jsx)("h4",{className:"text-charcoal  p-0 m-0 fw-bolder card-header text-start ps-3",children:Ye})]}),(0,u.jsxs)("div",{className:"col-3",children:[(0,u.jsxs)("p",{className:"text-charcoal75 p-0 m-0 fw-bolder card-title text-start ms-3",children:[" ","Discount %"]}),(0,u.jsx)("h4",{className:"text-charcoal  p-0 m-0 fw-bolder card-header text-start ps-3",children:function(e){var t=0;return e?(e.forEach((function(e){t+=Number(e.discount)})),t):t}(Oe)})]}),(0,u.jsxs)("div",{className:"col-3",children:[(0,u.jsxs)("p",{className:"text-charcoal75 p-0 m-0 fw-bolder card-title text-start ms-3",children:[" ","Total Items"]}),(0,u.jsx)("h4",{className:"text-charcoal  p-0 m-0 fw-bolder card-header text-start ps-3",children:Oe.length})]})]})}),(0,u.jsx)("div",{className:"col-3 align-self-center",children:ue?(0,u.jsx)("div",{className:"col-6 py-2 pb-2 m-auto text-center",children:(0,u.jsx)("div",{class:"spinner-border",role:"status",children:(0,u.jsx)("span",{class:"visually-hidden",children:"Loading..."})})}):(0,u.jsx)("button",{className:"button button-charcoal px-5",onClick:function(){(0,S.H)(),v().Confirm.show("Save Sale Entry","Do you surely want to add total ".concat(Oe.length," Sale ").concat(Oe.length<=1?"entry":"entries","  "),"Yes","No",(function(){xt()}),(function(){return 0}),{})},children:"Save Entry"})}),(0,u.jsx)("div",{className:"col-3 align-self-center",children:(0,u.jsx)("button",{className:"button button-pearl border-charcoal text-charcoal px-4",disabled:!!ue,onClick:function(){(0,S.H)(),v().Confirm.show("Add to Cart","Do you surely want to add the following Sale entries to the Cart  ","Yes","No",(function(){ie(1)}),(function(){ie(0)}),{})},children:"Add To Cart"})})]})})]})}function q(e){var t=(0,o.useContext)(i.Jx),a=(0,o.useRef)(null),d=((0,o.useRef)(null),(0,o.useState)()),m=(0,l.Z)(d,2),h=(m[0],m[1]),p=(0,o.useState)(),x=(0,l.Z)(p,2),b=x[0],N=x[1],j=(0,o.useState)(),f=(0,l.Z)(j,2),g=f[0],y=f[1],_=(0,o.useState)([""]),w=(0,l.Z)(_,2),T=w[0],k=w[1],C=(0,o.useState)([""]),G=(0,l.Z)(C,2),Z=(G[0],G[1],(0,o.useState)("")),I=(0,l.Z)(Z,2),D=I[0],R=I[1],P=(0,o.useState)(),A=(0,l.Z)(P,2),q=A[0],E=A[1],M=(0,o.useState)([]),L=(0,l.Z)(M,2),H=L[0],F=L[1],B=function(e){if(e)return e=e.split("-").reverse().join("-")};function Q(){return(Q=(0,c.Z)((0,n.Z)().mark((function e(t){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={Itemid:t.id,Type:t.type,Item:t.item_name,batchno:t.batch_no,expirydate:t.expiry_date,cost:t.sale_disc_mrp,totalcost:t.sale_disc_mrp,saleqty:t.sale_qty,qtytoReturn:t.sale_qty},void 0==H||0==H.length?(F([a]),R()):(F((function(e){return[].concat((0,s.Z)(e),[a])})),R());case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=function(){var e=(0,c.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.current.style.display="block",y(!0),e.prev=2,e.next=5,r.Z.get("".concat(t,"/sale/return/item/search/by/id?item=").concat(D,"&bill_id=").concat(b)).then((function(e){console.log(e),k([e.data.data]),y(!1)})).catch((function(e){e.response&&(v().Notify.failure(e.response.data),v().Notify.failure(e.response.status),v().Notify.failure(e.response.headers)),y(!1)}));case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),v().Notify.failure(e.t0),y(!1);case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var a=(0,c.Z)((0,n.Z)().mark((function a(){var s,c,l,o,i,d;return(0,n.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:for(s=[],c=[],l=[],o=0,i=0;i<H.length;i++)s.push(H[i].Itemid?"".concat(H[i].Type).concat(H[i].Itemid):""),c.push(H[i].totalcost?H[i].totalcost:""),l.push(H[i].qtytoReturn?H[i].qtytoReturn:"");return c.forEach((function(e){o+=Number(e)})),d={bill_id:b,pro_id:s,qty:l,total_amount:c,grand_total:o},console.log(d),E(!0),a.prev=9,a.next=12,r.Z.post("".concat(t,"/sale/return/save"),d).then((function(t){v().Notify.success(t.data.message),e.GETSaleReturns(),F(),N(),h(),E(!1),e.toggle_nref()}));case 12:a.next=19;break;case 14:a.prev=14,a.t0=a.catch(9),v().Notify.warning(a.t0.message),console.log(a.t0.message),E(!1);case 19:case"end":return a.stop()}}),a,null,[[9,14]])})));return function(){return a.apply(this,arguments)}}();function V(){return(V=(0,c.Z)((0,n.Z)().mark((function e(t){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=[]).push(H.filter((function(e){return e.Itemid!==t}))),a=a.flat(),F(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return console.log(b,D,T),(0,u.jsxs)("div",{className:"p-0 m-0 ",children:[(0,u.jsxs)("div",{className:"container-fluid p-0 m-0 border border-1 ",children:[(0,u.jsx)("h5",{className:"text-center pt-3",style:{color:"var(--charcoal)"},children:"New Sale Return Entry"}),(0,u.jsx)("button",{type:"button",className:"btn-close closebtn position-absolute end-0 p-2 me-2",onClick:e.toggle_nref,disabled:!!q,"aria-label":"Close"}),(0,u.jsx)("hr",{}),(0,u.jsxs)("div",{className:"container-fluid p-0 m-0 w-100 entrydetails bg-seashell",children:[(0,u.jsxs)("div",{className:"row p-0 m-0 justify-content-end",children:[(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("h6",{className:"p-0 m-0 ms-3 fw-bold",children:"Select Bill"}),(0,u.jsx)("input",{className:"form-control ms-2 rounded-1 bg-seashell",placeholder:"Bill Id (Does not require initials)",value:b||"",onChange:function(e){N(e.target.value),F([])}})]}),(0,u.jsx)("div",{className:"col-5",children:(0,u.jsxs)("div",{className:"position-relative",children:[(0,u.jsx)("h6",{className:"p-0 m-0 ms-3 fw-bold",children:"Product ID"}),(0,u.jsx)("input",{className:"form-control bg-seashell",placeholder:"Product Id (Require initials)",value:D||"",onChange:function(e){b?R(e.target.value):v().Notify.failure("Please Add Bill id First"),a.current.style.display="block"}}),(0,u.jsx)("div",{ref:a,className:"position-absolute rounded-1 bg-pearl col-12",style:{zIndex:"1"},children:T?g?(0,u.jsxs)("div",{className:"rounded-1 p-1",children:["Searching Please wait....",(0,u.jsxs)("div",{className:"spinner-border my-auto",style:{width:"1rem",height:"1rem"},role:"status",children:[(0,u.jsx)("span",{className:"sr-only",children:" "})," "]})]}):0==T.length?(0,u.jsx)("div",{className:"bg-burntumber text-light rounded-1 p-1",children:"Oops! Not Avaliable"}):T.map((function(e,t){return(0,u.jsx)("div",{style:{cursor:"pointer"},className:"p-0 ps-1 shadow bg-".concat(t%2==0?"pearl":"lightyellow"," fs-6 "),name:e.id,onClick:function(t){R(e.item_name),function(e){Q.apply(this,arguments)}(e),a.current.style.display="none"},children:e.item_name})})):(0,u.jsx)("div",{className:"bg-seashell"})})]})}),(0,u.jsxs)("div",{className:"col-2 align-self-center ",children:[(0,u.jsx)("p",{}),(0,u.jsx)("button",{className:"p-0 m-0 btn",onClick:O,children:(0,u.jsx)("img",{src:"images/search.png",style:{width:"1.8rem"}})})]})]}),(0,u.jsxs)("div",{className:" p-0 m-0 mt-2 scroll scroll-y",style:{Height:"65vh",zIndex:"2"},children:[(0,u.jsx)("p",{className:"text-center fw-bold text-burntumber p-0 m-0  mt-2 mb-1",children:"Items Selected"}),(0,u.jsxs)("table",{className:"table datatable text-center position-relative",children:[(0,u.jsx)("thead",{className:"text-charcoal75 fw-bold",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"p-0 m-0 px-1",children:"Item ID"}),(0,u.jsx)("th",{className:"p-0 m-0 px-1",children:"Item Name"}),(0,u.jsx)("th",{className:"p-0 m-0 px-1",children:"batch No."}),(0,u.jsx)("th",{className:"p-0 m-0 px-1",children:"Expiry Date"}),(0,u.jsx)("th",{className:"p-0 m-0 px-1",children:"Sale Qty"}),(0,u.jsx)("th",{className:"p-0 m-0 px-1",children:"Qty to Return"}),(0,u.jsx)("th",{className:"p-0 m-0 px-1",children:"Sale Rate/Unit"}),(0,u.jsx)("th",{className:"p-0 m-0 px-1",children:"Sale Rate"}),(0,u.jsx)("th",{className:"p-0 m-0 px-1",children:"Delete"})]})}),H?(0,u.jsx)("tbody",{style:{maxHeight:"65vh",minHeight:"65vh",color:"var(--charcoal)",fontWeight:"600"},children:H.map((function(e,t){return(0,u.jsxs)("tr",{className:"",children:[(0,u.jsxs)("td",{children:[e.Type,e.Itemid]}),(0,u.jsx)("td",{children:e.Item}),(0,u.jsx)("td",{children:e.batchno}),(0,u.jsx)("td",{children:B(e.expirydate)}),(0,u.jsx)("td",{children:e.saleqty}),(0,u.jsx)("td",{className:"p-0 m-0",style:{width:"0px",height:"0px"},children:(0,u.jsx)("input",{className:"border border-1 rounded-1 w-25 text-center p-0 m-0 bg-seashell  mt-2",value:e.qtytoReturn?e.qtytoReturn:"",onChange:function(t){var a,n,c;t.target.value<=e.saleqty?e.qtytoReturn=t.target.value:v().Notify.failure("Quantity Cannot be Greater then Current Stock Available"),e.totalcost=(a=e.cost,n=e.saleqty,c=t.target.value,a&&c&&n>=c?(Number(a)*Number(c)).toFixed(2):a),F((function(e){return(0,s.Z)(e)}))}})}),(0,u.jsx)("td",{children:e.cost}),(0,u.jsx)("td",{children:e.totalcost}),(0,u.jsx)("td",{children:(0,u.jsx)("button",{onClick:function(){!function(e){V.apply(this,arguments)}(e.Itemid)},className:"btn btn-sm button-burntumber",children:"Delete"})})]},t)}))}):H&&0==H.length?(0,u.jsx)("tbody",{className:"position-relative",style:{height:"65vh",maxHeight:"65vh",color:"var(--charcoal)",fontWeight:"600"},children:(0,u.jsx)("tr",{children:(0,u.jsx)("td",{className:"position-absolute start-0 end-0 top-0",children:"No items Added"})})}):(0,u.jsx)("tbody",{className:"position-relative",style:{height:"65vh",maxHeight:"65vh",color:"var(--charcoal)",fontWeight:"600"},children:(0,u.jsx)("tr",{className:"",children:(0,u.jsx)("td",{className:"position-absolute start-0 end-0 top-0",children:"No items Added"})})})]})]})]})]}),(0,u.jsx)("div",{className:"col-12 position-absolute start-0 end-0 bottom-0 text-center bg-pearl  border border-1 py-3",children:(0,u.jsxs)("div",{className:"row p-0 m-0",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsxs)("div",{className:"col-auto",children:[(0,u.jsxs)("p",{className:"text-charcoal75 p-0 m-0 fw-bolder card-title text-start ms-3",children:[" ","Order Total"," "]}),(0,u.jsx)("h4",{className:"text-charcoal  p-0 m-0 fw-bolder card-header text-start ps-3",children:function(){var e=0;return H&&H.length>0&&H.map((function(t){return e+=Number(t.totalcost)})),e}()})]}),(0,u.jsxs)("div",{className:"col-auto",children:[(0,u.jsxs)("p",{className:"text-charcoal75 p-0 m-0 fw-bolder card-title text-start ms-3",children:[" ","Total Items"]}),(0,u.jsx)("h4",{className:"text-charcoal  p-0 m-0 fw-bolder card-header text-start ps-3",children:H?H.length:0})]})]})}),(0,u.jsx)("div",{className:"col-6 align-self-center",children:q?(0,u.jsx)("div",{className:"col-6 py-2 pb-2 m-auto text-center",children:(0,u.jsx)("div",{class:"spinner-border",role:"status",children:(0,u.jsx)("span",{class:"visually-hidden",children:"Loading..."})})}):(0,u.jsx)("button",{className:"button button-charcoal px-5",onClick:function(){(0,S.H)(),v().Confirm.show("Save Purchase Return ","Do you surely want to add total ".concat(H.length," Sale ").concat(H.length<=1?"Return ":"Returns"," of Bill P-").concat(b," "),"Yes","No",(function(){z()}),(function(){return 0}),{})},children:"Save Entry"})})]})})]})}function E(e){var t=(0,o.useState)("block"),a=(0,l.Z)(t,2),s=a[0],n=a[1],c=(0,o.useState)("none"),r=(0,l.Z)(c,2),i=r[0],d=r[1],m=(0,o.useState)(0),h=(0,l.Z)(m,2),p=h[0],x=h[1];0==p&&"none"==s&&(n("block"),d("none")),1==p&&"none"==i&&(d("block"),n("none"));var b=(0,o.useState)(!1),N=(0,l.Z)(b,2),j=N[0],f=N[1];function g(e,t,a){if(e&&t&&null!==a)return Number(e)+Number(t)+Number(a)}function v(e,t,a,s){if(e&&t&&null!==a)return(Number(e)+Number(t)+Number(a))*Number(s)}var y=function(e){if(e)return e=e.split("-").reverse().join("-")};return(0,u.jsxs)("div",{className:"container-fluid p-0 m-0 bg-seashell ",children:[(0,u.jsx)("div",{className:"container-fluid bg-seashell p-0 m-0",children:(0,u.jsxs)("div",{className:"row p-0 m-0 position-relative",children:[(0,u.jsxs)("h5",{className:"text-center text-charcoal pt-3",children:[e.itembillid," Sale Return Item Details"]}),(0,u.jsx)("button",{type:"button",className:"btn-close closebtn m-auto position-absolute end-0 me-4",onClick:e.toggle_sridw,"aria-label":"Close"}),(0,u.jsx)("div",{className:"col-2 d-none",children:(0,u.jsxs)("div",{className:" position-relative searchbutton",style:{top:"0.25rem",right:"1rem"},children:[(0,u.jsx)("input",{type:"text",className:" form-control d-inline PEsearch bg-seashell",placeholder:"Search PE"}),(0,u.jsx)("button",{className:"btn p-0 m-0 bg-transparent border-0 position-absolute",style:{width:"2rem",right:"0",left:"0",top:"0.25rem"},children:(0,u.jsx)("img",{src:"/images/search.png",alt:"displaying_image",className:"img-fluid p-0 m-0"})})]})})]})}),(0,u.jsx)("div",{className:"d-flex justify-content-center p-0 m-0 mt-3 mb-1",children:["Medicine","Vaccine"].map((function(e,t){return(0,u.jsx)("button",{className:"button border-charcoal rounded-0 shadow-0 button-".concat(t==p?"charcoal":"seashell"),onClick:function(){x(t)},children:e})}))}),(0,u.jsx)("div",{className:"row justify-content-end me-5",children:(0,u.jsxs)("div",{className:"col-3",children:[(0,u.jsx)("input",{type:"checkbox",className:"",value:j||"",onChange:function(){f(1!=j)}}),(0,u.jsx)("label",{children:"Show Tax Details"})]})}),(0,u.jsx)("div",{className:"scroll bg-seashell scroll-y d-".concat(s),style:{minHeight:"70vh",Height:"70vh",maxHeight:"82vh"},children:(0,u.jsxs)("table",{className:"table datatable table-responsive text-center bg-seashell",children:[(0,u.jsxs)("thead",{children:[(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Item Name"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Batch No."}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Expiry Date"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"MRP in Rs."}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Selling Cost"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Discount%"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Qty"}),(0,u.jsx)("th",{colspan:1==j?"8":"2",scope:"col-group",className:"border p-0 m-0 px-1",children:"Total Tax"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Total in Rs."})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"CGST%"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"CGST in Rs."}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"SGST%"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"SGST in Rs."}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"IGST%"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"IGST in Rs."}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1",children:"Total%"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1",children:"Total in Rs."})]})]}),e.salereturnarr.sale_medicines&&0!==e.salereturnarr.sale_medicines.length?(0,u.jsx)("tbody",{className:"border align-items-center p-0 m-0",children:e.salereturnarr.sale_medicines.map((function(e,t){return(0,u.jsxs)("tr",{className:"border p-0 m-0 align-middle",children:[(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.medicine&&null!==e.medicine.name?e.medicine.name:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.medicine_stocks.batch_no&&null!=e.medicine_stocks.batch_no?e.medicine_stocks.batch_no:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.medicine_stocks.expiry_date&&null!=e.medicine_stocks.expiry_date?y(e.medicine_stocks.expiry_date):"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.main_mrp?e.main_mrp:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.disc_mrp?e.disc_mrp:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.discount?e.discount:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.qty?e.qty:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.SGST_rate?e.SGST_rate:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.SGST?Number(e.SGST)*Number(e.qty):"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.CGST_rate?e.CGST_rate:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.CGST?Number(e.CGST)*Number(e.qty):"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.IGST_rate?e.IGST_rate:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.IGST?Number(e.IGST)*Number(e.qty):"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:g(e.CGST_rate,e.SGST_rate,e.IGST_rate)}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:v(e.CGST,e.SGST,e.IGST,e.qty)}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.total_amount?e.total_amount:"N/A"})]},t)}))}):(0,u.jsx)("body",{className:"text-center p-0 m-0 border border-1 ",children:(0,u.jsx)("div",{className:"position-absolute border-0 start-0 end-0 mx-3 p-2 bg-lightred",children:(0,u.jsx)("strong",{className:"fs-5 text-center bg-lightred",children:"No Medicines Found"})})})]})}),(0,u.jsx)("div",{className:"scroll bg-seashell scroll-y d-".concat(i),style:{minHeight:"70vh",Height:"70vh",maxHeight:"70vh"},children:(0,u.jsxs)("table",{className:"table datatable table-responsive text-center bg-seashell",children:[(0,u.jsxs)("thead",{children:[(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Item ID"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Item Name"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Batch No."}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Expiry Date"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"MRP in Rs."}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Rate in Rs."}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Disc%"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Trade Disc%"}),(0,u.jsx)("th",{colspan:1==j?"8":"2",scope:"col-group",className:"border p-0 m-0 px-1",children:"Total Tax"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Cost in Rs."}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Qty."}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Total in Rs."}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Print QR"})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"CGST%"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"CGST Rs."}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"SGST%"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"SGST in Rs."}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"IGST%"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"IGST in Rs."}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1",children:"Total%"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1",children:"Total in Rs."})]})]}),e.salereturnarr.purchase_vaccines&&0!==e.salereturnarr.purchase_vaccines.length?(0,u.jsx)("tbody",{className:"border align-items-center p-0 m-0",children:e.salereturnarr.purchase_vaccines.map((function(e,t){return(0,u.jsxs)("tr",{className:"border p-0 m-0 align-middle",children:[(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e&&null!==e.id?e.id:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.vaccine&&null!==e.vaccine.name?e.vaccine.name:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.batch_no&&null!=e.batch_no?e.batch_no:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.expiry_date&&null!=e.expiry_date?y(e.expiry_date):"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.mrp?e.mrp:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.rate?e.rate:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.discount?e.discount:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.trade_discount?e.trade_discount:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.SGST_rate?e.SGST_rate:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.SGST?e.SGST:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.CGST_rate?e.CGST_rate:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.CGST?e.CGST:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.IGST_rate?e.IGST_rate:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.IGST?e.IGST:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:g(e.CGST_rate,e.SGST_rate,e.IGST_rate)}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:v(e.CGST,e.SGST,e.IGST)}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.cost?e.cost:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.qty?e.qty:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.total_amount?e.total_amount:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:(0,u.jsx)("button",{className:"btn",children:(0,u.jsx)("img",{src:"/images/qrcode.png",alt:"displaying_image",style:{width:"1.5rem"},className:"me-1"})})})]},t)}))}):(0,u.jsx)("body",{className:"text-center p-0 m-0 border border-1 ",children:(0,u.jsx)("div",{className:"position-absolute border-0 start-0 end-0 mx-3 p-2",children:(0,u.jsx)("strong",{className:"fs-6 text-center",children:"No Vaccines Found"})})})]})})]})}function M(e){var t,a=(0,o.useContext)(i.Pl),s=[{option:"Purchase Entry",display:a.purchase_entry_view},{option:"Purchase Returns",display:a.purchase_return_view},{option:"Purchase Orders",display:a.purchase_orders_view}],n=(0,o.useState)(0),c=(0,l.Z)(n,2),r=c[0],d=c[1];return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("section",{className:"purchasesection",children:(0,u.jsx)("div",{className:"row p-0 m-0 mt-1 gx-lg-3 gx-md-2",children:s.map((function(e,t){return(0,u.jsx)("div",{className:"col-auto d-".concat(1==e.display?"":"none"),children:(0,u.jsx)("button",{className:"btn btn-sm rounded-pill text-".concat(t===r?"light":"dark"," bg-").concat(t===r?"charcoal":"seashell"),onClick:function(e){return d(t)},children:e.option})})}))})}),(0,u.jsx)("section",{className:"tablesrender position-relative",children:(0,u.jsx)("div",{className:"container-fluid mt-lg-4 mt-md-3 mt-2 p-0 m-0",children:(0,u.jsx)("div",{className:"",children:(t=r,0===t?(0,u.jsx)(L,{function:e.func,function2:e.function}):1===t?(0,u.jsx)(Q,{}):2===t?(0,u.jsx)(B,{}):(0,u.jsx)("div",{className:"",children:"Nothing Selected"}))})})})]})}function L(e){var t=(0,o.useContext)(i.U8),a=localStorage.getItem("ClinicId"),s=(0,o.useContext)(i.Pl),n=(0,o.useContext)(i.Jx),c=(0,o.useState)("none"),d=(0,l.Z)(c,2),m=d[0],h=d[1],x=function(){"none"===m&&h("block"),"block"===m&&h("none")},b=(0,o.useState)(1),N=(0,l.Z)(b,2),j=N[0],g=N[1],y=(0,o.useState)(),S=(0,l.Z)(y,2),w=S[0],T=S[1],k=(0,o.useState)(),C=(0,l.Z)(k,2),G=C[0],Z=C[1],I=(0,o.useState)(!1),D=(0,l.Z)(I,2),R=D[0],P=D[1],A=(0,o.useState)([]),q=(0,l.Z)(A,2),E=q[0],M=q[1],L=(0,o.useState)([]),B=(0,l.Z)(L,2),Q=B[0],O=B[1],z=(0,o.useState)(),V=(0,l.Z)(z,2),U=V[0],Y=V[1],W=(0,o.useState)("none"),J=(0,l.Z)(W,2),X=J[0],K=J[1],$=(0,o.useState)(),ee=(0,l.Z)($,2),te=ee[0],ae=ee[1],se=(0,o.useState)(),ne=(0,l.Z)(se,2),ce=ne[0],le=ne[1],re=(0,o.useState)("none"),oe=(0,l.Z)(re,2),ie=oe[0],de=oe[1];function me(e){if(void 0==e||void 0==e.selected){P(!0);try{r.Z.get("".concat(n,"/purchase/entry?clinic_id=").concat(a,"&channel=").concat(j,"&limit=25&offset=0&from_date=").concat(w||t,"&to_date=").concat(G||(w||t))).then((function(e){le(e.data.data.total_count),M(e.data.data.purchase_entry),P(!1)})).catch((function(e){v().Notify.warning(e.message),P(!1)}))}catch(s){v().Notify.warning(s.data.message),P(!1)}}else{P(!0);try{r.Z.get("".concat(n,"/purchase/entry?clinic_id=").concat(a,"&channel=").concat(j,"&limit=25&offset=").concat(25*e.selected,"&from_date=").concat(w||t,"&to_date=").concat(G||(w||t))).then((function(e){le(e.data.data.total_count),M(e.data.data.purchase_entry),P(!1)})).catch((function(e){v().Notify.warning(e.message),P(!1)}))}catch(s){v().Notify.warning(s.data.message),P(!1)}}}(0,o.useEffect)((function(){!function(){try{r.Z.get("".concat(n,"/purchase/entry?clinic_id=").concat(a,"&channel=").concat(j,"&from_date=").concat(w||t,"&to_date=").concat(G||w||t)).then((function(e){le(e.data.data.total_count),ae(Math.round(e.data.data.total_count/25)+1),P(!1)})).catch((function(e){v().Notify.warning(e),P(!1)}))}catch(e){v().Notify.warning(e.message),P(!1)}}()}),[j,w,G]),(0,o.useEffect)((function(){me(),function(){P(!0);try{r.Z.get("".concat(n,"/purchase/entry?clinic_id=").concat(a,"&channel=").concat(j,"&limit=").concat(ce,"&offset=0&from_date=").concat(w||t,"&to_date=").concat(G||w||t)).then((function(e){O(e.data.data.purchase_entry),P(!1)})).catch((function(e){v().Notify.warning(e.message),P(!1)}))}catch(e){v().Notify.warning(e.data.message),P(!1)}}()}),[ce]);var ue=function(){"none"===X&&K("block"),"block"===X&&K("none")},he=function(e){if(e)return e=e.split("-").reverse().join("-")};function pe(e){console.log(e.purchaseentry);var t=e.purchaseentry.medicines?e.purchaseentry.medicines:0,a=e.purchaseentry.vaccines?e.purchaseentry.vaccines:0,s={},n={},c=[],l=[];if(void 0!==e.purchaseentry.medicines&&0!==e.purchaseentry.medicines.length)for(var r=0;r<t.length;r++)for(var o=0;o<e.purchaseentry.medicines[r].qty;o++)s[o]={id:"m"+e.purchaseentry.medicines[r].id,name:e.purchaseentry.medicines[r].medicine.name,qrcode:(0,u.jsx)(f,{id:"m"+e.purchaseentry.medicines[r].id})},c.push(s[o]);if(void 0!==e.purchaseentry.vaccines&&0!==e.purchaseentry.vaccines.length)for(var i=0;i<a.length;i++)for(var d=0;d<e.purchaseentry.vaccines[i].qty;d++)n[d]={id:"v"+e.purchaseentry.vaccines[i].id,name:e.purchaseentry.vaccines[i].vaccine.name,qrcode:(0,u.jsx)(f,{id:"v"+e.purchaseentry.vaccines[i].id})},l.push(n[d]);return console.log(c,l),(0,u.jsxs)("div",{className:"container-fluid",children:[(0,u.jsx)("h5",{className:"text-charcoal75 fw-bold",children:"Medicines"}),(0,u.jsx)("div",{className:"row",children:c.map((function(e){return(0,u.jsxs)("div",{className:"col-auto m-2",children:[(0,u.jsxs)("p",{className:"text-charcoal75",children:[e.name," | ",e.id]}),(0,u.jsx)("div",{className:"container",children:e.qrcode})]},e)}))}),(0,u.jsx)("h5",{className:"text-charcoal75 fw-bold mt-2",children:"Vaccines"}),(0,u.jsx)("div",{className:"row",children:l.map((function(e){return(0,u.jsxs)("div",{className:"col-auto m-2",children:[(0,u.jsxs)("p",{className:"text-charcoal75",children:[e.name," | ",e.id]}),(0,u.jsx)("div",{className:"container",children:e.qrcode})]},e)}))})]})}return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("button",{className:"button addpurchase button-charcoal position-absolute d-".concat(1==s.purchase_entry_add?"":"none"),onClick:ue,children:[(0,u.jsx)("img",{src:"/images/addiconwhite.png",alt:"displaying_image",className:"img-fluid p-0 m-0",style:{width:"1.5rem"}}),"Entry Purchase"]}),(0,u.jsxs)("div",{className:"row p-0 m-0 justify-content-lg-between justify-content-md-evenly justify-content-center text-center",children:[(0,u.jsx)("div",{className:"col-lg-2 col-md-2 col-12 text-center p-0 m-0 ms-lg-0 ms-md-0 ms-sm-0 ms-4",children:(0,u.jsxs)("button",{type:"button",className:"btn p-0 m-0 heading text-charcoal fw-bolder  ",style:{width:"fit-content"},children:[ce," ",ce>1?"Purchase Entries":"Purchase Entry"," "]})}),(0,u.jsx)("div",{className:"col-lg-8 col-md-7 col-12 ms-lg-0 px-5 align-self-center p-0 m-0 mt-lg-0 mt-md-0 mt-1  ",children:(0,u.jsxs)("div",{className:"row p-0 m-0 border-burntumber fw-bolder rounded-1 text-center justify-content-center ",children:[(0,u.jsx)("div",{className:"col-4 p-0 m-0  bg-pearl rounded-1",children:(0,u.jsxs)("select",{className:"p-0 m-0 border-0 text-burntumber fw-bolder bg-pearl",value:j||"",onChange:function(e){g(e.target.value)},children:[(0,u.jsx)("option",{className:"border-0 text-burntumber fw-bolder",value:"1",children:"Pharmacy"}),(0,u.jsx)("option",{className:"border-0 text-burntumber fw-bolder",value:"2",children:"Consumables"})]})}),(0,u.jsx)("div",{className:"col-4 p-0 m-0 text-burntumber fw-bolder bg-pearl",children:(0,u.jsx)("input",{type:"date",className:" p-0 m-0 border-0 text-burntumber fw-bolder bg-pearl ",value:w||(t||""),onChange:function(e){T(e.target.value)}})}),(0,u.jsx)("div",{className:"col-4 p-0 m-0  text-burntumber fw-bolder bg-pearl rounded-1",children:(0,u.jsx)("input",{type:"date",className:" p-0 m-0 border-0 text-burntumber fw-bolder bg-pearl rounded-1 ",value:G||(w||(t||"")),onChange:function(e){Z(e.target.value)}})})]})}),(0,u.jsx)("div",{className:"col-12 export col-md-2 mt-sm-2 col-lg-2 align-self-center order-1 ",children:(0,u.jsx)(p,{purchaseentryarr:Q,fromdate:he(w),todate:he(G)})})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"scroll scroll-y overflow-scroll p-0 m-0 mt-2",style:{minHeight:"56vh",height:"56vh"},children:(0,u.jsxs)("table",{className:"table p-0 m-0",children:[(0,u.jsx)("thead",{className:"p-0 m-0 align-middle position-sticky top-0 bg-pearl",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"fw-bolder py-0 my-0  text-charcoal75",scope:"col",children:" PE ID "}),(0,u.jsx)("th",{className:"fw-bolder py-0 my-0  text-charcoal75",scope:"col",children:" PO ID "}),(0,u.jsx)("th",{className:"fw-bolder py-0 my-0  text-charcoal75",scope:"col",children:" Channel "}),(0,u.jsx)("th",{className:"fw-bolder py-0 my-0  text-charcoal75",scope:"col",children:" Invoice No. "}),(0,u.jsx)("th",{className:"fw-bolder py-0 my-0  text-charcoal75",scope:"col",children:" Bill Date "}),(0,u.jsx)("th",{className:"fw-bolder py-0 my-0  text-charcoal75",scope:"col",children:" Bill Total "}),(0,u.jsx)("th",{className:"fw-bolder py-0 my-0  text-charcoal75",scope:"col",children:" Vendor "}),(0,u.jsx)("th",{className:"fw-bolder py-0 my-0 text-center  text-charcoal75",scope:"col",children:" Actions "})]})}),R?(0,u.jsx)("body",{className:" text-center",style:{minHeight:"55vh"},children:(0,u.jsx)("tr",{className:"position-absolute border-0 start-0 end-0 px-5",children:(0,u.jsxs)("div",{class:"d-flex align-items-center",children:[(0,u.jsx)("strong",{className:"",children:"Getting Details please be Patient ..."}),(0,u.jsx)("div",{class:"spinner-border ms-auto",role:"status","aria-hidden":"true"})]})})}):E&&0!=E.length?(0,u.jsx)("tbody",{children:E.map((function(e,t){return(0,u.jsxs)("tr",{className:"bg-".concat(t%2==0?"seashell":"pearl"," align-middle"),children:[(0,u.jsxs)("td",{className:"py-0 my-0 text-charcoal fw-bold ps-2",children:["PE-",e.bill_id]}),(0,u.jsxs)("td",{className:"py-0 my-0 text-charcoal fw-bold",children:[" ",e.purchase_order_id&&null!==e.purchase_order_id?e.purchase_order_id:"N/A"," "]}),(0,u.jsxs)("td",{className:"py-0 my-0 text-charcoal fw-bold",children:[" ",e.channel&&1==e.channel?"Pharmacy":"Clinic"," "]}),(0,u.jsxs)("td",{className:"py-0 my-0 text-charcoal fw-bold",children:[" ",e.invoice_no?e.invoice_no:"N/A"," "]}),(0,u.jsx)("td",{className:"py-0 my-0 text-charcoal fw-bold",children:e.bill_date&&e.bill_date?he(e.bill_date):"N/A"}),(0,u.jsx)("td",{className:"py-0 my-0 text-charcoal fw-bold",children:e.bill_total&&e.bill_total?"Rs. "+e.bill_total:"N/A"}),(0,u.jsx)("td",{className:"py-0 my-0 text-charcoal fw-bold",children:e.distributor&&null!=e.distributor&&e.distributor.entity_name&&null!=e.distributor.entity_name?e.distributor.entity_name:"N/A"}),(0,u.jsxs)("td",{className:"py-0 my-0 text-charcoal fw-bold text-center",children:[(0,u.jsx)("button",{className:"btn",onClick:function(){Y(t),x()},children:(0,u.jsx)("img",{src:"/images/archivebox.png",alt:"displaying_image",className:"ms-1",style:{width:"1.5rem"}})}),(0,u.jsx)("button",{className:"btn",onClick:function(){de(t)},children:(0,u.jsx)("img",{src:"/images/qrcode.png",alt:"displaying_image",style:{width:"1.5rem"},className:"me-1"})})]}),(0,u.jsx)("td",{className:" position-absolute d-".concat(t==U?m:"none"," border border-1 start-0 end-0 bg-seashell p-0 m-0"),style:{top:"-8.5rem",zIndex:"5"},children:t==U?(0,u.jsx)(H,{purchaseentryarr:E[t],itembillid:"PE-"+e.bill_id,toggle_peidw:x}):(0,u.jsx)(u.Fragment,{})}),(0,u.jsx)("td",{className:"position-absolute start-0 text-start bg-pearl container-fluid d-".concat(ie==t?"block":"none"),style:{top:"-8.5rem",zIndex:"5",height:"89vh"},children:t==ie?(0,u.jsxs)("div",{className:"container-fluid position-relative",children:[(0,u.jsx)("button",{type:"button",className:"btn-close closebtn position-absolute end-0 me-2",onClick:function(){return de()},"aria-label":"Close"}),(0,u.jsx)("div",{className:"row",children:(0,u.jsx)(pe,{purchaseentry:E[t]})})]}):(0,u.jsx)(u.Fragment,{})})]},t)}))}):(0,u.jsx)("tbody",{className:"text-center position-relative p-0 m-0 ",style:{minHeight:"55vh"},children:(0,u.jsx)("tr",{className:"",children:(0,u.jsx)("td",{className:"fw-bolder text-charcoal text-center position-absolute border-0 start-0 end-0 mx-3 p-2 border-0",children:"No Purchase Entries"})})})]})}),(0,u.jsx)("div",{className:"container-fluid mt-2 d-flex justify-content-center",children:(0,u.jsx)(_(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:". . .",pageCount:te,marginPagesDisplayed:3,pageRangeDisplayed:2,onPageChange:me,containerClassName:"pagination",pageClassName:"page-item text-charcoal",pageLinkClassName:"page-link text-decoration-none text-charcoal border-charcoal rounded-1 mx-1",previousClassName:"btn button-charcoal-outline me-2",previousLinkClassName:"text-decoration-none text-charcoal",nextClassName:"btn button-charcoal-outline ms-2",nextLinkClassName:"text-decoration-none text-charcoal",breakClassName:"mx-2 text-charcoal fw-bold fs-4",breakLinkClassName:"text-decoration-none text-charcoal",activeClassName:"active"})})]}),(0,u.jsx)("section",{className:"newpurchaseentrysection position-absolute start-0 end-0 bg-seashell border border-1 d-".concat(X),children:(0,u.jsx)(F,{toggle_npef:ue,GETPurchaseList:me})})]})}function H(e){var t=(0,o.useState)("block"),a=(0,l.Z)(t,2),s=a[0],n=a[1],c=(0,o.useState)("none"),r=(0,l.Z)(c,2),i=r[0],d=r[1],m=(0,o.useState)(0),h=(0,l.Z)(m,2),p=h[0],x=h[1],b=(0,o.useState)("none"),N=(0,l.Z)(b,2),j=N[0],g=N[1],v=function(e){if(e)return e=e.split("-").reverse().join("-")};0==p&&"none"==s&&(n("block"),d("none")),1==p&&"none"==i&&(d("block"),n("none"));var y=(0,o.useState)(!1),_=(0,l.Z)(y,2),S=_[0],w=_[1];function T(e,t,a){if(e&&t&&null!==a)return Number(e)+Number(t)+Number(a)}function k(e,t,a,s){if(e&&t||null!==a){var n=Number(Number(e)+Number(t)+Number(a))*Number(s);return n=n.toFixed(2)}}function C(e){for(var t=[],a=0;a<e.qty;a++)t.push(e.qty);return t.map((function(t){return(0,u.jsx)("div",{className:"col-auto m-2",children:(0,u.jsx)(f,{id:e.id})},t)}))}return console.log(e.purchaseentryarr),(0,u.jsxs)("div",{className:"container-fluid p-0 m-0 bg-seashell ",children:[(0,u.jsxs)("div",{className:"container-fluid bg-seashell p-0 m-0",children:[(0,u.jsxs)("h5",{className:"text-center pt-3 text-charcoal",children:[e.itembillid," Purchase Entry Item Details"]}),(0,u.jsx)("button",{type:"button",className:"btn-close closebtn position-absolute end-0 me-2",onClick:e.toggle_peidw,"aria-label":"Close"}),(0,u.jsx)("div",{className:"col-2 d-none",children:(0,u.jsxs)("div",{className:" position-relative searchbutton",style:{top:"0.25rem",right:"1rem"},children:[(0,u.jsx)("input",{type:"text",className:" form-control d-inline PEsearch bg-seashell",placeholder:"Search PE"}),(0,u.jsx)("button",{className:"btn p-0 m-0 bg-transparent border-0 position-absolute",style:{width:"2rem",right:"0",left:"0",top:"0.25rem"},children:(0,u.jsx)("img",{src:"/images/search.png",alt:"displaying_image",className:"img-fluid p-0 m-0"})})]})})]}),(0,u.jsx)("div",{className:"d-flex justify-content-center p-0 m-0 mt-3 mb-1",children:["Medicine","Vaccine"].map((function(e,t){return(0,u.jsx)("button",{className:"button border-charcoal rounded-0 shadow-0 button-".concat(t==p?"charcoal":"seashell"),onClick:function(){x(t)},children:e})}))}),(0,u.jsxs)("div",{className:" d-flex justify-content-end me-5",children:[(0,u.jsx)("input",{type:"checkbox",className:"form-check-input",value:S||"",onChange:function(){w(1!=S)}}),(0,u.jsx)("label",{children:"Show Tax Details"})]}),(0,u.jsx)("div",{className:"scroll bg-seashell scroll-y d-".concat(s),style:{minHeight:"70vh",Height:"70vh",maxHeight:"70vh"},children:(0,u.jsxs)("table",{className:"table datatable table-responsive text-center bg-seashell",children:[(0,u.jsxs)("thead",{children:[(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Item ID"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Item Name"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Batch No."}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Expiry Date"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"MRP"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Rate"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Qty."}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Disc%"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Trade Disc%"}),(0,u.jsx)("th",{colspan:1==S?"8":"2",scope:"col-group",className:"border p-0 m-0 px-1",children:"Total Tax"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Cost"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Total"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Print QR"})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==S?"":"none"),children:"CGST%"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==S?"":"none"),children:"CGST"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==S?"":"none"),children:"SGST%"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==S?"":"none"),children:"SGST"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==S?"":"none"),children:"IGST%"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==S?"":"none"),children:"IGST"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1",children:"Total%"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1",children:"Total"})]})]}),e.purchaseentryarr.medicines&&0!==e.purchaseentryarr.medicines.length?(0,u.jsx)("tbody",{className:"border align-items-center p-0 m-0",children:e.purchaseentryarr.medicines.map((function(e,t){return(0,u.jsxs)("tr",{className:"border p-0 m-0 align-middle",children:[(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e&&null!==e.id?"m"+e.id:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.medicine&&null!==e.medicine.name?e.medicine.name:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.batch_no&&null!=e.batch_no?e.batch_no:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.expiry_date&&null!=e.expiry_date?v(e.expiry_date):"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.mrp?e.mrp:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.rate?e.rate:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.qty?e.qty:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.discount?e.discount:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.trade_discount?e.trade_discount:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==S?"":"none"),children:e.SGST_rate?Number(e.SGST_rate):""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==S?"":"none"),children:e.SGST?(Number(e.SGST)*Number(e.qty)).toFixed(2):""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==S?"":"none"),children:e.CGST_rate?Number(e.CGST_rate):""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==S?"":"none"),children:e.CGST?(Number(e.CGST)*Number(e.qty)).toFixed(2):""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==S?"":"none"),children:e.IGST_rate?Number(e.IGST_rate):""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==S?"":"none"),children:e.IGST?(Number(e.IGST)*Number(e.qty)).toFixed(2):""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:T(e.CGST_rate,e.SGST_rate,e.IGST_rate)}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:k(e.CGST,e.SGST,e.IGST,e.qty)}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.cost?e.cost:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.total_amount?e.total_amount:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:(0,u.jsx)("button",{className:"btn",onClick:function(){g(t)},children:(0,u.jsx)("img",{src:"/images/qrcode.png",alt:"displaying_image",style:{width:"1.5rem"},className:"me-1"})})}),(0,u.jsx)("div",{className:"position-absolute top-0 start-0  text-start bg-pearl container-fluid d-".concat(j==t?"block":"none"),style:{top:"-4.2rem",zIndex:"5",height:"89vh"},children:(0,u.jsxs)("div",{className:"container-fluid position-relative",children:[(0,u.jsx)("button",{type:"button",className:"btn-close closebtn position-absolute end-0 me-2",onClick:function(){return g()},"aria-label":"Close"}),(0,u.jsxs)("p",{className:"mt-2 text-burntumber border-1 ",children:[e.medicine&&null!==e.medicine.name?e.medicine.name:"N/A"," ","| ",e&&null!==e.id?"m"+e.id:"N/A"]}),(0,u.jsx)("div",{className:"row",children:(0,u.jsx)(C,{qty:e.qty,id:"m"+e.id})})]})})]},t)}))}):(0,u.jsx)("body",{className:"text-center p-0 m-0 border border-1 ",children:(0,u.jsx)("div",{className:"position-absolute border-0 start-0 end-0 mx-3 p-2 ",children:(0,u.jsx)("p",{className:" text-center fw-bold",children:"No Medicines Found"})})})]})}),(0,u.jsx)("div",{className:"scroll bg-seashell scroll-y d-".concat(i),style:{minHeight:"70vh",Height:"70vh",maxHeight:"70vh"},children:(0,u.jsxs)("table",{className:"table datatable table-responsive text-center bg-seashell",children:[(0,u.jsxs)("thead",{children:[(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Item ID"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Item Name"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Batch No."}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Expiry Date"}),(0,u.jsxs)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:["MRP"," "]}),(0,u.jsxs)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:["Rate"," "]}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Qty."}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Disc%"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Trade Disc%"}),(0,u.jsx)("th",{colspan:1==S?"8":"2",scope:"col-group",className:"border p-0 m-0 px-1",children:"Total Tax"}),(0,u.jsxs)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:["Cost"," "]}),(0,u.jsxs)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:["Total"," "]}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Print QR"})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==S?"":"none"),children:"CGST%"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==S?"":"none"),children:"CGST"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==S?"":"none"),children:"SGST%"}),(0,u.jsxs)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==S?"":"none"),children:["SGST"," "]}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==S?"":"none"),children:"IGST%"}),(0,u.jsxs)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==S?"":"none"),children:["IGST"," "]}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1",children:"Total%"}),(0,u.jsxs)("th",{scope:"col",className:"border p-0 m-0 px-1",children:["Total"," "]})]})]}),e.purchaseentryarr.vaccines&&0!==e.purchaseentryarr.vaccines.length?(0,u.jsx)("tbody",{className:"border align-items-center p-0 m-0",children:e.purchaseentryarr.vaccines.map((function(e,t){return(0,u.jsxs)("tr",{className:"border p-0 m-0 align-middle",children:[(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e&&null!==e.id?"v"+e.id:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.vaccine&&null!==e.vaccine.name?e.vaccine.name:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.batch_no&&null!=e.batch_no?e.batch_no:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.expiry_date&&null!=e.expiry_date?v(e.expiry_date):"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.mrp?e.mrp:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.rate?e.rate:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.qty?e.qty:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.discount?e.discount:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.trade_discount?e.trade_discount:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==S?"":"none"),children:e.SGST_rate?e.SGST_rate:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==S?"":"none"),children:e.SGST?e.SGST:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==S?"":"none"),children:e.CGST_rate?e.CGST_rate:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==S?"":"none"),children:e.CGST?e.CGST:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==S?"":"none"),children:e.IGST_rate?e.IGST_rate:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==S?"":"none"),children:e.IGST?e.IGST:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:T(e.CGST_rate,e.SGST_rate,e.IGST_rate)}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:k(e.CGST,e.SGST,e.IGST,e.qty)}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.cost?e.cost:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.total_amount?e.total_amount:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:(0,u.jsx)("button",{className:"btn",onClick:function(){g(t)},children:(0,u.jsx)("img",{src:"/images/qrcode.png",alt:"displaying_image",style:{width:"1.5rem"},className:"me-1"})})}),(0,u.jsx)("div",{className:"position-absolute top-0 start-0  text-start bg-pearl container-fluid d-".concat(j==t?"block":"none"),style:{top:"-8.2rem",zIndex:"5",height:"89vh"},children:(0,u.jsxs)("div",{className:"container-fluid position-relative",children:[(0,u.jsx)("button",{type:"button",className:"btn-close closebtn position-absolute end-0 me-2",onClick:function(){return g()},"aria-label":"Close"}),(0,u.jsxs)("p",{className:"mt-2 text-burntumber border-1 ",children:[e.vaccine&&null!==e.vaccine.name?e.vaccine.name:"N/A"," ","| ",e&&null!==e.id?"v"+e.id:"N/A"]}),(0,u.jsx)("div",{className:"row",children:(0,u.jsx)(C,{qty:e.qty,id:"v"+e.id})})]})})]},t)}))}):(0,u.jsx)("body",{className:"text-center p-0 m-0 border border-1 ",children:(0,u.jsx)("div",{className:"position-absolute border-0 start-0 end-0 mx-3 p-2 ",children:(0,u.jsx)("p",{className:"fw-bold text-center",children:"No Vaccines Found"})})})]})})]})}function F(e){var t=(0,o.useContext)(i.Jx),a=localStorage.getItem("ClinicId"),d=(0,o.useContext)(i.q2),h=(0,o.useRef)(null),p=(0,o.useRef)(null),x=(0,o.useRef)(null),b=(0,o.useState)(),N=(0,l.Z)(b,2),j=N[0],f=N[1],g=(0,o.useState)(),y=(0,l.Z)(g,2),_=y[0],w=y[1],T=(0,o.useState)(),k=(0,l.Z)(T,2),G=k[0],Z=k[1],I=(0,o.useState)(),D=(0,l.Z)(I,2),R=D[0],P=D[1],A=(0,o.useState)(),q=(0,l.Z)(A,2),E=q[0],M=q[1],L=(0,o.useState)(),H=(0,l.Z)(L,2),F=H[0],B=H[1],Q=(0,o.useState)(),O=(0,l.Z)(Q,2),z=O[0],V=O[1],U=(0,o.useState)(),Y=(0,l.Z)(U,2),W=Y[0],J=Y[1],X=(0,o.useState)(),K=(0,l.Z)(X,2),$=K[0],ee=K[1],te=(0,o.useState)([""]),ae=(0,l.Z)(te,2),se=ae[0],ne=ae[1],ce=(0,o.useState)(),le=(0,l.Z)(ce,2),re=le[0],oe=le[1],ie=(0,o.useState)(),de=(0,l.Z)(ie,2),me=de[0],ue=de[1],he=(0,o.useState)(0),pe=(0,l.Z)(he,2),xe=pe[0],be=pe[1],Ne=(0,o.useState)(),je=(0,l.Z)(Ne,2),fe=je[0],ge=je[1],ve=(0,o.useState)(),ye=(0,l.Z)(ve,2),_e=ye[0],Se=ye[1],we=(0,o.useState)(),Te=(0,l.Z)(we,2),ke=Te[0],Ce=Te[1],Ge=(0,o.useState)(),Ze=(0,l.Z)(Ge,2),Ie=Ze[0],De=Ze[1],Re=(0,o.useState)(),Pe=(0,l.Z)(Re,2),Ae=Pe[0],qe=Pe[1],Ee=(0,o.useState)(),Me=(0,l.Z)(Ee,2),Le=Me[0],He=Me[1],Fe=(0,o.useState)(),Be=(0,l.Z)(Fe,2),Qe=Be[0],Oe=Be[1],ze=(0,o.useState)(0),Ve=(0,l.Z)(ze,2),Ue=Ve[0],Ye=Ve[1],We=(0,o.useState)(0),Je=(0,l.Z)(We,2),Xe=Je[0],Ke=Je[1],$e=(0,o.useState)(0),et=(0,l.Z)($e,2),tt=et[0],at=et[1],st=(0,o.useState)(0),nt=(0,l.Z)(st,2),ct=nt[0],lt=nt[1],rt=(0,o.useState)(0),ot=(0,l.Z)(rt,2),it=ot[0],dt=ot[1],mt=(0,o.useState)(0),ut=(0,l.Z)(mt,2),ht=ut[0],pt=ut[1],xt=(0,o.useState)(0),bt=(0,l.Z)(xt,2),Nt=bt[0],jt=bt[1],ft=(0,o.useState)(0),gt=(0,l.Z)(ft,2),vt=gt[0],yt=gt[1],_t=(0,o.useState)(0),St=(0,l.Z)(_t,2),wt=St[0],Tt=St[1],kt=(0,o.useState)(0),Ct=(0,l.Z)(kt,2),Gt=Ct[0],Zt=Ct[1],It=(0,o.useState)(),Dt=(0,l.Z)(It,2),Rt=Dt[0],Pt=Dt[1],At=(0,o.useState)(),qt=(0,l.Z)(At,2),Et=qt[0],Mt=qt[1],Lt=(0,o.useState)(),Ht=(0,l.Z)(Lt,2),Ft=Ht[0],Bt=Ht[1],Qt=(0,o.useState)(),Ot=(0,l.Z)(Qt,2),zt=Ot[0],Vt=Ot[1],Ut=(0,o.useState)(),Yt=(0,l.Z)(Ut,2),Wt=Yt[0],Jt=Yt[1],Xt=(0,o.useState)(),Kt=(0,l.Z)(Xt,2),$t=Kt[0],ea=Kt[1],ta=(0,o.useState)([]),aa=(0,l.Z)(ta,2),sa=aa[0],na=aa[1],ca=(0,o.useState)("none"),la=(0,l.Z)(ca,2),ra=la[0],oa=la[1],ia=function(e){if(e)return e=e.split("-").reverse().join("-")};function da(){return(da=(0,c.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=0;t<d.length;t++)d[t].id==a&&Jt(d[t].state_code);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ma={type:"",isconsumable:0,Itemid:"",Itemname:"",batchno:"",expirydate:"",manufacturingDate:"",quantity:"",freeQty:"",MRP:"",Rate:"",Discount:"",tradeDiscount:"",sgst:"",sgstpercent:"",cgst:"",cgstper:"",igst:"",igstper:"",costperunit:"",totalamount:""};function ua(){return(ua=(0,c.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ma={type:fe,isconsumable:xe,Itemid:me,Itemname:re,batchno:_e,expirydate:ke,manufacturingDate:Ie,MRP:Ae,Rate:Le,Qty:Qe,freeQty:Ue,Discount:Xe,tradeDiscount:tt,sgstper:Nt,sgst:ht,cgstper:it,cgst:ct,igstper:wt,igst:vt,costperunit:Gt,totalamount:Rt},Qe?void 0==Ft||0==Ft.length?Bt([ma]):Bt((function(e){return[].concat((0,s.Z)(e),[ma])})):v().Notify.warning("please choose quantity"),ba();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ha=function(){var e=(0,c.Z)((0,n.Z)().mark((function e(a){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mt(!0),e.prev=1,e.next=4,r.Z.get("".concat(t,"/item/search?search=").concat(a)).then((function(e){var t=[],s=[],n=[];t.push(e.data.data.medicines?e.data.data.medicines:[]),s.push(e.data.data.vaccines?e.data.data.vaccines:[]),n=(n=t.concat(s)).flat(),console.log(n),ne(n),Mt(!1),a.length>1?h.current.style.display="block":h.current.style.display="none"}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),v().Notify.warning(e.t0.data.message);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),pa=function(){var e=(0,c.Z)((0,n.Z)().mark((function e(a){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V(!0),e.prev=1,e.next=4,r.Z.get("".concat(t,"/kyc/list?limit=10&offset=0&search=").concat(a)).then((function(e){ee(e.data.data),V(!1),a.length>1?p.current.style.display="block":p.current.style.display="none"})).catch((function(e){v().Notify.warning(e.data.message),V(!1)}));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),V(!1),v().Notify.warning(e.t0.data.message);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),xa=function(){var s=(0,c.Z)((0,n.Z)().mark((function s(){var c,l,o,i,d,m,u,h,p,x,b,N,f,g,y,S,w,T,k,C,Z,I,D,P;return(0,n.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:for(c=[],l=[],o=[],i=[],d=[],m=[],u=[],h=[],p=[],x=[],b=[],N=[],f=[],g=[],y=[],S=[],w=[],T=[],k=[],C=[],Z=[],I=0,D=0;D<Ft.length;D++)i.push(Ft[D].type?Ft[D].type:""),c.push(Ft[D].isconsumable?Ft[D].isconsumable:0),l.push(Ft[D].Itemid?Ft[D].Itemid:""),o.push(Ft[D].Itemname?Ft[D].Itemname:""),d.push(Ft[D].batchno?Ft[D].batchno:""),m.push(Ft[D].expirydate?Ft[D].expirydate:""),u.push(Ft[D].manufacturingDate?Ft[D].manufacturingDate:""),h.push(Ft[D].MRP?Number(Ft[D].MRP):""),p.push(Ft[D].Rate?Number(Ft[D].Rate):""),x.push(Ft[D].Discount?Number(Ft[D].Discount):0),b.push(Ft[D].tradeDiscount?Number(Ft[D].tradeDiscount):0),N.push(Ft[D].sgst?Number(Ft[D].sgst):""),f.push(Ft[D].sgstper?Number(Ft[D].sgstper):0),g.push(Ft[D].cgst?Number(Ft[D].cgst):""),y.push(Ft[D].cgstper?Number(Ft[D].cgstper):0),S.push(Ft[D].igst?Number(Ft[D].igst):""),w.push(Ft[D].igstper?Number(Ft[D].igstper):0),T.push(Ft[D].costperunit?Number(Ft[D].costperunit):""),k.push(Ft[D].totalamount?Number(Ft[D].totalamount):""),C.push(Ft[D].Qty?Number(Ft[D].Qty):""),Z.push(Ft[D].freeQty?Number(Ft[D].freeQty):0);return k.forEach((function(e){I+=Number(e)})),console.log(c,I,i,l,o,d,m,u,h,p,x,b,N,f,g,y,S,w,T,k,C,Z),P={distributor_id:F,purchase_order_id:_,invoice_no:G,bill_date:R,clinic_id:a,channel:j,is_consumable:c,bill_total:I,id:l,type:i,qty:C,free_qty:Z,mrp:h,rate:p,trade_discount:b,discount:x,SGST_rate:f,SGST:N,CGST_rate:y,CGST:g,IGST_rate:w,IGST:S,cost:T,total_amount:k,expiry_date:m,mfd_date:u,batch_no:d},ea(!0),s.prev=27,s.next=30,r.Z.post("".concat(t,"/purchase/entry/save"),P).then((function(t){ea(!1),e.GETPurchaseList(),ea(!1),e.toggle_npef(),1==t.data.status?v().Notify.success(t.data.message):v().Notify.warning(t.data.message)}));case 30:s.next=36;break;case 32:s.prev=32,s.t0=s.catch(27),ea(!1),v().Notify.warning(s.t0.message);case 36:case"end":return s.stop()}}),s,null,[[27,32]])})));return function(){return s.apply(this,arguments)}}(),ba=function(){var e=(0,c.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:oe(),ue(),Se(),Ce(),De(),qe(),He(),Oe(),Ye(),Ke(),at(),lt(),pt(),yt(),dt(),jt(),Tt(),Zt(),Pt(),Mt();case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Na(e){var t;console.log(e),zt==e?(Vt(-1),ja()):(Vt(e),ue(Ft[t=e].Itemid),oe(Ft[t].Itemname),Se(Ft[t].batchno),Ce(Ft[t].expirydate),De(Ft[t].manufacturingDate),qe(Ft[t].MRP),He(Ft[t].Rate),Oe(Ft[t].Qty),Ye(Ft[t].freeQty),Ke(Ft[t].Discount),at(Ft[t].tradeDiscount),lt(Ft[t].cgst),dt(Ft[t].cgstper),pt(Ft[t].sgst),jt(Ft[t].sgstper),yt(Ft[t].igst),Tt(Ft[t].igstper),Zt(Ft[t].costperunit),Pt(Ft[t].totalamount))}function ja(){be(0),ue(),oe(),Se(),Ce(),De(),qe(),He(),Oe(),Ye(),Ke(),at(),lt(),dt(),pt(),jt(),yt(),Tt(),Zt(),Pt()}function fa(){return(fa=(0,c.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=0;t<Ft.length;t++)zt==t&&(Ft[t]={type:fe,isconsumable:xe,Itemid:me,Itemname:re,batchno:_e,expirydate:ke,manufacturingDate:Ie,MRP:Ae,Rate:Le,Qty:Qe,freeQty:Ue,Discount:Xe,tradeDiscount:tt,sgstper:Nt,sgst:ht,cgstper:it,cgst:ct,igstper:wt,igst:vt,costperunit:Gt,totalamount:Rt},v().Notify.success("Item Number ".concat(zt+1," Updated Successfully")),ja(),Vt(-1));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ga(){return(ga=(0,c.Z)((0,n.Z)().mark((function e(t){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=[]).push(Ft.filter((function(e){return e.Itemid!==t}))),a=a.flat(),Bt(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var va=0;function ya(){return va=Qe?Le*Qe:Le,va=Xe?va-va*Xe/100:va,va=tt?va-va*tt/100:va,va=Nt?Number(va)+Number(va*Nt/100+va*Nt/100):va,va=(va=wt?Number(va)+Number(va*Number(wt)/100):va)?parseFloat(va).toFixed(2):va}var _a=0;function Sa(){var e=Number(Qe)+Number(Ue);return _a=Number(parseFloat(ya()/e)),_a=parseFloat(_a).toFixed(2)}var wa=0;function Ta(){return va=Qe?Le*Qe:Le,va=Xe?va-va*Xe/100:va,va=tt?va-va*tt/100:va,wa=Nt?Number((Le*Nt/100+Le*Nt/100)/2):wa,wa=parseFloat(wa).toFixed(2)}var ka=0;function Ca(){return va=Qe?Le*Qe:Le,va=Xe?va-va*Xe/100:va,va=tt?va-va*tt/100:va,ka=wt?Number(Le*wt/100):ka,ka=parseFloat(ka).toFixed(2)}(0,o.useEffect)((function(){Ta(),pt(Ta()),lt(Ta())}),[Nt]),(0,o.useEffect)((function(){Ca(),yt(Ca())}),[wt]),(0,o.useEffect)((function(){Pt(ya())}),[ya()]),(0,o.useEffect)((function(){Zt(Sa())}),[Sa(),ya()]);var Ga=function(){var e=(0,c.Z)((0,n.Z)().mark((function e(a){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.Z.get("".concat(t,"/item/search?search=").concat(a)).then((function(e){var t=[],a=[],s=[];return t.push(e.data.data.medicines?e.data.data.medicines:[]),a.push(e.data.data.vaccines?e.data.data.vaccines:[]),s=(s=t.concat(a)).flat(),console.log(s),s[0]&&void 0!==s[0].id?s[0].id:"Please Select ID"}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Za=function(e,t){var a=0;return t&&e?(a=t*e/100,a=(a=Number(a)).toFixed(2)):0},Ia=function(e,t){return e&&t?e*t/100:0},Da=function(){var e=(0,c.Z)((0,n.Z)().mark((function e(){var t,a,c,l,r,o,i,d,u,h,p,x,b,N,j,f;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],2!=F){e.next=27;break}if(!sa||0==sa.length){e.next=27;break}a=m.ij(sa,{type:"buffer"}),c=a.SheetNames[0],l=a.Sheets[c],r=m.P6.sheet_to_json(l),console.log(r),o=0;case 9:if(!(o<r.length)){e.next=27;break}return i=r[o].EXPIRY.replace("/","-20"),i=ia(i="01-"+i),d=Number(r[o].SRATE),d=r[o].CGST?d+Number(Za(d,r[o].CGST))+Number(Za(d,r[o].SGST)):d,d-=Number(Ia(d,r[o].DIS)),d=Number(d).toFixed(2),e.next=19,Ga(r[o]["ITEM NAME"]);case 19:u=e.sent,console.log(u),ma={type:"",Itemid:"",Itemname:r[o]["ITEM NAME"],batchno:r[o].BATCH,expirydate:i,manufacturingDate:Ie,MRP:r[o].MRP,Rate:r[o].SRATE,Qty:r[o].QTY,freeQty:r[o]["F.QTY"],Discount:"",tradeDiscount:r[o].DIS,sgstper:r[o].SGST,sgst:Za(r[o].SRATE,r[o].SGST),cgstper:r[o].CGST,cgst:Za(r[o].SRATE,r[o].CGST),igstper:Za(r[o].SRATE,r[o].IGST),igst:r[o].IGST,costperunit:d,totalamount:d*r[o].QTY.toFixed(2)},t.push(ma),console.log(t);case 24:o++,e.next=9;break;case 27:if((4==F||3==F)&&sa&&0!=sa.length)for(h=m.ij(sa,{type:"buffer"}),p=h.SheetNames[0],x=h.Sheets[p],b=m.P6.sheet_to_json(x),console.log(b),N=0;N<b.length;N++)j="20"+b[N].EXPYEAR,j+=b[N].EXPMONTH<10?"-0"+b[N].EXPMONTH:"-"+b[N].EXPMONTH,j+=b[N].EXPDAY<10?"-0"+b[N].EXPDAY:b[N].EXPDAY,f=Number(b[N].SRATE),f=b[N].CGST?f+Number(Za(f,b[N].CGST))+Number(Za(f,b[N].SGST)):f,f-=Number(Ia(f,b[N].DIS)),f=Number(f).toFixed(2),ma={type:"",Itemid:"",Itemname:b[N]["ITEM NAME"],batchno:b[N].BATCH,expirydate:j,manufacturingDate:"",MRP:b[N].MRP,Rate:b[N].SRATE,Qty:b[N].QTY,freeQty:b[N]["F.QTY"],Discount:"",tradeDiscount:b[N].DIS,sgstper:b[N].SGST,sgst:Za(b[N].SRATE,b[N].SGST),cgstper:b[N].CGST,cgst:Za(b[N].SRATE,b[N].CGST),igstper:Za(b[N].SRATE,b[N].IGST),igst:b[N].IGST,costperunit:f,totalamount:(f*b[N].QTY).toFixed(2)},t.push(ma);void 0==Ft||0==Ft.length?Bt(t):Bt((function(e){return[].concat((0,s.Z)(e),[t])}));case 29:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ra=function(){"block"==ra&&oa("none"),"none"==ra&&oa("block")};return console.log(Ft),(0,u.jsxs)("div",{className:"container-fluid p-0 m-0",style:{zIndex:"2"},children:[(0,u.jsx)("div",{className:"container-fluid bg-seashell border border-2 border-top-0 border-start-0 border-end-0 ",children:(0,u.jsxs)("div",{className:"row p-0 m-0 p-2",children:[(0,u.jsx)("div",{className:"col-1",children:(0,u.jsx)("button",{type:"button",className:"btn-close closebtn m-auto mt-2",onClick:e.toggle_npef,"aria-label":"Close"})}),(0,u.jsx)("div",{className:"col-8 col-md-7 col-lg-8 col-xl-8",children:(0,u.jsx)("h5",{className:"text-center mt-2",children:" New Purchase Entry "})}),(0,u.jsx)("div",{className:"col-auto",children:$t?(0,u.jsx)("div",{className:"col-6 py-2 pb-2 m-auto text-center",children:(0,u.jsx)("div",{class:"spinner-border",role:"status",children:(0,u.jsx)("span",{class:"visually-hidden",children:"Loading..."})})}):(0,u.jsx)("button",{disabled:!!(void 0==Ft||Ft&&0==Ft.length),className:"button button-charcoal",onClick:function(){var e,t;e=Ft,t=E,(0,S.H)(),v().Confirm.show("Save Purchase Entry","Do you surely want to add total ".concat(e.length," purchase ").concat(e.length<=1?"entry":"entries"," of Distributor ").concat(t,"  "),"Yes","No",(function(){xa()}),(function(){return 0}),{})},children:"Save All"})}),(0,u.jsx)("div",{className:"col-auto",children:(0,u.jsx)("button",{className:"button button-burntumber",onClick:function(){Bt(),f(),w(),Z(),P(),M(),B()},children:"Clear All"})})]})}),(0,u.jsx)("div",{className:"container-fluid p-0 m-0 entrydetails bg-pearl",style:{Height:"90vh"},children:(0,u.jsxs)("div",{className:"row p-0 m-0",children:[(0,u.jsxs)("div",{className:"col-".concat(F?"8":"12"," p-0 m-0"),children:[(0,u.jsxs)("div",{className:"row p-0 m-0 align-items-center",children:[(0,u.jsx)("div",{className:"col-auto",children:(0,u.jsxs)("div",{className:"row p-0 m-0",children:[(0,u.jsx)("div",{className:"col-auto",children:(0,u.jsx)("input",{type:"checkbox",className:"form-check-input",checked:1==j,value:"1",onClick:function(e){f(e.target.value)}})}),(0,u.jsx)("div",{className:"col-auto",children:(0,u.jsx)("span",{className:"ms-0",children:"Pharmacy"})})]})}),(0,u.jsx)("div",{className:"col-auto",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-auto",children:(0,u.jsx)("input",{type:"checkbox",className:"form-check-input",checked:2==j,value:"2",onClick:function(e){f(e.target.value)}})}),(0,u.jsx)("div",{className:"col-auto",children:(0,u.jsx)("span",{className:"ms-0",children:"Clinic"})})]})})]}),(0,u.jsxs)("div",{className:"col-8 p-0 m-0",children:[(0,u.jsxs)("div",{className:"row p-0 m-0 gx-2 gy-1",children:[(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("h6",{className:"p-0 m-0 ms-3 fw-bold",children:"Select PO"}),(0,u.jsx)("input",{className:"form-control ms-2 rounded-1",placeholder:"Enter PO",value:_||"",onChange:function(e){w(e.target.value)},style:{zIndex:"5"}})]}),(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("h6",{className:"p-0 m-0 ms-3 fw-bold",children:"Select Vendor"}),(0,u.jsx)("input",{className:"form-control ms-2 rounded-1",placeholder:"Search Vendors",value:E||"",onChange:function(e){pa(e.target.value),M(e.target.value),B(),J()}}),(0,u.jsx)("div",{ref:p,className:"position-absolute ms-2 rounded-1 bg-pearl col-2",style:{zIndex:"5"},children:$?z?(0,u.jsxs)("div",{className:"rounded-1 p-1 bg-pearl mt-1 border shadow",style:{width:"fit-content"},children:["Searching Please wait....",(0,u.jsx)("div",{className:"spinner-border my-auto",style:{width:"1rem",height:"1rem"},role:"status",children:(0,u.jsx)("span",{className:"sr-only"})})]}):0==$.length?(0,u.jsx)("div",{className:"bg-burntumber text-light rounded-1 p-2",children:"Oops! Not Avaliable"}):(0,u.jsx)("div",{className:"bg-pearl border shadow rounded-1 p-1",style:{zIndex:"40",width:"fit-content"},children:$.map((function(e,t){return(0,u.jsx)("div",{style:{cursor:"pointer"},className:"p-0 p-1 d-".concat(void 0==$||$.length>0?"":"none","  bg-").concat(t%2==0?"pearl":"lightblue"," fs-6 "),name:e.id,onClick:function(t){M(e.entity_name),B(e.id),J(e.state_code),function(){da.apply(this,arguments)}(),p.current.style.display="none"},children:e.entity_name})}))}):(0,u.jsx)(u.Fragment,{})})]}),(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("h6",{className:"p-0 m-0 ms-3 fw-bold",children:"Invoice Number"}),(0,u.jsx)("input",{type:"text",placeholder:"Enter No.",className:"form-control ms-2 rounded-1",value:G||"",onChange:function(e){Z(e.target.value)},style:{color:"gray"}})]}),(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("h6",{className:"p-0 m-0 ms-3 fw-bold",children:"Invoice Date"}),(0,u.jsx)("input",{type:"date",className:"form-control ms-2 rounded-1",value:R||"",onChange:function(e){P(e.target.value)},style:{color:"gray"}})]})]}),(0,u.jsxs)("div",{className:"row p-0 m-0 align-items-center mt-2",children:[(0,u.jsx)("div",{className:"col-6 col-lg-5 col-md-5 p-0 m-0 align-self-center ms-1",children:(0,u.jsxs)("button",{className:"button button-charcoal m-0 p-0 py-1 px-4",onClick:Ra,children:[" ",(0,u.jsx)("img",{src:"/images/addiconwhite.png",alt:"displaying_image",style:{width:"1.5rem"}})," ","Medicine"," "]})}),(0,u.jsx)("div",{className:"col-6",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-5",children:(0,u.jsx)("input",{ref:x,className:"form-control w-100 p-0 m-0 px-2 py-1 rounded-1 bg-pearl",onChange:function(){if("application/vnd.ms-excel"==x.current.files[0].type){var e=x.current.files[0],t=new FileReader;t.readAsArrayBuffer(e),t.onload=function(e){na(e.target.result)}}else v().Notify.failure("Choose Only Excel File to Upload")},type:"file"})}),(0,u.jsx)("div",{className:"col-5 text-end",children:(0,u.jsx)("button",{className:"button button-lightyellow p-0 m-0 px-3 py-1",onClick:Da,children:"Submit"})})]})})]})]}),(0,u.jsx)("div",{className:" p-0 m-0 scroll scroll-y",style:{maxHeight:"50vh",Height:"50vh"},children:(0,u.jsxs)("table",{className:"table m-0 datatable bg-pearl text-start position-relative",children:[(0,u.jsx)("thead",{className:" bg-pearl position-sticky top-0",style:{color:"gray",fontWeight:"600"},children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"Edit"}),(0,u.jsx)("th",{children:"Item ID"}),(0,u.jsx)("th",{children:"Item Name"}),(0,u.jsx)("th",{children:"batch No."}),(0,u.jsx)("th",{children:"Expiry Date"}),(0,u.jsx)("th",{children:"MRP"}),(0,u.jsx)("th",{children:"Rate"}),(0,u.jsx)("th",{children:"Total Disc"}),(0,u.jsx)("th",{children:"Qty."}),(0,u.jsx)("th",{children:"Cost"}),(0,u.jsx)("th",{children:"Amount"}),(0,u.jsx)("th",{children:"Delete"})]})}),Ft?(0,u.jsx)("tbody",{style:{Height:"48vh",maxHeight:"48vh",color:"var(--charcoal)",fontWeight:"600"},children:Ft.map((function(e,t){return(0,u.jsxs)("tr",{className:"bg-".concat(t%2==0?"lightred50":"pearl"),children:[(0,u.jsx)("td",{children:(0,u.jsx)("input",{type:"checkbox",checked:t==zt,onClick:function(){Na(t)},className:"bg-seashell form-check-input"})}),(0,u.jsx)("td",{children:e.Itemid}),(0,u.jsx)("td",{children:e.Itemname}),(0,u.jsx)("td",{children:e.batchno}),(0,u.jsx)("td",{children:ia(e.expirydate)}),(0,u.jsx)("td",{children:e.MRP}),(0,u.jsx)("td",{children:e.Rate}),(0,u.jsx)("td",{children:Number(e.Discount)+Number(e.tradeDiscount)}),(0,u.jsx)("td",{children:e.Qty}),(0,u.jsx)("td",{children:e.costperunit}),(0,u.jsx)("td",{children:e.totalamount}),(0,u.jsx)("td",{children:(0,u.jsx)("button",{onClick:function(){!function(e){ga.apply(this,arguments)}(e.Itemid)},className:"btn btn-sm button-burntumber",children:"Delete"})})]},t)}))}):Ft&&0==Ft.length?(0,u.jsx)("tbody",{className:"position-relative bg-pearl text-center",style:{height:"48vh",maxHeight:"48vh",color:"var(--charcoal)",fontWeight:"600"},children:(0,u.jsx)("tr",{children:(0,u.jsx)("td",{className:"position-absolute start-0 end-0 top-0",children:"No items Added"})})}):(0,u.jsx)("tbody",{className:"position-relative bg-pearl text-center",style:{height:"48vh",maxHeight:"48vh",color:"var(--charcoal)",fontWeight:"600"},children:(0,u.jsx)("tr",{className:"",children:(0,u.jsx)("td",{className:"position-absolute start-0 end-0 top-0",children:"No items Added"})})})]})})]}),(0,u.jsxs)("div",{className:"col-4 m-0 p-0 scroll scroll-y border border-1 medicineinfosection d-".concat(F?"block":"none"," bg-seashell ps-2"),id:"medicineinfosection",style:{maxHeight:"81vh",Height:"81vh"},children:[(0,u.jsx)("h5",{className:"mt-2",children:"Add Items"}),(0,u.jsxs)("div",{className:"col-12",children:[(0,u.jsx)("input",{type:"checkbox",checked:0!=xe,className:"form-check-input",onChange:function(){be(0==xe?1:0)}})," ",(0,u.jsx)("label",{children:"Is Consumable"}),(0,u.jsxs)("div",{className:" col-10 col-md-11",children:[(0,u.jsxs)("div",{className:"position-relative",children:[(0,u.jsx)("label",{children:"Search Items "}),(0,u.jsx)("input",{className:"form-control bg-seashell",placeholder:"Items",value:re||"",onChange:function(e){ha(e.target.value),oe(e.target.value),ge()}}),(0,u.jsx)("div",{ref:h,className:"position-absolute rounded-4 col-12",style:{zIndex:"2"},children:se?Et?(0,u.jsxs)("div",{className:"rounded-1 p-1 bg-pearl",children:["Searching Please wait....",(0,u.jsxs)("div",{className:"spinner-border my-auto",style:{width:"1rem",height:"1rem"},role:"status",children:[(0,u.jsx)("span",{className:"sr-only",children:" "})," "]})]}):0==se.length?(0,u.jsx)("div",{className:"bg-burntumber text-light rounded-1 p-1 text-wrap",children:"Oops! Not Avaliable"}):(0,u.jsxs)("div",{className:"mt-1 rounded-4 bg-pearl shadow px-1 pb-2 d-".concat(se&&se.length>1?"block":"none"),children:[(0,u.jsxs)("p",{className:"p-0 m-0 bg-pearl fw-bold text-charcoal75 rounded-4 ps-2 ",style:{fontSize:"0.8rem"},children:[se.length," Search Results"]}),se.map((function(e,t){return(0,u.jsx)("div",{style:{cursor:"pointer"},className:"p-0 ps-1 text-wrap  bg-".concat(t%2==0?"":"lightyellow"),name:e.id,onClick:function(t){oe(e.display_name?e.display_name:e.name),ue(e.id),ge(e.vaccines_id?"v":"m"),h.current.style.display="none"},children:e.display_name?e.display_name:e.name})}))]}):(0,u.jsx)(u.Fragment,{})})]}),(0,u.jsx)("label",{className:"mb-2 pt-2",children:"Batch Number"}),(0,u.jsx)("input",{type:"text",max:"10",className:"form-control bg-seashell batchnumber rounded-1",id:"inputEmail4",placeholder:"Batch Number",value:_e||"",onChange:function(e){return Se(e.target.value)},required:!0}),(0,u.jsx)("label",{className:"pt-3 mb-2",children:"Expiry Date"}),(0,u.jsx)("input",{type:"Date",className:"form-control bg-seashell reounded-1 expirydate",value:ke||"",onChange:function(e){Ce(e.target.value)},required:!0}),(0,u.jsx)("label",{className:"pt-3 mb-2",children:"Manufacturing Date"}),(0,u.jsx)("input",{type:"Date",className:"form-control bg-seashell reounded-1 manufacturingdate",value:Ie||"",onChange:function(e){De(e.target.value)},required:!0})]}),(0,u.jsxs)("div",{className:"col-12 form-group col-md-11 col-lg-11",children:[(0,u.jsxs)("div",{className:"row p-0 m-0",children:[(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("label",{className:"mb-2",children:"MRP"}),(0,u.jsx)("input",{type:"number",max:"10",className:"form-control bg-seashell mrp rounded-1  m-auto",placeholder:"00",value:Ae||"",onChange:function(e){qe(e.target.value)},required:!0})]}),(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("label",{className:"mb-2",children:" Rate"}),(0,u.jsx)("input",{type:"number",max:"10",className:"form-control bg-seashell rate rounded-1  m-auto",placeholder:"00",value:Le||"",onChange:function(e){He(e.target.value),ya(e.target.value)},required:!0})]})]}),(0,u.jsxs)("div",{className:"row p-0 m-0",children:[(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("label",{className:"mb-2",children:"Qty"}),(0,u.jsx)("input",{type:"number",max:"10",className:"form-control bg-seashell mrp rounded-1  m-auto",placeholder:"00",value:Qe||"",onChange:function(e){Oe(e.target.value),ya(e.target.value)},required:!0})]}),(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("label",{className:"mb-2",children:"Free Qty"}),(0,u.jsx)("input",{type:"number",max:"10",className:"form-control bg-seashell rate rounded-1  m-auto",placeholder:"00",value:Ue||"",onChange:function(e){Ye(e.target.value)},required:!0})]})]}),(0,u.jsxs)("div",{className:"row p-0 m-0 mt-2",children:[(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("label",{className:"mb-2",children:"Discount (%)"}),(0,u.jsx)("input",{type:"number",max:"10",className:"form-control bg-seashell mrp rounded-1  m-auto",placeholder:"00",value:Xe||"",onChange:function(e){Ke(e.target.value)},required:!0})]}),(0,u.jsxs)("div",{className:"col-5 pb-3",children:[(0,u.jsx)("label",{className:"mb-2",children:"Trade Disc. (%)"}),(0,u.jsx)("input",{type:"number",max:"10",className:"form-control bg-seashell rate rounded-1  m-auto",placeholder:"00",value:tt||"",onChange:function(e){at(e.target.value)},required:!0})]}),(0,u.jsx)("hr",{}),(0,u.jsx)("div",{className:"col-12 ps-2 py-2 d-".concat(W==Wt?"block":"none"),children:(0,u.jsxs)("div",{className:"row align-items-center p-0 m-0",children:[(0,u.jsx)("div",{className:"col-2 ",children:(0,u.jsx)("h6",{children:"SGST"})}),(0,u.jsx)("div",{className:"col-5",children:(0,u.jsx)("input",{type:"number",max:"10",className:"form-control bg-seashell mrp rounded-1  m-auto",placeholder:"00",disabled:!0,value:ht||"",required:!0})}),(0,u.jsx)("div",{className:"col-3",children:(0,u.jsx)("input",{type:"number",max:"10",className:"form-control bg-seashell mrp rounded-1  m-auto",placeholder:"Rate",value:Nt||"",onChange:function(e){jt(e.target.value),dt(e.target.value),Ta()},required:!0})})]})}),(0,u.jsx)("div",{className:"col-12 ps-2 py-2 d-".concat(W==Wt?"block":"none"),children:(0,u.jsxs)("div",{className:"row p-0 m-0 align-items-center",children:[(0,u.jsx)("div",{className:"col-2",children:(0,u.jsx)("h6",{children:"CGST"})}),(0,u.jsx)("div",{className:"col-5",children:(0,u.jsx)("input",{type:"number",max:"10",className:"form-control bg-seashell mrp rounded-1  m-auto",disabled:!0,placeholder:"00",value:ct||(ht||""),required:!0})}),(0,u.jsx)("div",{className:"col-3",children:(0,u.jsx)("input",{type:"number",max:"10",className:"form-control bg-seashell mrp rounded-1  m-auto",disabled:!0,placeholder:"Rate",value:it||(Nt||""),required:!0})})]})}),(0,u.jsx)("div",{className:"col-12 ps-2 py-2 d-".concat(W==Wt?"none":"block"),children:(0,u.jsxs)("div",{className:"row p-0 m-0 align-items-center",children:[(0,u.jsx)("div",{className:"col-2 ",children:(0,u.jsx)("h6",{children:"IGST"})}),(0,u.jsx)("div",{className:"col-5",children:(0,u.jsx)("input",{type:"number",max:"10",className:"form-control bg-seashell mrp rounded-1  m-auto",placeholder:"00",disabled:!0,value:Ca()?Ca():""})}),(0,u.jsx)("div",{className:"col-3",children:(0,u.jsx)("input",{type:"number",max:"10",className:"form-control bg-seashell mrp rounded-1  m-auto",placeholder:"Rate",value:wt||"",onChange:function(e){Tt(e.target.value)},required:!0})})]})})]})]}),(0,u.jsx)("hr",{}),(0,u.jsx)("div",{className:"col-12 form-group",children:(0,u.jsxs)("div",{className:"row p-0 m-0 g-3",children:[(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("label",{className:"mb-2",children:"Cost/Unit"}),(0,u.jsx)("input",{type:"number",max:"10",className:"form-control bg-seashell costunit rounded-1",placeholder:"00",disabled:!0,value:Sa()?Sa():"",onChange:function(e){Zt(e.target.value)},required:!0})]}),(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("label",{className:"mb-2",children:"Total Amount"}),(0,u.jsx)("input",{type:"number",max:"10",className:"form-control bg-seashell totalamount rounded-1",placeholder:"00",disabled:!0,value:ya()?ya():"",onChange:function(e){Pt(e.target.value)},required:!0})]})]})}),(0,u.jsx)("div",{className:"col-6 py-3 m-auto text-center",children:-1==zt||void 0==zt?(0,u.jsxs)("button",{type:"submit",className:"btn  button-charcoal done px-5",onClick:function(){return ua.apply(this,arguments)},children:[" ","Add"," "]}):(0,u.jsxs)("button",{type:"submit",className:"btn  button-charcoal done px-5",onClick:function(){return fa.apply(this,arguments)},children:[" ","Update"," "]})})]})]})]})}),(0,u.jsx)("section",{className:"position-absolute top-0 start-0 end-0 d-".concat(ra),children:(0,u.jsx)(C,{ToggleNewMedicine:Ra})})]})}function B(){var e,t=(0,o.useState)(0),a=(0,l.Z)(t,2),s=a[0],n=a[1],c=(0,o.useState)("none"),r=(0,l.Z)(c,2),i=r[0],d=r[1],m=(0,o.useState)("none"),h=(0,l.Z)(m,2),p=h[0],x=h[1],b=function(){"none"===i&&d("block"),"block"===i&&d("none")},N=function(){"none"===p&&x("block"),"block"===p&&x("none")};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("button",{className:"button viewcart button-charcoal position-absolute",onClick:b,children:[(0,u.jsx)("img",{src:"/images/cartwhite.png",alt:"displaying_image",className:"img-fluid",style:{width:"1.5rem"}}),"View Cart"]}),(0,u.jsxs)("div",{className:"container-fluid pt-2  p-0 m-0 cartform d-".concat(i," w-50 border1 rounded bg-seashell position-absolute text-center"),children:[(0,u.jsx)("div",{className:"container-fluid  w-100 shadow-sm",children:(0,u.jsx)("h5",{className:"text-dark fw-bold",children:"Items in Cart"})}),(0,u.jsx)("button",{type:"button",className:"btn-close closebtn position-absolute","aria-label":"Close",onClick:b}),(0,u.jsx)("div",{className:"pt-1",children:(0,u.jsx)("div",{className:"row g-0 justify-content-center",children:["Pharmacy","Clinic"].map((function(e,t){return(0,u.jsx)("button",{className:"col-2 p-0 m-0 button text-".concat(t===s?"light":"dark"," bg-").concat(t===s?"charcoal":"seashell"," rounded-0"),onClick:function(e){return n(t)},children:e})}))})}),(0,u.jsx)("div",{className:"scroll scroll-y",children:(e=s,0===e?(0,u.jsxs)("table",{className:"table datatable text-center",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"No."}),(0,u.jsx)("th",{children:"Item Name"}),(0,u.jsx)("th",{children:"Total Qty"}),(0,u.jsx)("th",{children:"Amount"}),(0,u.jsx)("th",{children:"Last Vendor"}),(0,u.jsx)("th",{children:"Add"}),(0,u.jsx)("th",{children:"Delete"})]})}),(0,u.jsx)("tbody",{children:(0,u.jsx)(T,{})})]}):1===e?(0,u.jsx)("div",{className:"",children:e}):(0,u.jsx)("div",{className:"fs-2",children:"Nothing Selected"}))}),(0,u.jsx)("div",{className:"bg-pearl rounded",children:(0,u.jsxs)("div",{className:"row p-3 justify-content-between",children:[(0,u.jsx)("div",{className:"col-3",children:(0,u.jsx)("select",{className:"form-control bg-pearl",style:{color:"gray"},children:(0,u.jsx)("option",{selected:!0,disabled:!0,defaultValue:"Select Vendor",className:"Selectvendor",style:{color:"gray"},children:"Select Vendor"})})}),(0,u.jsx)("div",{className:"col-3",children:(0,u.jsx)("button",{className:"button button-charcoal",children:"Create New PO"})})]})})]}),(0,u.jsxs)("div",{className:"container-fluid pt-2  p-0 m-0 itemdetailsform d-".concat(p," w-50 border1 rounded bg-seashell position-absolute text-center"),children:[(0,u.jsx)("div",{className:"container-fluid  w-100 shadow-sm",children:(0,u.jsx)("h5",{className:"text-dark fw-bold",children:"PO-14 Item Details"})}),(0,u.jsx)("button",{type:"button",className:"btn-close closebtn position-absolute","aria-label":"Close",onClick:N}),(0,u.jsx)("div",{className:"scroll scroll-y",children:(0,u.jsx)(k,{})}),(0,u.jsx)("button",{type:"button",className:"btn btn-lg text-center button-charcoal m-2",onClick:N,children:"Done"})]}),(0,u.jsx)("h3",{className:"ps-3",children:"Purchase Order List"}),(0,u.jsxs)("table",{className:"table datatable text-center",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"PO ID"}),(0,u.jsx)("th",{children:"Channel"}),(0,u.jsx)("th",{children:"Vendor"}),(0,u.jsx)("th",{children:"PO Date"}),(0,u.jsx)("th",{children:"Created By"}),(0,u.jsx)("th",{children:"Total Items"}),(0,u.jsx)("th",{children:"Amount"}),(0,u.jsx)("th",{children:"Approval Status"}),(0,u.jsx)("th",{}),(0,u.jsx)("th",{})]})}),(0,u.jsx)("tbody",{children:(0,u.jsx)(w,{itemdetails:N})})]})]})}function Q(){var e=(0,o.useContext)(i.U8),t=localStorage.getItem("ClinicId"),a=(0,o.useContext)(i.Jx),s=(0,o.useState)("none"),n=(0,l.Z)(s,2),c=n[0],d=n[1],m=(0,o.useState)(1),h=(0,l.Z)(m,2),p=h[0],b=h[1],N=(0,o.useState)(),j=(0,l.Z)(N,2),f=j[0],g=j[1],y=(0,o.useState)(),S=(0,l.Z)(y,2),w=S[0],T=S[1],k=(0,o.useState)(!1),C=(0,l.Z)(k,2),G=C[0],Z=C[1],I=(0,o.useState)([]),D=(0,l.Z)(I,2),R=D[0],P=D[1],A=(0,o.useState)([]),q=(0,l.Z)(A,2),E=q[0],M=q[1],L=(0,o.useState)(),H=(0,l.Z)(L,2),F=H[0],B=H[1],Q=(0,o.useState)("none"),V=(0,l.Z)(Q,2),U=V[0],Y=V[1],W=(0,o.useState)(),J=(0,l.Z)(W,2),X=J[0],K=J[1],$=(0,o.useState)(),ee=(0,l.Z)($,2),te=ee[0],ae=ee[1];function se(s){if(void 0==s||void 0==s.selected){Z(!0);try{r.Z.get("".concat(a,"/purchase/return?clinic_id=").concat(t,"&channel=").concat(p,"&limit=25&offset=0&from_date=").concat(f||e,"&to_date=").concat(w||(f||e))).then((function(e){P(e.data.data.purchase_return),ae(e.data.data.total_count),Z(!1)})).catch((function(e){v().Notify.warning(e.message),Z(!1)}))}catch(n){v().Notify.warning(n.data.message),Z(!1)}}else{Z(!0);try{r.Z.get("".concat(a,"/purchase/return?clinic_id=").concat(t,"&channel=").concat(p,"&limit=25&offset=").concat(25*s.selected,"&from_date=").concat(f||e,"&to_date=").concat(w||(f||e))).then((function(e){P(e.data.data.purchase_return),ae(e.data.data.total_count),Z(!1)})).catch((function(e){v().Notify.warning(e.message),Z(!1)}))}catch(n){v().Notify.warning(n.data.message),Z(!1)}}}(0,o.useEffect)((function(){!function(){try{r.Z.get("".concat(a,"/purchase/return?clinic_id=").concat(t,"&channel=").concat(p,"&from_date=").concat(f||e,"&to_date=").concat(w||f||e)).then((function(e){ae(e.data.data.total_count),K(Math.round(e.data.data.total_count/25)+1),Z(!1)})).catch((function(e){v().Notify.warning(e),Z(!1)}))}catch(s){v().Notify.warning(s.message),Z(!1)}}()}),[p,f,w]),(0,o.useEffect)((function(){se(),function(){Z(!0);try{r.Z.get("".concat(a,"/purchase/return?clinic_id=").concat(t,"&channel=").concat(p,"&limit=").concat(te,"&offset=0&from_date=").concat(f||e,"&to_date=").concat(w||f||e)).then((function(e){M(e.data.data.purchase_return),Z(!1)})).catch((function(e){v().Notify.warning(e.message),Z(!1)}))}catch(s){v().Notify.warning(s.data.message),Z(!1)}}()}),[te]);var ne=function(){"none"===c&&d("block"),"block"===c&&d("none")},ce=function(){"none"===U&&Y("block"),"block"===U&&Y("none")},le=function(e){if(e)return e=e.split("-").reverse().join("-")};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("button",{className:"button addpurchase button-charcoal position-absolute",onClick:ce,children:[(0,u.jsx)("img",{src:"/images/addiconwhite.png",alt:"displaying_image",className:"img-fluid p-0 m-0",style:{width:"1.5rem"}}),"Entry Return"]}),(0,u.jsxs)("div",{className:"row p-0 m-0 justify-content-lg-between justify-content-md-evenly justify-content-between text-center",children:[(0,u.jsx)("div",{className:"col-lg-2 col-md-2 col-12 text-center p-0 m-0 ms-lg-0 ms-md-0 ms-sm-0 ms-1 ",children:(0,u.jsxs)("button",{type:"button",className:"btn p-0 m-0 heading text-charcoal fw-bolder  ",style:{width:"fit-content"},children:[" ",te," ",te>0?"Purchase Returns":"Purchase Return"," "," "]})}),(0,u.jsx)("div",{className:"col-lg-8 col-md-7 col-sm-12 col-12 px-sm-5  align-self-center p-0 m-0 mt-lg-0 mt-md-0 mt-1  ",children:(0,u.jsxs)("div",{className:"row p-0 m-0 border-burntumber fw-bolder rounded-1 text-center justify-content-center ",children:[(0,u.jsx)("div",{className:"col-4",children:(0,u.jsxs)("select",{className:"p-0 m-0 border-0 text-burntumber bg-pearl fw-bolder",value:p||"",onChange:function(e){b(e.target.value)},children:[(0,u.jsx)("option",{className:"border-0 text-burntumber fw-bolder",value:"1",children:" Pharmacy "}),(0,u.jsx)("option",{className:"border-0 text-burntumber fw-bolder",value:"2",children:" Consumables "})]})}),(0,u.jsx)("div",{className:"col-4 text-burntumber fw-bolder bg-pearl ",children:(0,u.jsx)("input",{type:"date",className:"p-0 m-0 border-0 bg-pearl text-burntumber fw-bolder ",value:f||(e||""),onChange:function(e){g(e.target.value)}})}),(0,u.jsx)("div",{className:"col-4 text-burntumber fw-bolder bg-pearl rounded-1 ",children:(0,u.jsx)("input",{type:"date",className:"p-0 m-0 border-0 bg-pearl text-burntumber fw-bolder ",value:w||(f||(e||"")),onChange:function(e){T(e.target.value)}})})]})}),(0,u.jsx)("div",{className:"col-12 export col-md-2 col-lg-2 align-self-center mt-sm-2  ",children:(0,u.jsx)(x,{purchasereturnarr:E,fromdate:le(f),todate:le(w)})})]}),(0,u.jsx)("div",{className:"scroll scroll-y overflow-scroll p-0 m-0",style:{minHeight:"57vh",height:"57vh"},children:(0,u.jsxs)("table",{className:"table text-center p-0 m-0",children:[(0,u.jsx)("thead",{className:"p-0 m-0 align-middle",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"fw-bolder text-charcoal75",scope:"col",children:" PR ID "}),(0,u.jsx)("th",{className:"fw-bolder text-charcoal75",scope:"col",children:" Distributor "}),(0,u.jsx)("th",{className:"fw-bolder text-charcoal75",scope:"col",children:" Return Date "}),(0,u.jsx)("th",{className:"fw-bolder text-charcoal75",scope:"col",children:" Return Amount "}),(0,u.jsx)("th",{className:"fw-bolder text-charcoal75",scope:"col",children:" Inventory "}),(0,u.jsx)("th",{className:"fw-bolder text-charcoal75",scope:"col",children:" more "})]})}),G?(0,u.jsx)("body",{className:" text-center",style:{minHeight:"57vh"},children:(0,u.jsx)("tr",{className:"position-absolute border-0 start-0 end-0 px-5",children:(0,u.jsxs)("div",{className:"d-flex align-items-center",children:[(0,u.jsx)("strong",{className:"fs-5",children:"Getting Details please be Patient ..."}),(0,u.jsx)("div",{className:"spinner-border ms-auto",role:"status","aria-hidden":"true"})]})})}):R&&0!=R.length?(0,u.jsx)("tbody",{children:R.map((function(e,t){return(0,u.jsxs)("tr",{className:"bg-".concat(t%2==0?"seashell":"pearl"," align-middle"),children:[(0,u.jsxs)("td",{className:"p-0 m-0 text-charcoal fw-bold",children:["PR-",e.return_no]}),(0,u.jsx)("td",{className:"p-0 m-0 text-charcoal fw-bold",children:e.distributor&&null!=e.distributor&&e.distributor.entity_name&&null!=e.distributor.entity_name?e.distributor.entity_name:"N/A"}),(0,u.jsx)("td",{className:"p-0 m-0 text-charcoal fw-bold",children:e.return_date?le(e.return_date):""}),(0,u.jsx)("td",{className:"p-0 m-0 text-charcoal fw-bold",children:e.grand_total?e.grand_total:"N/A"}),(0,u.jsx)("td",{className:"p-0 m-0 text-charcoal fw-bold",children:(0,u.jsx)("button",{className:"btn",onClick:function(){B(t),ne()},children:(0,u.jsx)("img",{src:"/images/archivebox.png",alt:"displaying_image",className:"ms-1",style:{width:"1.5rem"}})})}),(0,u.jsx)("td",{className:"p-0 m-0 text-charcoal fw-bold",children:(0,u.jsx)("button",{className:"btn position-relative cursor-pointer more p-0 m-0",children:(0,u.jsx)("img",{src:"/images/more.png",alt:"displaying_image",style:{width:"1.5rem"}})})}),(0,u.jsx)("td",{className:" position-absolute d-".concat(t==F?c:"none"," border border-1 start-0 end-0 bg-seashell p-0 m-0"),style:{Height:"90vh",top:"-7.15rem",zIndex:"2"},children:t==F?(0,u.jsx)(O,{purchasereturnarr:R[t],itembillid:"PR-"+e.return_no,toggle_pridw:ne}):(0,u.jsx)(u.Fragment,{})})]},t)}))}):(0,u.jsx)("tbody",{className:"text-center position-relative p-0 m-0 ",style:{minHeight:"55vh"},children:(0,u.jsx)("tr",{className:"",children:(0,u.jsx)("td",{className:"fw-bolder text-charcoal text-center position-absolute border-0 start-0 end-0 mx-3 p-2 border-0",children:"No Purchase Returns"})})})]})}),(0,u.jsx)("div",{className:"container-fluid mt-2 d-flex justify-content-center",children:(0,u.jsx)(_(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:". . .",pageCount:X,marginPagesDisplayed:3,pageRangeDisplayed:2,onPageChange:se,containerClassName:"pagination",pageClassName:"page-item text-charcoal",pageLinkClassName:"page-link text-decoration-none text-charcoal border-charcoal rounded-1 mx-1",previousClassName:"btn button-charcoal-outline me-2",previousLinkClassName:"text-decoration-none text-charcoal",nextClassName:"btn button-charcoal-outline ms-2",nextLinkClassName:"text-decoration-none text-charcoal",breakClassName:"mx-2 text-charcoal fw-bold fs-4",breakLinkClassName:"text-decoration-none text-charcoal",activeClassName:"active"})}),(0,u.jsx)("section",{className:"newreturnentrysection position-absolute bg-seashell border border-1 start-0 end-0 d-".concat(U),children:(0,u.jsx)(z,{toggle_nref:ce,GETPurchaseReturns:se})})]})}function O(e){var t=(0,o.useState)("block"),a=(0,l.Z)(t,2),s=a[0],n=a[1],c=(0,o.useState)("none"),r=(0,l.Z)(c,2),i=r[0],d=r[1],m=(0,o.useState)(0),h=(0,l.Z)(m,2),p=h[0],x=h[1];0==p&&"none"==s&&(n("block"),d("none")),1==p&&"none"==i&&(d("block"),n("none"));var b=(0,o.useState)(!1),N=(0,l.Z)(b,2),j=N[0],f=N[1];function g(e,t,a){if(e&&t&&null!==a)return Number(e)+Number(t)+Number(a)}function v(e,t,a,s){if(e&&t&&null!==a){var n=Number(Number(e)+Number(t)+Number(a))*Number(s);return n=n.toFixed(2)}}var y=function(e){if(e)return e=e.split("-").reverse().join("-")};return console.log(e.purchasereturnarr),(0,u.jsxs)("div",{className:"container-fluid p-0 m-0 bg-seashell ",children:[(0,u.jsxs)("div",{className:"container-fluid bg-seashell p-0 m-0 position-relative",children:[(0,u.jsxs)("h5",{className:"text-center text-charcoal mt-3",children:[e.itembillid," Purchase Return Item Details"]}),(0,u.jsx)("button",{type:"button",className:"btn-close closebtn position-absolute end-0 me-2 ",onClick:e.toggle_pridw,"aria-label":"Close"}),(0,u.jsx)("div",{className:"col-2 d-none",children:(0,u.jsxs)("div",{className:" position-relative searchbutton",style:{top:"0.25rem",right:"1rem"},children:[(0,u.jsx)("input",{type:"text",className:" form-control d-inline PEsearch bg-seashell",placeholder:"Search PE"}),(0,u.jsx)("button",{className:"btn p-0 m-0 bg-transparent border-0 position-absolute",style:{width:"2rem",right:"0",left:"0",top:"0.25rem"},children:(0,u.jsx)("img",{src:"/images/search.png",alt:"displaying_image",className:"img-fluid p-0 m-0"})})]})})]}),(0,u.jsx)("div",{className:"d-flex justify-content-center p-0 m-0 mt-3 mb-1",children:["Medicine","Vaccine"].map((function(e,t){return(0,u.jsx)("button",{className:"button border-charcoal rounded-0 button-".concat(t==p?"charcoal":"seashell"),onClick:function(){x(t)},children:e})}))}),(0,u.jsxs)("div",{className:"d-flex justify-content-end me-5 ",children:[(0,u.jsx)("input",{type:"checkbox",className:"",value:j||"",onChange:function(){f(1!=j)}}),(0,u.jsx)("label",{children:"Show Tax Details"})]}),(0,u.jsx)("div",{className:"scroll bg-seashell scroll-y d-".concat(s),style:{minHeight:"70vh",maxHeight:"70vh"},children:(0,u.jsxs)("table",{className:"table datatable text-center bg-seashell",children:[(0,u.jsxs)("thead",{children:[(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Item ID"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Item Name"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Batch No."}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Expiry Date"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"MRP"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Rate"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Qty."}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Disc%"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Trade Disc%"}),(0,u.jsx)("th",{colspan:1==j?"8":"2",scope:"col-group",className:"border p-0 m-0 px-1",children:"Total Tax"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Cost"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Total"})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"CGST%"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"CGST"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"SGST%"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"SGST"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"IGST%"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"IGST"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1",children:"Total%"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1",children:"Total"})]})]}),e.purchasereturnarr.purchase_medicines&&0!==e.purchasereturnarr.purchase_medicines.length?(0,u.jsx)("tbody",{className:"border align-items-center p-0 m-0",children:e.purchasereturnarr.purchase_medicines.map((function(e,t){return(0,u.jsxs)("tr",{className:"border p-0 m-0 align-middle",children:[(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e&&null!==e.id?e.id:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.medicine&&null!==e.medicine.name?e.medicine.name:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.batch_no&&null!=e.batch_no?e.batch_no:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.expiry_date&&null!=e.expiry_date?y(e.expiry_date):"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.mrp?e.mrp:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.rate?e.rate:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.qty?e.qty:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.discount?e.discount:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.trade_discount?e.trade_discount:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.SGST_rate?Number(e.SGST_rate):""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.SGST?Number(e.SGST)*Number(e.qty):""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.CGST_rate?Number(e.CGST_rate):""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.CGST?Number(e.CGST)*Number(e.qty):""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.IGST_rate?Number(e.IGST_rate):""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.IGST?Number(e.IGST)*Number(e.qty):""}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:g(e.CGST_rate,e.SGST_rate,e.IGST_rate)}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:v(e.CGST,e.SGST,e.IGST,e.qty)}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.cost?e.cost:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.total_amount?e.total_amount:"N/A"})]},t)}))}):(0,u.jsx)("body",{className:"text-center p-0 m-0 border border-1 ",children:(0,u.jsx)("div",{className:"position-absolute border-0 start-0 end-0 mx-3 p-2",children:(0,u.jsx)("p",{className:" text-charcoal fw-bold text-center",children:"No Medicines Found"})})})]})}),(0,u.jsx)("div",{className:"scroll bg-seashell scroll-y d-".concat(i),style:{minHeight:"70vh",maxHeight:"70vh"},children:(0,u.jsxs)("table",{className:"table datatable table-responsive text-center bg-seashell",children:[(0,u.jsxs)("thead",{children:[(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Item ID"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Item Name"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Batch No."}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Expiry Date"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"MRP"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Rate"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Disc%"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Trade Disc%"}),(0,u.jsx)("th",{colspan:1==j?"8":"2",scope:"col-group",className:"border p-0 m-0 px-1",children:"Total Tax"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Cost"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Qty"}),(0,u.jsx)("th",{rowspan:"2",className:"border p-0 m-0 px-1",children:"Total"})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"CGST%"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"CGST"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"SGST%"}),(0,u.jsxs)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:["SGST"," "]}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:"IGST%"}),(0,u.jsxs)("th",{scope:"col",className:"border p-0 m-0 px-1 d-".concat(1==j?"":"none"),children:["IGST"," "]}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1",children:"Total%"}),(0,u.jsx)("th",{scope:"col",className:"border p-0 m-0 px-1",children:"Total"})]})]}),e.purchasereturnarr.purchase_vaccines&&0!==e.purchasereturnarr.purchase_vaccines.length?(0,u.jsx)("tbody",{className:"border align-items-center p-0 m-0",children:e.purchasereturnarr.purchase_vaccines.map((function(e,t){return(0,u.jsxs)("tr",{className:"border p-0 m-0 align-middle",children:[(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e&&null!==e.id?e.id:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.vaccine&&null!==e.vaccine.name?e.vaccine.name:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.batch_no&&null!=e.batch_no?e.batch_no:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.expiry_date&&null!=e.expiry_date?y(e.expiry_date):"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.mrp?e.mrp:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.rate?e.rate:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.qty?e.qty:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.discount?e.discount:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.trade_discount?e.trade_discount:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.SGST_rate?e.SGST_rate:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.SGST?e.SGST:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.CGST_rate?e.CGST_rate:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.CGST?e.CGST:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.IGST_rate?e.IGST_rate:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle d-".concat(1==j?"":"none"),children:e.IGST?e.IGST:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:g(e.CGST_rate,e.SGST_rate,e.IGST_rate)}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:v(e.CGST,e.SGST,e.IGST)}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.cost?e.cost:"N/A"}),(0,u.jsx)("td",{className:"border p-0 m-0 align-middle",children:e.total_amount?e.total_amount:"N/A"})]},t)}))}):(0,u.jsx)("body",{className:"text-center p-0 m-0 border border-1 ",children:(0,u.jsx)("div",{className:"position-absolute border-0 start-0 end-0 mx-3 p-2",children:(0,u.jsx)("p",{className:" text-center fw-bold",children:"No Vaccines Found"})})})]})})]})}function z(e){var t=(0,o.useContext)(i.Jx),a=(localStorage.getItem("ClinicId"),(0,o.useContext)(i.q2),(0,o.useRef)(null)),d=(0,o.useRef)(null),m=(0,o.useState)(),h=(0,l.Z)(m,2),p=h[0],x=h[1],b=(0,o.useState)(),N=(0,l.Z)(b,2),j=N[0],f=N[1],g=(0,o.useState)(),y=(0,l.Z)(g,2),_=y[0],w=y[1],T=(0,o.useState)([""]),k=(0,l.Z)(T,2),C=k[0],G=k[1],Z=(0,o.useState)([""]),I=(0,l.Z)(Z,2),D=I[0],R=I[1],P=(0,o.useState)(),A=(0,l.Z)(P,2),q=A[0],E=A[1],M=(0,o.useState)(),L=(0,l.Z)(M,2),H=L[0],F=L[1],B=(0,o.useState)([]),Q=(0,l.Z)(B,2),O=Q[0],z=Q[1],V=(0,o.useState)(),U=(0,l.Z)(V,2),Y=U[0],W=U[1],J=function(e){if(e)return e=e.split("-").reverse().join("-")};function X(){return(X=(0,c.Z)((0,n.Z)().mark((function e(t){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={Itemid:t.id,Type:t.type,Item:t.item_name,batchno:t.batch_no,expirydate:t.expiry_date,cost:t.cost,totalcost:0,currentstock:t.current_stock,qtytoReturn:0},void 0==O||0==O.length?z([a]):z((function(e){return[].concat((0,s.Z)(e),[a])}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var K=function(){var e=(0,c.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(!0),e.prev=1,e.next=4,r.Z.get("".concat(t,"/purchase/item/search/by/id?item=").concat(q,"&distributor_id=").concat(j)).then((function(e){console.log(e.data.data),R([e.data.data]),F(!1),q.length>=1?a.current.style.display="block":a.current.style.display="none"})).catch((function(e){e.response&&(v().Notify.failure(e.response.data),v().Notify.failure(e.response.status),v().Notify.failure(e.response.headers))}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),v().Notify.failure(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=(0,c.Z)((0,n.Z)().mark((function e(a){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.prev=1,e.next=4,r.Z.get("".concat(t,"/kyc/list?limit=10&offset=0&search=").concat(a)).then((function(e){G(e.data.data),w(!1),a.length>1?d.current.style.display="block":d.current.style.display="none"})).catch((function(e){e.response&&(v().Notify.failure(e.response.data),v().Notify.failure(e.response.status),v().Notify.failure(e.response.headers))}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),v().Notify.failure(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var a=(0,c.Z)((0,n.Z)().mark((function a(){var s,c,l,o,i,d;return(0,n.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:for(s=[],c=[],l=[],o=0,i=0;i<O.length;i++)s.push(O[i].Itemid?"".concat(O[i].Type).concat(O[i].Itemid):""),c.push(O[i].totalcost?O[i].totalcost:""),l.push(O[i].qtytoReturn?O[i].qtytoReturn:"");return c.forEach((function(e){o+=Number(e)})),d={distributor_id:j,pro_id:s,qty:l,total_amount:c,grand_total:o},console.log(d),W(!0),a.prev=9,a.next=12,r.Z.post("".concat(t,"/purchase/return/save"),d).then((function(t){e.GETPurchaseReturns(),z(),x(),f(),E(),W(!1),e.toggle_nref(),1==t.data.status?v().Notify.success(t.data.message):v().Notify.warning(t.data.message)}));case 12:a.next=19;break;case 14:a.prev=14,a.t0=a.catch(9),v().Notify.warning(a.t0.message),W(!1),console.log(a.t0);case 19:case"end":return a.stop()}}),a,null,[[9,14]])})));return function(){return a.apply(this,arguments)}}();function te(){return(te=(0,c.Z)((0,n.Z)().mark((function e(t){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=[]).push(O.filter((function(e){return e.Itemid!==t}))),a=a.flat(),z(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,u.jsxs)("div",{className:"newpurchaseentryform p-0 m-0",children:[(0,u.jsxs)("div",{className:" p-0 m-0",children:[(0,u.jsxs)("div",{className:"container-fluid p-0 m-0 bg-seashell position-relative  ",children:[(0,u.jsx)("h5",{className:"text-center mt-3",style:{color:"var(--charcoal)"},children:"New Purchase Return Entry"}),(0,u.jsx)("button",{type:"button",className:"btn-close position-absolute end-0 closebtn me-2",onClick:e.toggle_nref,"aria-label":"Close"})]}),(0,u.jsxs)("div",{className:"container-fluid p-0 m-0 w-100 entrydetails bg-seashell",children:[(0,u.jsxs)("div",{className:"row p-0 m-0 justify-content-center",children:[(0,u.jsxs)("div",{className:"col-5",children:[(0,u.jsx)("h6",{className:"p-0 m-0 ms-3 fw-bold",children:"Select Distributor"}),(0,u.jsx)("input",{className:"form-control ms-2 rounded-1 bg-seashell",placeholder:"Search Vendors",value:p||"",onChange:function(e){$(e.target.value),x(e.target.value),f(),z([])}}),(0,u.jsx)("div",{ref:d,className:"position-absolute ms-2 rounded-1 bg-pearl col-2",style:{display:"none",zIndex:"1"},children:C?_?(0,u.jsxs)("div",{className:"rounded-1 p-1",children:["Searching Please wait....",(0,u.jsxs)("div",{className:"spinner-border my-auto",style:{width:"1rem",height:"1rem"},role:"status",children:[(0,u.jsx)("span",{className:"sr-only",children:" "})," "]})]}):0==C.length?(0,u.jsx)("div",{className:"bg-burntumber text-light rounded-1 p-1",children:"Oops! Not Avaliable"}):C.map((function(e,t){return(0,u.jsx)("div",{style:{cursor:"pointer"},className:"p-0 p-1  bg-".concat(t%2==0?"pearl":"lightblue"," fs-6 "),name:e.id,onClick:function(t){x(e.entity_name),f(e.id),d.current.style.display="none"},children:e.entity_name})})):(0,u.jsx)("div",{className:"bg-seashell"})})]}),(0,u.jsx)("div",{className:"col-5",children:(0,u.jsxs)("div",{className:"position-relative",children:[(0,u.jsx)("h6",{className:"p-0 m-0 ms-3 fw-bold",children:"Product ID"}),(0,u.jsx)("input",{className:"form-control bg-seashell",placeholder:"Product Id",value:q||"",onChange:function(e){j?E(e.target.value):v().Notify.failure("Please Add Vendor First")}}),(0,u.jsx)("div",{ref:a,className:"position-absolute rounded-1 bg-pearl col-12",style:{zIndex:"1"},children:D?H?(0,u.jsxs)("div",{className:"rounded-1 p-1",children:["Searching Please wait....",(0,u.jsxs)("div",{className:"spinner-border my-auto",style:{width:"1rem",height:"1rem"},role:"status",children:[(0,u.jsx)("span",{className:"sr-only",children:" "})," "]})]}):0==D.length?(0,u.jsx)("div",{className:"bg-burntumber text-light rounded-1 p-1",children:"Oops! Not Avaliable"}):D.map((function(e,t){return(0,u.jsx)("div",{style:{cursor:"pointer"},className:"p-0 ps-1 shadow bg-".concat(t%2==0?"pearl":"lightyellow"," fs-6 "),name:e.id,onClick:function(t){E(e.item_name),function(e){X.apply(this,arguments)}(e),a.current.style.display="none"},children:e.item_name})})):(0,u.jsx)("div",{className:"bg-seashell"})})]})}),(0,u.jsxs)("div",{className:"col-2 align-self-center ",children:[(0,u.jsx)("p",{}),(0,u.jsx)("button",{className:"p-0 m-0 btn",onClick:K,children:(0,u.jsx)("img",{src:"images/search.png",style:{width:"1.8rem"}})})]})]}),(0,u.jsx)("div",{className:" p-0 m-0 mt-2 scroll scroll-y",style:{Height:"65vh"},children:(0,u.jsxs)("table",{className:"table datatable text-center position-relative",children:[(0,u.jsx)("thead",{style:{color:"gray",fontWeight:"600"},children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"p-0 m-0 px-1",children:"Item ID"}),(0,u.jsx)("th",{className:"p-0 m-0 px-1",children:"Item Name"}),(0,u.jsx)("th",{className:"p-0 m-0 px-1",children:"batch No."}),(0,u.jsx)("th",{className:"p-0 m-0 px-1",children:"Expiry Date"}),(0,u.jsx)("th",{className:"p-0 m-0 px-1",children:"Avl. Stock"}),(0,u.jsx)("th",{className:"p-0 m-0 px-1",children:"Qty to Return"}),(0,u.jsx)("th",{className:"p-0 m-0 px-1",children:"Purchase Rate/Unit"}),(0,u.jsx)("th",{className:"p-0 m-0 px-1",children:"Purchase Rate"}),(0,u.jsx)("th",{className:"p-0 m-0 px-1",children:"Delete"})]})}),O?(0,u.jsx)("tbody",{style:{maxHeight:"65vh",minHeight:"65vh",color:"var(--charcoal)",fontWeight:"600"},children:O.map((function(e,t){return(0,u.jsxs)("tr",{className:"",children:[(0,u.jsx)("td",{children:e.Itemid}),(0,u.jsx)("td",{children:e.Item}),(0,u.jsx)("td",{children:e.batchno}),(0,u.jsx)("td",{children:J(e.expirydate)}),(0,u.jsx)("td",{children:e.currentstock}),(0,u.jsx)("td",{className:"p-0 m-0",style:{width:"0px",height:"0px"},children:(0,u.jsx)("input",{className:"border border-1 rounded-1 w-25 text-center p-0 m-0 bg-seashell  mt-2",value:e.qtytoReturn?e.qtytoReturn:"",onChange:function(t){t.target.value<=e.currentstock?e.qtytoReturn=t.target.value:v().Notify.failure("Quantity Cannot be Greater then Current Stock Available"),e.totalcost=function(e,t,a){var s=0;return e&&a&&t>=a?(s=0,(s=Number(e)*Number(a)).toFixed(2)):s}(e.cost,e.currentstock,t.target.value),z((function(e){return(0,s.Z)(e)}))}})}),(0,u.jsx)("td",{children:e.cost}),(0,u.jsx)("td",{children:e.totalcost}),(0,u.jsx)("td",{children:(0,u.jsx)("button",{onClick:function(){!function(e){te.apply(this,arguments)}(e.Itemid)},className:"btn btn-sm button-burntumber",children:"Delete"})})]},t)}))}):O&&0==O.length?(0,u.jsx)("tbody",{className:"position-relative",style:{height:"65vh",maxHeight:"65vh",color:"var(--charcoal)",fontWeight:"600"},children:(0,u.jsx)("tr",{children:(0,u.jsx)("td",{className:"position-absolute start-0 end-0 top-0",children:"No items Added"})})}):(0,u.jsx)("tbody",{className:"position-relative",style:{height:"65vh",maxHeight:"65vh",color:"var(--charcoal)",fontWeight:"600"},children:(0,u.jsx)("tr",{className:"",children:(0,u.jsx)("td",{className:"position-absolute start-0 end-0 top-0",children:"No items Added"})})})]})})]})]}),(0,u.jsx)("div",{className:"col-12 position-absolute start-0 end-0 bottom-0 rounded-bottom text-center bg-pearl align-items-center border border-1 py-3",children:(0,u.jsxs)("div",{className:"row p-0 m-0",children:[(0,u.jsx)("div",{className:"col-auto",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsxs)("div",{className:"col-auto",children:[(0,u.jsxs)("p",{className:"text-charcoal75 p-0 m-0 fw-bolder card-title text-start ms-3",children:[" ","Order Total"," "]}),(0,u.jsx)("h4",{className:"text-charcoal  p-0 m-0 fw-bolder card-header text-start ps-3",children:function(){var e=0;return O&&O.length>0&&O.map((function(t){return e+=Number(t.totalcost)})),e}()})]}),(0,u.jsxs)("div",{className:"col-auto",children:[(0,u.jsxs)("p",{className:"text-charcoal75 p-0 m-0 fw-bolder card-title text-start ms-3",children:[" ","Total Items"]}),(0,u.jsx)("h4",{className:"text-charcoal  p-0 m-0 fw-bolder card-header text-start ps-3",children:O?O.length:0})]})]})}),(0,u.jsx)("div",{className:"col-4 mx-auto align-self-center text-end",children:Y?(0,u.jsx)("div",{className:"col-6 py-2 pb-2 m-auto text-center",children:(0,u.jsx)("div",{class:"spinner-border",role:"status",children:(0,u.jsx)("span",{class:"visually-hidden",children:"Loading..."})})}):(0,u.jsx)("button",{className:"button button-charcoal px-5",onClick:function(){(0,S.H)(),v().Confirm.show("Save Purchase Return ","Do you surely want to add total ".concat(O.length," Purchase ").concat(O.length<=1?"Return ":"Returns"," of Distributor ").concat(p,"  "),"Yes","No",(function(){ee()}),(function(){return 0}),{})},children:"Save Entry"})})]})})]})}function V(){var e,t=(0,o.useState)(0),a=(0,l.Z)(t,2),s=a[0],n=a[1];return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("section",{className:"stocksection pt-1",children:(0,u.jsx)("div",{className:"container-fluid",children:(0,u.jsx)("div",{className:"row gx-3",children:(0,u.jsx)("div",{className:"row m-0 p-0",children:["Vaccines","Medicines"].map((function(e,t){return(0,u.jsx)("div",{className:"col-auto",children:(0,u.jsx)("button",{className:"btn btn-sm rounded-pill text-".concat(t===s?"light":"dark"," bg-").concat(t===s?"charcoal":"seashell"),onClick:function(e){return n(t)},children:e})})}))})})})}),(0,u.jsx)("section",{className:"tablesrender position-relative",children:(0,u.jsx)("div",{className:"container-fluid pt-3",children:(0,u.jsx)("div",{className:"",children:(e=s,0===e?(0,u.jsx)("div",{className:"",children:(0,u.jsx)(U,{})}):1===e?(0,u.jsx)("div",{className:"",children:(0,u.jsx)(Y,{})}):(0,u.jsx)("div",{className:"fs-2",children:"Nothing Selected"}))})})})]})}function U(){var e=(0,o.useContext)(i.Jx),t=((0,o.useContext)(i.U8),(0,o.useState)()),a=(0,l.Z)(t,2),d=a[0],m=a[1],h=(0,o.useState)(),p=(0,l.Z)(h,2),x=p[0],b=p[1],N=(0,o.useState)([]),j=(0,l.Z)(N,2),f=j[0],g=j[1],y=(0,o.useState)([]),S=(0,l.Z)(y,2),w=S[0],T=S[1],k=(0,o.useState)(),C=(0,l.Z)(k,2),G=C[0],Z=C[1],I=(0,o.useState)(""),D=(0,l.Z)(I,2),R=D[0],P=D[1],A=(0,o.useState)(),q=(0,l.Z)(A,2),E=q[0],M=q[1],L=(0,o.useState)("none"),H=(0,l.Z)(L,2),F=H[0],B=H[1];var Q=function(){var t=(0,c.Z)((0,n.Z)().mark((function t(a){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0==a||void 0==a.selected){Z(!0);try{r.Z.get("".concat(e,"/stock/list?search=").concat(R,"&limit=10&offset=0")).then((function(e){console.log(e.data.data),g(e.data.data.vaccines),Z(!1)})).catch((function(e){v().Notify.failure(e.message),Z(!1)}))}catch(s){v().Notify.failure(s.message),Z(!1)}}else{Z(!0);try{r.Z.get("".concat(e,"/stock/list?search=").concat(R,"&limit=10&offset=").concat(10*a.selected)).then((function(e){console.log(e.data.data),g(e.data.data.vaccines),Z(!1)})).catch((function(e){v().Notify.failure(e.message),Z(!1)}))}catch(s){v().Notify.failure(s.message),Z(!1)}}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),O=function(e){if(e)return e=e.split("-").reverse().join("-")},z=function(){var e=(0,c.Z)((0,n.Z)().mark((function e(){var t,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T([]),t=(0,n.Z)().mark((function e(){var t,c,l,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],0!=f[a].stock_info.length){e.next=7;break}c={id:f[a].id,name:f[a].name,manufacturer:f[a].manufacturer,max_stock_count:f[a].max_stock_count,alert_stock_count:f[a].alert_stock_count,min_stock_count:f[a].min_stock_count},console.log(c),void 0==w&&0==w.length?T(c):T((function(e){return[].concat((0,s.Z)(e),[c])})),e.next=14;break;case 7:l=(0,n.Z)().mark((function e(){var c,l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.push(f[a].stock_info[r].current_stock),c=J(f[a].stock_info[r].expiry_date),l={id:f[a].id,name:f[a].name,manufacturer:f[a].manufacturer,max_stock_count:f[a].max_stock_count,alert_stock_count:f[a].alert_stock_count,min_stock_count:f[a].min_stock_count,CGST:f[a].stock_info[r].CGST,CGST_rate:f[a].stock_info[r].CGST_rate,IGST:f[a].stock_info[r].IGST,IGST_rate:f[a].stock_info[r].IGST_rate,SGST:f[a].stock_info[r].SGST,SGST_rate:f[a].stock_info[r].SGST_rate,batch_no:f[a].stock_info[r].batch_no,channel:f[a].stock_info[r].channel,cost:f[a].stock_info[r].cost,current_stock:f[a].stock_info[r].current_stock,discount:f[a].stock_info[r].discount,expiry_date:f[a].stock_info[r].expiry_date,free_qty:f[a].stock_info[r].free_qty,Batch_stock_id:f[a].stock_info[r].id,mfd_date:f[a].stock_info[r].mfd_date,mrp:f[a].stock_info[r].mrp,purchase_entry_id:f[a].stock_info[r].purchase_entry_id,qty:f[a].stock_info[r].qty,rate:f[a].stock_info[r].rate,trade_discount:f[a].stock_info[r].trade_discount,total_amount:f[a].stock_info[r].total_amount,totalstock:t,Days_to_expire:c},void 0==w&&0==w.length?T(l):T((function(e){return[].concat((0,s.Z)(e),[l])}));case 4:case"end":return e.stop()}}),e)})),r=0;case 9:if(!(r<f[a].stock_info.length)){e.next=14;break}return e.delegateYield(l(),"t0",11);case 11:r++,e.next=9;break;case 14:case"end":return e.stop()}}),e)})),a=0;case 3:if(!(a<f.length)){e.next=8;break}return e.delegateYield(t(),"t0",5);case 5:a++,e.next=3;break;case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(e){if(void 0!==e){var t=0;return e.map((function(e){return t+=Number(e)})),t}},U=function(e,t){if(void 0!==e){var a=0;return e.map((function(e){return a+=Number(e)})),a<=t?1:0}},Y=function(){"none"==F&&B("block"),"block"===F&&(B("none"),M())},J=function(e){var t=function(e){if(e){var t=[];return e=e.split("-").reverse(),t.push(e[1]),t.push(e[0]),t.push(e[2]),t[0]+"/"+t[1]+"/"+t[2]}}(e),a=new Date,s=new Date(t),n=Math.abs(s-a),c=Math.ceil(Number(n)/864e5);return c=(Number(c)/30).toFixed(1)};return(0,o.useEffect)((function(){!function(){try{r.Z.get("".concat(e,"/stock/list?search=").concat(R,"&limit=10&offset=0")).then((function(e){m(e.data.data.total_count_vaccines),b(Math.round(e.data.data.total_count_vaccines/10)+1),Z(!1)})).catch((function(e){v().Notify.warning(e),Z(!1)}))}catch(t){v().Notify.warning(t.message),Z(!1)}}(),Q(),z()}),[d,R]),(0,o.useEffect)((function(){z()}),[f]),console.log(w),(0,u.jsxs)("div",{className:"p-0 m-0 vaccinestockinfo",children:[(0,u.jsxs)("div",{className:"position-absolute searchbutton",children:[(0,u.jsx)("input",{type:"text",className:" form-control d-inline vaccinesearch bg-pearl",placeholder:"Vaccine Name",onChange:function(e){P(e.target.value)}}),(0,u.jsx)("button",{className:"btn searchbtn p-0 m-0 bg-transparent border-0 position-absolute",children:(0,u.jsx)("img",{src:"/images/search.png",alt:"displaying_image",className:"img-fluid p-0 m-0"})})]}),(0,u.jsx)("div",{className:"heading text-start text-charcoal p-lg-2 p-md-2 p-2 ms-lg-5 ms-md-3 ms-1 fw-bold",children:"Vaccine Stock Info"}),(0,u.jsx)("div",{className:"scroll scroll-y",children:(0,u.jsxs)("table",{className:"table datatable text-start",children:[(0,u.jsx)("thead",{className:"position-sticky top-0 bg-pearl",children:(0,u.jsxs)("tr",{className:"text-start",children:[(0,u.jsx)("th",{className:"text-charcoal75 fw-bold",children:"No."}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bold",children:"ID"}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bold",children:"Vaccine Name"}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bold",children:"Batch No."}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bold",children:"Expiry Date"}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bold",children:"MRP"}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bold",children:"Cost/Unit"}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bold",children:"B.Stock"}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bold",children:"T.Stock"}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bold text-center",children:"Expired in"}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bold text-center",children:"Stock Status"}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bold text-center"}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bold text-center",children:"more info"})]})}),G?(0,u.jsxs)("tr",{className:"p-0 m-0",children:[(0,u.jsx)("td",{className:"placeholder-glow",children:(0,u.jsx)("div",{className:"placeholder col-12 p-0 m-0 w-100 px-1",children:"Loading.."})}),(0,u.jsx)("td",{className:"placeholder-glow",children:(0,u.jsx)("div",{className:"placeholder col-12 p-0 m-0 w-100 px-1",children:"Loading.."})}),(0,u.jsx)("td",{className:"placeholder-glow",children:(0,u.jsx)("div",{className:"placeholder col-12 p-0 m-0 w-100 px-1",children:"Loading.."})}),(0,u.jsx)("td",{className:"placeholder-glow",children:(0,u.jsx)("div",{className:"placeholder col-12 p-0 m-0 w-100 px-1",children:"Loading.."})}),(0,u.jsx)("td",{className:"placeholder-glow",children:(0,u.jsx)("div",{className:"placeholder col-12 p-0 m-0 w-100 px-1",children:"Loading.."})}),(0,u.jsx)("td",{className:"placeholder-glow",children:(0,u.jsx)("div",{className:"placeholder col-12 p-0 m-0 w-100 px-1",children:"Loading.."})}),(0,u.jsx)("td",{className:"placeholder-glow",children:(0,u.jsx)("div",{className:"placeholder col-12 p-0 m-0 w-100 px-1",children:"Loading.."})}),(0,u.jsx)("td",{className:"placeholder-glow",children:(0,u.jsx)("div",{className:"placeholder col-12 p-0 m-0 w-100 px-1",children:"Loading.."})}),(0,u.jsx)("td",{className:"placeholder-glow text-center",children:(0,u.jsx)("div",{className:"placeholder col-12 p-0 m-0 w-100 px-1",children:"Loading.."})}),(0,u.jsx)("td",{className:"placeholder-glow text-center",children:(0,u.jsx)("div",{className:"placeholder col-12 p-0 m-0 w-100 px-1",children:"Loading.."})}),(0,u.jsx)("td",{className:"placeholder-glow text-center",children:(0,u.jsx)("div",{className:"placeholder col-12 p-0 m-0 w-100 px-1",children:"Loading.."})}),(0,u.jsx)("td",{className:"placeholder-glow text-center",children:(0,u.jsx)("div",{className:"placeholder col-12 p-0 m-0 w-100 px-1",children:"Loading.."})})]}):void 0==w||0==w.length?(0,u.jsx)("tbody",{className:"text-center",children:(0,u.jsx)("tr",{children:(0,u.jsx)("td",{className:"position-absolute text-charcoal fw-bolder start-0 end-0",children:"No Vaccines Found"})})}):(0,u.jsx)("tbody",{className:"",children:w.map((function(e,t){return(0,u.jsxs)("tr",{className:"text-start align-middle",children:[(0,u.jsx)("td",{className:" text-charcoal fw-bold",children:t+1}),(0,u.jsxs)("td",{className:" text-charcoal fw-bold",children:["v",e.Batch_stock_id]}),(0,u.jsx)("td",{className:" text-charcoal fw-bold",children:e.name&&null!==e.name?e.name:""}),(0,u.jsx)("td",{className:" text-charcoal fw-bold",children:e.batch_no}),(0,u.jsx)("td",{className:" text-charcoal fw-bold",children:O(e.expiry_date)}),(0,u.jsx)("td",{className:" text-charcoal fw-bold",children:e.mrp}),(0,u.jsx)("td",{className:" text-charcoal fw-bold",children:e.cost}),(0,u.jsx)("td",{className:" text-charcoal fw-bold",children:e.current_stock}),(0,u.jsx)("td",{className:" text-charcoal fw-bold",children:V(e.totalstock)}),(0,u.jsxs)("td",{className:"text-".concat(e.Days_to_expire<=2?"burntumber":"charcoal"," fw-bold text-center"),children:[e.Days_to_expire," Months"]}),(0,u.jsx)("td",{className:" text-charcoal fw-bold text-center",children:1==U(e.totalstock,e.alert_stock_count)?(0,u.jsx)("img",{src:"images/exclamation.png",style:{width:"1.5rem"}}):(0,u.jsx)(u.Fragment,{})}),(0,u.jsx)("td",{className:"p-0 m-0 text-charcoal fw-bold align-items-center text-center ",children:(0,u.jsx)("div",{className:"vr rounded-1 align-self-center",style:{padding:"0.8px"}})}),(0,u.jsx)("td",{className:" bg-".concat(E==t?"lightyellow":""," p-0 m-0 text-charcoal fw-bold text-center"),children:(0,u.jsx)("button",{className:"btn p-0 m-0",onClick:function(){M(t),Y()},children:(0,u.jsx)("img",{src:"images/info.png",style:{width:"1.5rem"}})})}),E==t?(0,u.jsx)("td",{className:"stockdetailsfrom bg-white border border-1 col-lg-11 rounded-4 shadow p-0 col-md-12 col-sm-11 col-10 col-xl-6 d-".concat(E==t?F:"none"," position-absolute start-0 end-0 top-0"),children:(0,u.jsx)(W,{toggle_detailsform:Y,data:w[t]})}):(0,u.jsx)(u.Fragment,{})]})}))})]})}),(0,u.jsx)("div",{className:"container-fluid d-flex justify-content-center mt-2",children:(0,u.jsx)(_(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:". . .",pageCount:x,marginPagesDisplayed:3,pageRangeDisplayed:2,onPageChange:Q,containerClassName:"pagination",pageClassName:"page-item text-charcoal",pageLinkClassName:"page-link text-decoration-none text-charcoal border-charcoal rounded-1 mx-1",previousClassName:"btn button-charcoal-outline me-2",previousLinkClassName:"text-decoration-none text-charcoal",nextClassName:"btn button-charcoal-outline ms-2",nextLinkClassName:"text-decoration-none text-charcoal",breakClassName:"mx-2 text-charcoal fw-bold fs-4",breakLinkClassName:"text-decoration-none text-charcoal",activeClassName:"active"})})]})}function Y(){var e=(0,o.useContext)(i.Jx),t=(0,o.useState)(),a=(0,l.Z)(t,2),d=a[0],m=a[1],h=(0,o.useState)(),p=(0,l.Z)(h,2),x=p[0],b=p[1],N=(0,o.useState)([]),j=(0,l.Z)(N,2),f=j[0],g=j[1],y=(0,o.useState)([]),S=(0,l.Z)(y,2),w=S[0],T=S[1],k=(0,o.useState)(),C=(0,l.Z)(k,2),G=C[0],Z=C[1],I=(0,o.useState)(""),D=(0,l.Z)(I,2),R=D[0],P=D[1],A=(0,o.useState)(),q=(0,l.Z)(A,2),E=q[0],M=q[1],L=(0,o.useState)("none"),H=(0,l.Z)(L,2),F=H[0],B=H[1];var Q=function(){var t=(0,c.Z)((0,n.Z)().mark((function t(a){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0==a||void 0==a.selected){Z(!0);try{r.Z.get("".concat(e,"/stock/list?search=").concat(R,"&limit=10&offset=0")).then((function(e){g(e.data.data.medicines),Z(!1)})).catch((function(e){v().Notify.failure(e.message),Z(!1)}))}catch(s){v().Notify.failure(s.message),Z(!1)}}else{Z(!0);try{r.Z.get("".concat(e,"/stock/list?search=").concat(R,"&limit=10&offset=").concat(10*a.selected)).then((function(e){g(e.data.data.medicines),Z(!1)})).catch((function(e){v().Notify.failure(e.message),Z(!1)}))}catch(s){v().Notify.failure(s.message),Z(!1)}}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),O=function(){var e=(0,c.Z)((0,n.Z)().mark((function e(){var t,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T([]),t=(0,n.Z)().mark((function e(){var t,c,l,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],0!=f[a].stock_info.length){e.next=7;break}c={id:f[a].id?f[a].id:"",name:f[a].name?f[a].name:"",manufacturer:f[a].manufacturer?f[a].manufacturer:"",max_stock_count:f[a].max_stock_count?f[a].max_stock_count:"",alert_stock_count:f[a].alert_stock_count?f[a].alert_stock_count:"",min_stock_count:f[a].min_stock_count?f[a].min_stock_count:""},console.log(c),void 0==w&&0==w.length?T(c):T((function(e){return[].concat((0,s.Z)(e),[c])})),e.next=14;break;case 7:l=(0,n.Z)().mark((function e(){var c,l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"",f[a].stock_info[r].current_stock?t.push(f[a].stock_info[r].current_stock):t=[],c=V(f[a].stock_info[r].expiry_date),l={id:f[a].id?f[a].id:"",name:f[a].name?f[a].name:"",manufacturer:f[a].manufacturer?f[a].manufacturer:"",max_stock_count:f[a].max_stock_count?f[a].max_stock_count:"",alert_stock_count:f[a].alert_stock_count?f[a].alert_stock_count:"",min_stock_count:f[a].min_stock_count?f[a].min_stock_count:"",CGST:f[a].stock_info[r].CGST?f[a].stock_info[r].CGST:"",CGST_rate:f[a].stock_info[r].CGST_rate?f[a].stock_info[r].CGST_rate:"",IGST:f[a].stock_info[r].IGST?f[a].stock_info[r].IGST:"",IGST_rate:f[a].stock_info[r].IGST_rate?f[a].stock_info[r].IGST_rate:"",SGST:f[a].stock_info[r].SGST?f[a].stock_info[r].SGST:"",SGST_rate:f[a].stock_info[r].SGST_rate?f[a].stock_info[r].SGST_rate:"",batch_no:f[a].stock_info[r].batch_no?f[a].stock_info[r].batch_no:"",channel:f[a].stock_info[r].channel?f[a].stock_info[r].channel:"",cost:f[a].stock_info[r].cost?f[a].stock_info[r].cost:"",current_stock:f[a].stock_info[r].current_stock?f[a].stock_info[r].current_stock:"",discount:f[a].stock_info[r].discount?f[a].stock_info[r].discount:"",expiry_date:f[a].stock_info[r].expiry_date?f[a].stock_info[r].expiry_date:"",free_qty:f[a].stock_info[r].free_qty?f[a].stock_info[r].free_qty:"",Batch_stock_id:f[a].stock_info[r].id?f[a].stock_info[r].id:"",mfd_date:f[a].stock_info[r].mfd_date?f[a].stock_info[r].mfd_date:"",mrp:f[a].stock_info[r].mrp?f[a].stock_info[r].mrp:"",purchase_entry_id:f[a].stock_info[r].purchase_entry_id?f[a].stock_info[r].purchase_entry_id:"",qty:f[a].stock_info[r].qty?f[a].stock_info[r].qty:"",rate:f[a].stock_info[r].rate?f[a].stock_info[r].rate:"",trade_discount:f[a].stock_info[r].trade_discount?f[a].stock_info[r].trade_discount:"",total_amount:f[a].stock_info[r].total_amount?f[a].stock_info[r].total_amount:"",totalstock:t||"",Days_to_expire:c||""},console.log(l),void 0==w&&0==w.length?T(l):T((function(e){return[].concat((0,s.Z)(e),[l])}));case 6:case"end":return e.stop()}}),e)})),r=0;case 9:if(!(r<f[a].stock_info.length)){e.next=14;break}return e.delegateYield(l(),"t0",11);case 11:r++,e.next=9;break;case 14:case"end":return e.stop()}}),e)})),a=0;case 3:if(!(a<f.length)){e.next=8;break}return e.delegateYield(t(),"t0",5);case 5:a++,e.next=3;break;case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(e){if(e)return e=e.split("-").reverse().join("-")},V=function(e){var t=function(e){if(e){var t=[];return e=e.split("-").reverse(),t.push(e[1]),t.push(e[0]),t.push(e[2]),t[0]+"/"+t[1]+"/"+t[2]}}(e),a=new Date,s=new Date(t),n=Math.abs(s-a),c=Math.ceil(Number(n)/864e5);return c=(Number(c)/30).toFixed(1)},U=function(e,t){if(e&&t){var a=0;return e.map((function(e){return a+=Number(e)})),a<=t?1:0}},Y=function(e){var t=0;return e.map((function(e){return t+=Number(e)})),t};(0,o.useEffect)((function(){!function(){try{r.Z.get("".concat(e,"/stock/list?search=").concat(R,"&limit=10&offset=0")).then((function(e){m(e.data.data.total_count_medicines),b(Math.round(e.data.data.total_count_medicines/10)+1),Z(!1)})).catch((function(e){v().Notify.warning(e),Z(!1)}))}catch(t){v().Notify.warning(t.message),Z(!1)}}(),Q(),O()}),[d,R]),(0,o.useEffect)((function(){O()}),[f]);var W=function(){"none"==F&&B("block"),"block"===F&&(B("none"),M())};return console.log(f,w),(0,u.jsxs)("div",{className:"p-0 m-0 vaccinestockinfo",children:[(0,u.jsxs)("div",{className:"position-absolute searchbutton",style:{top:"0.25rem",right:"1rem"},children:[(0,u.jsx)("input",{type:"text",className:" form-control d-inline vaccinesearch bg-pearl",placeholder:"Medicine Name",onChange:function(e){P(e.target.value)}}),(0,u.jsx)("button",{className:"btn searchbtn p-0 m-0 bg-transparent border-0 position-absolute",children:(0,u.jsx)("img",{src:"/images/search.png",alt:"displaying_image",className:"img-fluid p-0 m-0"})})]}),(0,u.jsx)("div",{className:"heading text-start ms-lg-5 ms-md-3 ms-1 text-charcoal fw-bold p-2",children:"Medicine Stock Info"}),(0,u.jsx)("div",{className:"scroll scroll-y p-0 m-0",style:{height:"57vh",minHeight:"57vh",maxHeight:"57vh"},children:(0,u.jsxs)("table",{className:"table datatable text-start",children:[(0,u.jsx)("thead",{className:"position-sticky top-0 bg-pearl",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"text-charcoal75 fw-bold",children:"No."}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bold",children:"ID"}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bold",children:"Medicine Name"}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bold",children:"Batch No."}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bold",children:"Expiry Date"}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bold",children:"MRP"}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bold",children:"Cost/Unit"}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bold",children:"B.Stock"}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bold",children:"T.Stock"}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bold text-center",children:"Expired in"}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bold text-center",children:"Stock Status"}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bold text-center"}),(0,u.jsx)("th",{className:"text-charcoal75 fw-bold text-center",children:"more info"})]})}),G?(0,u.jsxs)("tr",{className:"p-0 m-0",children:[(0,u.jsx)("td",{className:"placeholder-glow",children:(0,u.jsx)("div",{className:"placeholder col-12 p-0 m-0 w-100 px-1",children:"Loading.."})}),(0,u.jsx)("td",{className:"placeholder-glow",children:(0,u.jsx)("div",{className:"placeholder col-12 p-0 m-0 w-100 px-1",children:"Loading.."})}),(0,u.jsx)("td",{className:"placeholder-glow",children:(0,u.jsx)("div",{className:"placeholder col-12 p-0 m-0 w-100 px-1",children:"Loading.."})}),(0,u.jsx)("td",{className:"placeholder-glow",children:(0,u.jsx)("div",{className:"placeholder col-12 p-0 m-0 w-100 px-1",children:"Loading.."})}),(0,u.jsx)("td",{className:"placeholder-glow",children:(0,u.jsx)("div",{className:"placeholder col-12 p-0 m-0 w-100 px-1",children:"Loading.."})}),(0,u.jsx)("td",{className:"placeholder-glow",children:(0,u.jsx)("div",{className:"placeholder col-12 p-0 m-0 w-100 px-1",children:"Loading.."})}),(0,u.jsx)("td",{className:"placeholder-glow",children:(0,u.jsx)("div",{className:"placeholder col-12 p-0 m-0 w-100 px-1",children:"Loading.."})}),(0,u.jsx)("td",{className:"placeholder-glow",children:(0,u.jsx)("div",{className:"placeholder col-12 p-0 m-0 w-100 px-1",children:"Loading.."})}),(0,u.jsx)("td",{className:"placeholder-glow text-center",children:(0,u.jsx)("div",{className:"placeholder col-12 p-0 m-0 w-100 px-1",children:"Loading.."})}),(0,u.jsx)("td",{className:"placeholder-glow text-center",children:(0,u.jsx)("div",{className:"placeholder col-12 p-0 m-0 w-100 px-1",children:"Loading.."})}),(0,u.jsx)("td",{className:"placeholder-glow text-center",children:(0,u.jsx)("div",{className:"placeholder col-12 p-0 m-0 w-100 px-1",children:"Loading.."})})]}):void 0==w||0==w.length?(0,u.jsx)("tbody",{className:"",children:(0,u.jsx)("tr",{children:(0,u.jsx)("td",{className:"position-absolute text-charcoal fw-bolder start-0 end-0",children:"No Medicines Found"})})}):(0,u.jsx)("tbody",{className:"",children:w.map((function(e,t){return(0,u.jsxs)("tr",{className:"text-start align-middle",children:[(0,u.jsx)("td",{className:" text-charcoal fw-bold",children:t+1}),(0,u.jsxs)("td",{className:" text-charcoal fw-bold",children:["m",e.Batch_stock_id]}),(0,u.jsx)("td",{className:" text-charcoal fw-bold",children:e.name&&null!==e.name?e.name:""}),(0,u.jsx)("td",{className:" text-charcoal fw-bold",children:e.batch_no}),(0,u.jsx)("td",{className:" text-charcoal fw-bold",children:z(e.expiry_date)}),(0,u.jsx)("td",{className:" text-charcoal fw-bold",children:e.mrp}),(0,u.jsx)("td",{className:" text-charcoal fw-bold",children:e.cost}),(0,u.jsx)("td",{className:" text-charcoal fw-bold",children:e.current_stock}),(0,u.jsx)("td",{className:" text-charcoal fw-bold",children:e.totalstock?Y(e.totalstock):""}),(0,u.jsxs)("td",{className:"text-".concat(e.Days_to_expire?e.Days_to_expire:"burntumber"," fw-bold text-center"),children:[e.Days_to_expire?e.Days_to_expire:""," Months"]}),(0,u.jsx)("td",{className:" text-charcoal fw-bold text-center",children:1==U(e.totalstock,e.alert_stock_count)?(0,u.jsx)("img",{src:"images/exclamation.png",style:{width:"1.5rem"}}):(0,u.jsx)(u.Fragment,{})}),(0,u.jsx)("td",{className:"p-0 m-0 text-charcoal fw-bold align-items-center text-center ",children:(0,u.jsx)("div",{className:"vr rounded-1 align-self-center",style:{padding:"0.8px"}})}),(0,u.jsx)("td",{className:" bg-".concat(E==t?"lightyellow":""," p-0 m-0 text-charcoal fw-bold text-center"),children:(0,u.jsx)("button",{className:"btn p-0 m-0",onClick:function(){M(t),W()},children:(0,u.jsx)("img",{src:"images/info.png",style:{width:"1.5rem"}})})}),E==t?(0,u.jsx)("td",{className:"stockdetailsfrom bg-white border border-1 col-lg-11 rounded-4 shadow p-0 col-md-11 col-sm-11 col-10 col-xl-6 d-".concat(E==t?F:"none"," position-absolute start-0 end-0 top-0"),children:(0,u.jsx)(J,{toggle_detailsform:W,data:w[t]})}):(0,u.jsx)(u.Fragment,{})]})}))})]})}),(0,u.jsx)("div",{className:"container-fluid mt-2 d-flex justify-content-center",children:(0,u.jsx)(_(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:".",pageCount:x,marginPagesDisplayed:3,pageRangeDisplayed:2,onPageChange:Q,containerClassName:"pagination scroll align-self-center align-items-center",pageClassName:"page-item text-charcoal",pageLinkClassName:"page-link text-decoration-none text-charcoal border-charcoal rounded-1 mx-1",previousClassName:"btn button-charcoal-outline me-2",previousLinkClassName:"text-decoration-none text-charcoal",nextClassName:"btn button-charcoal-outline ms-2",nextLinkClassName:"text-decoration-none text-charcoal",breakClassName:"d-flex mx-2 text-charcoal fw-bold fs-4",breakLinkClassName:"text-decoration-none text-charcoal",activeClassName:"active "})})]})}function W(e){return(0,u.jsxs)("div",{className:" p-0 m-0 position-relative bg-seashell rounded-4",children:[(0,u.jsx)("h6",{className:"text-center text-charcoal fw-bold pt-2",children:e.data.name}),(0,u.jsx)("hr",{className:"p-0 m-0"}),(0,u.jsx)("button",{className:"btn-close position-absolute end-0 top-0 p-1 m-1",onClick:e.toggle_detailsform}),(0,u.jsx)("div",{className:"p-0 m-0 scroll py-4",children:(0,u.jsxs)("table",{className:"table text-center scroll",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"Channel"}),(0,u.jsx)("th",{children:"Expiry"}),(0,u.jsx)("th",{children:"Qty"}),(0,u.jsx)("th",{children:"MRP"}),(0,u.jsx)("th",{children:"Disc%"}),(0,u.jsx)("th",{children:"Rate"}),(0,u.jsx)("th",{className:"bg-seashell",children:"CGST"}),(0,u.jsx)("th",{className:"bg-seashell",children:"CGST%"}),(0,u.jsx)("th",{className:"bg-seashell",children:"SGST"}),(0,u.jsx)("th",{className:"bg-seashell",children:"SGST%"}),(0,u.jsx)("th",{className:"bg-seashell",children:"IGST"}),(0,u.jsx)("th",{className:"bg-seashell",children:"IGST%"}),(0,u.jsx)("th",{children:"Cost"}),(0,u.jsx)("th",{children:"Total Amt."})]})}),(0,u.jsx)("tbody",{children:(0,u.jsxs)("tr",{className:"p-0 m-0 px-1",children:[(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:1==e.data.channel?"Pharmacy":"Clinic"}),(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:e.data.expiry_date?function(e){if(e)return e=e.split("-").reverse().join("-")}(e.data.expiry_date):""}),(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:e.data.qty?e.data.qty:""}),(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:e.data.mrp?e.data.mrp:""}),(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:e.data.discount&&e.data.trade_discount?Number(e.data.discount)+Number(e.data.trade_discount):e.data.discount?e.data.discount:e.data.trade_discount}),(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:e.data.rate?e.data.rate:""}),(0,u.jsx)("td",{className:"p-0 m-0 px-1 bg-seashell",children:e.data.CGST?e.data.CGST:""}),(0,u.jsx)("td",{className:"p-0 m-0 px-1 bg-seashell",children:e.data.CGST?e.data.CGST_rate:""}),(0,u.jsx)("td",{className:"p-0 m-0 px-1 bg-seashell",children:e.data.SGST?e.data.SGST:""}),(0,u.jsx)("td",{className:"p-0 m-0 px-1 bg-seashell",children:e.data.SGST_rate?e.data.SGST_rate:""}),(0,u.jsx)("td",{className:"p-0 m-0 px-1 bg-seashell",children:e.data.IGST?e.data.IGST:""}),(0,u.jsx)("td",{className:"p-0 m-0 px-1 bg-seashell",children:e.data.IGST_rate?e.data.IGST_rate:""}),(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:e.data.cost?e.data.cost:""}),(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:e.data.total_amount?e.data.total_amount:""})]})})]})})]})}function J(e){var t=function(e){if(e)return e=e.split("-").reverse().join("-")};return console.log(e.data),(0,u.jsxs)("div",{className:" p-0 m-0 position-relative bg-seashell rounded-4",children:[(0,u.jsx)("h6",{className:"text-center text-charcoal fw-bold pt-2",children:e.data.name}),(0,u.jsx)("hr",{className:"p-0 m-0"}),(0,u.jsx)("button",{className:"btn-close position-absolute end-0 top-0 p-1 m-1",onClick:e.toggle_detailsform}),(0,u.jsxs)("p",{className:"bg-pearl m-0 p-0 border rounded-1 p-2 ms-3 mt-2 align-middle",style:{width:"fit-content"},children:[(0,u.jsx)("span",{className:"text-charocal fw-bold p-0 m-0",children:"Total"}),(0,u.jsx)("span",{className:"vr mx-2"}),(0,u.jsxs)("span",{className:"text-charocal fw-bold p-0 m-0",children:[" ",e.data.total_amount?e.data.total_amount:""]})]}),(0,u.jsx)("div",{className:"p-0 m-0 scroll",children:(0,u.jsxs)("table",{className:"table text-center scroll",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"Channel"}),(0,u.jsx)("th",{children:"Manuf."}),(0,u.jsx)("th",{children:"Expiry"}),(0,u.jsx)("th",{children:"MRP"}),(0,u.jsx)("th",{children:"Disc%"}),(0,u.jsx)("th",{children:"Rate"}),(0,u.jsx)("th",{children:"CGST%"}),(0,u.jsx)("th",{children:"CGST"}),(0,u.jsx)("th",{children:"SGST%"}),(0,u.jsx)("th",{children:"SGST"}),(0,u.jsx)("th",{children:"IGST%"}),(0,u.jsx)("th",{children:"IGST"}),(0,u.jsx)("th",{children:"Cost"}),(0,u.jsx)("th",{children:"Qty"}),(0,u.jsx)("th",{children:"Total Amt."})]})}),(0,u.jsx)("tbody",{children:(0,u.jsxs)("tr",{className:"p-0 m-0 px-1",children:[(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:1==e.data.channel?"Pharmacy":"Clinic"}),(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:e.data.mfd_date?t(e.data.mfd_date):""}),(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:e.data.expiry_date?t(e.data.expiry_date):""}),(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:e.data.mrp?e.data.mrp:""}),(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:e.data.discount&&e.data.trade_discount?Number(e.data.discount)+Number(e.data.trade_discount):e.data.discount?e.data.discount:e.data.trade_discount}),(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:e.data.rate?e.data.rate:""}),(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:e.data.CGST?e.data.CGST:""}),(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:e.data.CGST?e.data.CGST_rate:""}),(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:e.data.SGST?e.data.SGST:""}),(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:e.data.SGST_rate?e.data.SGST_rate:""}),(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:e.data.IGST?e.data.IGST:""}),(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:e.data.IGST_rate?e.data.IGST_rate:""}),(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:e.data.cost?e.data.cost:""}),(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:e.data.qty?e.data.qty:""}),(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:e.data.total_amount?e.data.total_amount:""})]})})]})})]})}function X(){var e,t=(0,o.useContext)(i.Pl),a=[{option:"Vaccines",display:t.vaccine_view},{option:"Medicines",display:t.medicine_view}],s=(0,o.useState)(0),n=(0,l.Z)(s,2),c=n[0],r=n[1];return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("section",{className:"stocksection pt-1",children:(0,u.jsx)("div",{className:"container-fluid",children:(0,u.jsx)("div",{className:"row gx-3",children:(0,u.jsx)("div",{className:"row m-0 p-0",children:a.map((function(e,t){return(0,u.jsx)("div",{className:"col-auto",children:(0,u.jsx)("button",{className:"btn btn-sm rounded-pill text-".concat(t===c?"light":"dark"," bg-").concat(t===c?"charcoal":"seashell"),onClick:function(e){return r(t)},children:e.option})})}))})})})}),(0,u.jsx)("section",{className:"tablesrender position-relative",children:(0,u.jsx)("div",{className:"container-fluid mt-lg-3 mt-md-3 mt-sm-2 mt-1",children:(0,u.jsx)("div",{className:"",children:(e=c,0===e?(0,u.jsx)("div",{className:"",children:(0,u.jsx)(K,{})}):1===e?(0,u.jsx)("div",{className:"",children:(0,u.jsx)($,{})}):(0,u.jsx)("div",{className:"fs-2",children:"Nothing Selected"}))})})})]})}function K(){}function $(){var e=(0,o.useContext)(i.Jx),t=(0,o.useContext)(i.Pl),a=(0,o.useState)(),s=(0,l.Z)(a,2),d=s[0],m=s[1],h=(0,o.useState)(),p=(0,l.Z)(h,2),x=p[0],b=p[1],N=(0,o.useState)([]),j=(0,l.Z)(N,2),f=j[0],g=j[1],y=(0,o.useState)(!1),w=(0,l.Z)(y,2),T=w[0],k=w[1],Z=(0,o.useState)(),I=(0,l.Z)(Z,2),D=I[0],R=I[1],P=(0,o.useState)("none"),A=(0,l.Z)(P,2),q=A[0],E=A[1],M=(0,o.useState)("none"),L=(0,l.Z)(M,2),H=L[0],F=L[1];var B=function(){var t=(0,c.Z)((0,n.Z)().mark((function t(a){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!=a&&void 0!=a.selected){t.next=13;break}return k(!0),t.prev=2,t.next=5,r.Z.get("".concat(e,"/medicine/list?limit=20&offset=0")).then((function(e){console.log(e.data.data),g(e.data.data.medicine),k(!1)}));case 5:t.next=11;break;case 7:t.prev=7,t.t0=t.catch(2),v().Notify.failure(t.t0.message),k(!1);case 11:t.next=23;break;case 13:return k(!0),t.prev=14,t.next=17,r.Z.get("".concat(e,"/medicine/list?limit=20&offset=").concat(20*a.selected)).then((function(e){console.log(e.data.data),g(e.data.data.medicine),k(!1)}));case 17:t.next=23;break;case 19:t.prev=19,t.t1=t.catch(14),v().Notify.failure(t.t1.message),k(!1);case 23:case"end":return t.stop()}}),t,null,[[2,7],[14,19]])})));return function(e){return t.apply(this,arguments)}}();(0,o.useEffect)((function(){!function(){try{r.Z.get("".concat(e,"/medicine/list?limit=20&offset=0")).then((function(e){m(e.data.data.total_count),b(Math.round(e.data.data.total_count/20)+1),k(!1)})).catch((function(e){v().Notify.warning(e),k(!1)}))}catch(t){v().Notify.warning(t.message),k(!1)}}(),B()}),[d]);var Q=function(){"block"==q&&E("none"),"none"==q&&E("block")},O=function(){"none"==H&&F("block"),"block"==H&&(F("none"),R())},z=function(){var t=(0,c.Z)((0,n.Z)().mark((function t(a){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.Z.post("".concat(e,"/medicine/delete"),{id:a}).then((function(e){v().Notify.success(e.data.message),console.log(e.data),B()}));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),v().Notify.failure(t.t0.message);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}();return(0,u.jsxs)("div",{className:"position-relative",children:[(0,u.jsx)("div",{className:"heading text-start ms-lg-5 ms-md-3 ms-sm-3 ms-1 text-charcoal fw-bold p-2",children:" Medicines List "}),(0,u.jsx)("div",{className:" p-0 m-0 align-self-center ms-1 position-absolute top-0 end-0 d-".concat(1==t.medicine_add?"":"none"," "),children:(0,u.jsxs)("button",{className:"button button-charcoal m-0 p-0 py-1 px-4",onClick:Q,children:[(0,u.jsx)("img",{src:"/images/addiconwhite.png",className:"p-0 m-0",alt:"displaying_image",style:{width:"1.5rem"}})," ","Medicine"]})}),(0,u.jsx)("div",{className:"scroll scroll-y p-0 m-0 overflow-scroll",style:{height:"57vh",minHeight:"57vh",maxHeight:"57vh"},children:(0,u.jsxs)("table",{className:"table datatable text-start",children:[(0,u.jsx)("thead",{className:"position-sticky top-0 bg-pearl",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{rowSpan:"2",className:"p-0 m-0 px-1 text-charcoal75 fw-bold d-".concat(1==t.medicine_edit?"":"none"),children:" Update "}),(0,u.jsx)("th",{rowSpan:"2",className:"p-0 m-0 px-1 text-charcoal75 fw-bold",children:" Display Name "}),(0,u.jsx)("th",{rowSpan:"2",className:"p-0 m-0 px-1 text-charcoal75 fw-bold",children:" Name "}),(0,u.jsx)("th",{rowSpan:"2",className:"p-0 m-0 px-1 text-charcoal75 fw-bold",children:" Salt Name "}),(0,u.jsx)("th",{rowSpan:"2",className:"p-0 m-0 px-1 text-charcoal75 fw-bold",children:" HSN Code "}),(0,u.jsx)("th",{rowSpan:"2",className:"p-0 m-0 px-1 text-charcoal75 fw-bold",children:" Manufacturer "}),(0,u.jsx)("th",{rowSpan:"2",className:"p-0 m-0 px-1 text-charcoal75 fw-bold d-".concat(1==t.medicine_delete?"":"none"),children:" Delete "})]})}),T?(0,u.jsxs)("tr",{className:"p-0 m-0",children:[(0,u.jsx)("td",{className:"placeholder-glow",children:(0,u.jsx)("div",{className:"placeholder col-12 p-0 m-0 w-100 px-1",children:" Loading.. "})}),(0,u.jsx)("td",{className:"placeholder-glow",children:(0,u.jsx)("div",{className:"placeholder col-12 p-0 m-0 w-100 px-1",children:" Loading.. "})}),(0,u.jsx)("td",{className:"placeholder-glow",children:(0,u.jsx)("div",{className:"placeholder col-12 p-0 m-0 w-100 px-1",children:" Loading.. "})}),(0,u.jsx)("td",{className:"placeholder-glow",children:(0,u.jsx)("div",{className:"placeholder col-12 p-0 m-0 w-100 px-1",children:" Loading.. "})}),(0,u.jsx)("td",{className:"placeholder-glow",children:(0,u.jsx)("div",{className:"placeholder col-12 p-0 m-0 w-100 px-1",children:" Loading.. "})}),(0,u.jsx)("td",{className:"placeholder-glow",children:(0,u.jsx)("div",{className:"placeholder col-12 p-0 m-0 w-100 px-1",children:" Loading.. "})})]}):void 0==f||0==f.length?(0,u.jsx)("tbody",{className:"",children:(0,u.jsx)("tr",{children:(0,u.jsx)("td",{className:"position-absolute text-charcoal fw-bolder start-0 end-0",children:"No Medicines Found"})})}):(0,u.jsx)("tbody",{className:"",children:f.map((function(e,a){return(0,u.jsxs)("tr",{className:" bg-".concat(a%2==0?"seashell":"pearl"," align-middle text-start"),children:[(0,u.jsx)("td",{className:"py-0 bg-".concat(D===a?"lightyellow":""," d-").concat(1==t.medicine_edit?"":"none"),children:(0,u.jsx)("button",{className:"btn m-0 p-0",onClick:function(e){O(),R(a)},children:(0,u.jsx)("img",{src:"/images/confirmed.png",alt:"displaying_image",className:"img-fluid",style:{width:"1.5rem"}},a)},a)}),(0,u.jsxs)("td",{className:" text-charcoal fw-bold",children:[" ",e.display_name&&null!==e.display_name?e.display_name:""," "]}),(0,u.jsxs)("td",{className:" text-charcoal fw-bold",children:[" ",e.name&&null!==e.name?e.name:""," "]}),(0,u.jsxs)("td",{className:" text-charcoal fw-bold",children:[" ",e.salt_name&&null!==e.salt_name?e.salt_name:""," "]}),(0,u.jsxs)("td",{className:" text-charcoal fw-bold",children:[" ",e.hsn_code&&null!==e.hsn_code?e.hsn_code:""," "]}),(0,u.jsxs)("td",{className:" text-charcoal fw-bold",children:[" ",e.manufacturer&&null!==e.manufacturer?e.manufacturer:""," "]}),(0,u.jsx)("td",{className:"d-".concat(1==t.medicine_delete?"":"none"),children:(0,u.jsx)("button",{className:"btn p-0 m-0",onClick:function(){var t,a;t=e.name,a=e.id,(0,S.H)(),v().Confirm.show("Add Charges and Payments","Do you surely want to delete Medicine ".concat(t),"Yes","No",(function(){z(a)}),(function(){return 0}),{})},children:(0,u.jsx)("img",{src:"/images/delete.png",style:{width:"1.5rem"}})})}),D==a?(0,u.jsx)("td",{className:" text-start  d-".concat(D==a?H:"none"," border position-absolute start-0 end-0 top-0 bg-seashell"),style:{padding:0,marginTop:"-8.15rem",zIndex:"2"},children:(0,u.jsx)(G,{medcinelist:B,ToggleUpdateMedicine:O,data:f[a]})}):(0,u.jsx)(u.Fragment,{})]})}))})]})}),(0,u.jsx)("section",{className:"position-absolute border-1 shadow start-0 bg-seashell rounded-1 end-0 d-".concat(q),style:{top:"-8.15rem",zIndex:"2"},children:(0,u.jsx)(C,{ToggleNewMedicine:Q})}),(0,u.jsx)("div",{className:"container-fluid d-flex justify-content-center mt-2",children:(0,u.jsx)(_(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:".",pageCount:x,marginPagesDisplayed:3,pageRangeDisplayed:2,onPageChange:B,containerClassName:"pagination scroll align-self-center align-items-center",pageClassName:"page-item text-charcoal",pageLinkClassName:"page-link text-decoration-none text-charcoal border-charcoal rounded-1 mx-1",previousClassName:"btn button-charcoal-outline me-2",previousLinkClassName:"text-decoration-none text-charcoal",nextClassName:"btn button-charcoal-outline ms-2",nextLinkClassName:"text-decoration-none text-charcoal",breakClassName:"d-flex mx-2 text-charcoal fw-bold fs-4",breakLinkClassName:"text-decoration-none text-charcoal",activeClassName:"active "})})]})}},9045:function(){}}]);
//# sourceMappingURL=266.ba050612.chunk.js.map