"use strict";(self.webpackChunkconnect_app=self.webpackChunkconnect_app||[]).push([[158],{3158:function(e,t,a){a.r(t);var c=a(1413),s=a(9439),n=a(9867),o=a(606),l=a(6626),r=a(7992),i=a.n(r),d=a(7548),h=a.n(d),m=a(5517),x=a(2834);t.default=function(){(0,n.useContext)(l.Pl);var e=(0,n.useContext)(l.U8),t=(0,n.useContext)(l.q2),a=(localStorage.getItem("id"),(0,n.useContext)(l.Jx)),r=(0,n.useRef)(),d=(0,n.useState)(),u=(0,s.Z)(d,2),p=u[0],f=u[1],b=(0,n.useState)(),g=(0,s.Z)(b,2),N=g[0],j=g[1],v=(0,n.useState)(),w=(0,s.Z)(v,2),y=w[0],k=w[1],C=(0,n.useState)(!1),_=(0,s.Z)(C,2),S=_[0],Z=_[1],L=(0,n.useState)([]),O=(0,s.Z)(L,2),P=O[0],R=O[1],q=(0,n.useState)([]),D=(0,s.Z)(q,2),H=D[0],E=D[1],I=(0,n.useState)(),T=(0,s.Z)(I,2),F=T[0],z=T[1],B=function(e){if(e)return e=e.split("-").reverse().join("-")};function G(t){if(void 0==t||void 0==t.selected){Z(!0);try{o.Z.get("".concat(a,"/reports/stock/report?location_id=").concat(p,"&limit=10&offset=0&from_date=").concat(N||e,"&to_date=").concat(y||(N||e))).then((function(e){var t=[],a=[],s=[],n=Object.keys(e.data.data.medicine).map((function(t){return(0,c.Z)({medicine_id:t},e.data.data.medicine[t])}));t.push(n);var o=Object.keys(e.data.data.vaccine).map((function(t){return(0,c.Z)({vaccine_id:t},e.data.data.vaccine[t])}));a.push(o),s.push(t),s.push(a),s=s.flat(),R(s.flat()),Z(!1)})).catch((function(e){i().Notify.warning(e.message),Z(!1)}))}catch(s){i().Notify.warning(s.message),Z(!1)}}else{Z(!0);try{o.Z.get("".concat(a,"/reports/stock/report?location_id=").concat(p,"&limit=25&offset=").concat(10*t.selected,"&from_date=").concat(N||e,"&to_date=").concat(y||(N||e))).then((function(e){R(e.data.data.medicine),Z(!1)})).catch((function(e){i().Notify.warning(e.message),Z(!1)}))}catch(s){i().Notify.warning(s.message),Z(!1)}}}(0,n.useEffect)((function(){!function(){Z(!0);try{o.Z.get("".concat(a,"/reports/stock/report?location_id=").concat(p,"&from_date=").concat(N||e,"&to_date=").concat(y||N||e)).then((function(e){z(e.data.data.count),E(Math.round(e.data.data.count/10)+1),Z(!1)})).catch((function(e){i().Notify.warning(e.message),Z(!1)}))}catch(t){i().Notify.warning(t.message),Z(!1)}}()}),[p,N,y]),(0,n.useEffect)((function(){G()}),[F]);var J=Object.keys(P).map((function(e){return(0,c.Z)({id:e},P[e])}));return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("h2",{className:" ms-3 text-charcoal fw-bolder mt-4",style:{width:"fit-content"},children:[" ",F," ",F>1?"Opening Stocks":"Opening Stock"," ","  "]}),(0,x.jsxs)("div",{className:"row p-0 m-0 ms-2 mt-2",children:[(0,x.jsx)("div",{className:"col-auto p-0 m-0 text-center fw-bolder bg-seashell rounded-2 align-self-center me-2 text-center ",children:(0,x.jsxs)("select",{className:"fw-bold button button-seashell text-burntumber text-center border-0",onChange:function(e){f(e.target.value)},style:{cursor:"pointer"},children:[(0,x.jsx)("option",{value:"Choose Location",children:"Choose Location"}),t.map((function(e){return(0,x.jsx)("option",{value:e.id,children:e.title})}))]})}),(0,x.jsx)("div",{className:"col-auto bg-seashell rounded-2",children:(0,x.jsxs)("div",{className:"row p-0 m-0 align-items-center align-self-center",children:[(0,x.jsx)("div",{className:"col-auto p-0 m-0 text-charcoal text-center fw-bolder bg-seashell ",children:(0,x.jsx)("input",{type:"date",placeholder:"fromdate",className:"button button-seashell rounded-0 text-charcoal text-center fw-bolder ",value:N||(e||""),onChange:function(e){j(e.target.value)}})}),(0,x.jsx)("div",{className:"col-auto p-0 m-0",children:"-"}),(0,x.jsx)("div",{className:"col-auto p-0 m-0  text-charcoal text-center fw-bolder bg-seashell",children:(0,x.jsx)("input",{type:"date",className:"button button-seashell rounded-0 text-charcoal text-center bg-seashell fw-bolder",value:y||(N||(e||"")),onChange:function(e){k(e.target.value)}})})]})}),(0,x.jsx)("div",{className:"col-auto p-0 m-0 export ms-xl-5 ms-lg-0 ",children:(0,x.jsx)(m.DownloadTableExcel,{filename:"".concat(B(N)+" to "+B(y)," StockReports"),sheet:"StockReports",currentTableRef:r.current,children:(0,x.jsx)("button",{className:"button button-seashell  fw-bold",children:" Export"})})})]}),(0,x.jsx)("div",{className:"scroll scroll-y p-0 m-0 mt-2",style:{minHeight:"40vh",height:"58vh",maxHeight:"70vh"},children:(0,x.jsxs)("table",{className:"table text-start table-responsive",ref:r,children:[(0,x.jsx)("thead",{className:" p-0 m-0 position-sticky top-0 bg-pearl",children:(0,x.jsxs)("tr",{className:" ",children:[(0,x.jsx)("th",{className:"text-charcoal75 fw-bolder p-0 m-0 px-1",children:" Item ID "}),(0,x.jsx)("th",{className:"text-charcoal75 fw-bolder p-0 m-0 px-1",children:" Item Name "}),(0,x.jsx)("th",{className:"text-charcoal75 fw-bolder p-0 m-0 px-1",children:" Stock Type "}),(0,x.jsx)("th",{className:"text-charcoal75 fw-bolder p-0 m-0 px-1",children:" Party "}),(0,x.jsx)("th",{className:"text-charcoal75 fw-bolder p-0 m-0 px-1",children:" Batch "}),(0,x.jsx)("th",{className:"text-charcoal75 fw-bolder p-0 m-0 px-1",children:" Stock Qty "}),(0,x.jsx)("th",{className:"text-charcoal75 fw-bolder p-0 m-0 px-1",children:" Rate "}),(0,x.jsx)("th",{className:"text-charcoal75 fw-bolder p-0 m-0 px-1",children:" Total "})]})}),S?(0,x.jsx)("tbody",{className:"text-center",style:{minHeight:"55vh",height:"55vh"},children:(0,x.jsx)("tr",{className:"position-absolute border-0 start-0 end-0 px-5",children:(0,x.jsxs)("div",{class:"d-flex align-items-center spinner",children:[(0,x.jsx)("strong",{className:"",style:{fontSize:"1rem"},children:"Getting Details please be Patient ..."}),(0,x.jsx)("div",{className:"spinner-border ms-auto",role:"status","aria-hidden":"true"})]})})}):P&&0!=P.length?(0,x.jsx)("tbody",{children:J.map((function(e,t){return(0,x.jsxs)("tr",{className:" bg-".concat(t%2==0?"seashell":"pearl"," align-middle"),children:[(0,x.jsxs)("td",{className:"text-charcoal fw-bold",children:[void 0!=e.id?e.id:""," "]}),(0,x.jsx)("td",{className:"text-charcoal fw-bold",children:void 0!=e.item_name?e.item_name:""}),(0,x.jsx)("td",{className:"text-charcoal fw-bold",children:" "}),(0,x.jsxs)("td",{className:"text-charcoal fw-bold",children:[void 0!=e.distributor?e.distributor:""," "]}),(0,x.jsxs)("td",{className:"text-charcoal fw-bold",children:[void 0!=e.batch?e.batch:""," "]}),(0,x.jsx)("td",{className:"text-charcoal fw-bold",children:void 0!=e.opening_qty?e.opening_qty:""}),(0,x.jsxs)("td",{className:"text-charcoal fw-bold",children:[void 0!=e.rate?Number(e.rate).toFixed(2):""," "]}),(0,x.jsxs)("td",{className:"text-charcoal fw-bold",children:[" ",void 0!=e.rate&&void 0!=e.opening_qty?(Number(e.opening_qty)*Number(e.rate)).toFixed(2):""]})]},t)}))}):(0,x.jsx)("tbody",{className:"text-center p-0 m-0",style:{minHeight:"55vh",maxHeight:"55vh"},children:(0,x.jsx)("div",{className:"position-absolute border-0 start-0 end-0 mx-3 p-2",children:(0,x.jsx)("strong",{className:"text-charcoal fw-bolder text-center",children:" No Opening Stocks "})})})]})}),(0,x.jsx)("div",{className:"container-fluid mt-2 d-flex justify-content-center",children:(0,x.jsx)(h(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:".",pageCount:H,marginPagesDisplayed:3,pageRangeDisplayed:2,onPageChange:G,containerClassName:"pagination scroll align-self-center align-items-center",pageClassName:"page-item text-charcoal",pageLinkClassName:"page-link text-decoration-none text-charcoal border-charcoal rounded-1 mx-1",previousClassName:"btn button-charcoal-outline me-2",previousLinkClassName:"text-decoration-none text-charcoal",nextClassName:"btn button-charcoal-outline ms-2",nextLinkClassName:"text-decoration-none text-charcoal",breakClassName:"d-flex mx-2 text-charcoal fw-bold fs-4",breakLinkClassName:"text-decoration-none text-charcoal",activeClassName:"active "})})]})}}}]);
//# sourceMappingURL=158.917b602f.chunk.js.map