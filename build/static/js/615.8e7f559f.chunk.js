"use strict";(self.webpackChunkconnect_app=self.webpackChunkconnect_app||[]).push([[615],{9615:function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var a=n(4165),s=n(5861),o=n(9439),l=n(9867),i=n(606),c=n(8238),r=n(6626),d=n(7992),m=n.n(d),p=(n(6479),n(4012)),u=n(2834),h=function(e){(0,l.useRef)(null);var t=localStorage.getItem("ClinicId"),n=localStorage.getItem("id"),c=(0,l.useContext)(r.Jx),d=(0,l.useContext)(r.BV),h=(0,l.useContext)(r.j8),x=(0,l.useContext)(r.zS),f=(0,l.useState)([]),g=(0,o.Z)(f,2),b=g[0],j=g[1],N=(0,l.useState)(),v=(0,o.Z)(N,2),y=(v[0],v[1],(0,l.useState)([])),w=(0,o.Z)(y,2),_=(w[0],w[1],(0,l.useState)("none")),C=(0,o.Z)(_,2),Z=(C[0],C[1],(0,l.useState)()),k=(0,o.Z)(Z,2),S=(k[0],k[1],(0,l.useState)()),A=(0,o.Z)(S,2),P=A[0],L=A[1],F=(0,l.useState)(t),D=(0,o.Z)(F,2),E=D[0],z=(D[1],(0,l.useState)()),T=(0,o.Z)(z,2),B=T[0],M=T[1],W=(0,l.useState)(),G=(0,o.Z)(W,2),I=G[0],U=G[1],O=(0,l.useState)(),R=(0,o.Z)(O,2),J=R[0],H=R[1],V=(0,l.useState)(),$=(0,o.Z)(V,2),Q=$[0],Y=$[1],q=(0,l.useState)(),K=(0,o.Z)(q,2),X=K[0],ee=K[1];function te(e){return(e=e.toString().match(/^([01]\d|2[0-3])(:)([0-5]\d)(:[0-5]\d)?$/)||[e]).length>1&&((e=e.slice(1))[3]=+e[0]<12?" AM ":" PM ",e[0]=+e[0]%12||12),e.join("")}(0,l.useEffect)((function(){i.Z.get("".concat(c,"/clinic/list")).then((function(e){j(e.data.data)}))}),[]);var ne=(0,l.useRef)(),ae=(0,l.useRef)(),se=(0,l.useState)(!1),oe=(0,o.Z)(se,2),le=oe[0],ie=oe[1];function ce(){return re.apply(this,arguments)}function re(){return(re=(0,s.Z)((0,a.Z)().mark((function t(){var n,s;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(L(e.appointmentdoctorid),ne.current.value="",ae.current.value=e.appointmentdoctorid,n=[],Y([]),s=0;s<d.length;s++)d[s].id===Number(e.appointmentdoctorid)&&n.push(d[s].month_timeslots);Y(n),ie(!0);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function de(){return(de=(0,s.Z)((0,a.Z)().mark((function t(){var n,s;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(ee(),n=[],Q){for(s=0;s<Q[0].length;s++)Q[0][s].date===e.appointmentdate&&n.push([Q[0][s].id,Q[0][s].time_from,Q[0][s].booking_status]);ee(n),ie(!1)}case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}(0,l.useEffect)((function(){ce(),ne.current.value=e.appointmentdate}),[1]),(0,l.useEffect)((function(){!function(){de.apply(this,arguments)}()}),[le]);function me(){return(me=(0,s.Z)((0,a.Z)().mark((function e(t){var n,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(L(t.target.value),ne.current.value="",n=[],Y([]),s=0;s<d.length;s++)d[s].id===Number(t.target.value)&&n.push(d[s].month_timeslots);Y(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(){return(pe=(0,s.Z)((0,a.Z)().mark((function e(t){var n,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(ee([]),n=[],s=0;s<Q[0].length;s++)Q[0][s].date===t.target.value&&n.push([Q[0][s].id,Q[0][s].time_from,Q[0][s].booking_status]);ee(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(t){if(e.appointmentid&&P&&E&&B&&n&&null!=e.patientid&&0!=e.patientid)try{H(!0),i.Z.post("".concat(c,"/update/appointment"),{appointment_id:e.appointmentid,doctor_id:P,clinic_id:E,timeslot_id:B,patient_id:e.patientid,admin_id:n}).then((function(t){t?(e.fetchallAppointmentslist(),e.closeappointmentform(),H(!1),e.fetchapi(),m().Notify.success(t.data.message)):(H(!1),m().Notify.alert("Failed to Update"))}))}catch(t){alert(t),H(!1)}else m().Notify.warning("Please Fill all Detais"),H(!1)}var he=function(e){for(var t=0;t<x.length;t++)if(void 0!==x[t][0]&&x[t][0]==e)return"charcoal"},xe=function(e){for(var t=0;t<x.length;t++)if(void 0!==x[t][0]&&x[t][0]==e)return"(Aval today) "};return(0,u.jsxs)("div",{className:"fw-light text-start position-relative p-0 m-0",children:[(0,u.jsxs)("h5",{className:"text-center pt-2",children:["Update ",e.patientname," Appointment Details"]}),(0,u.jsx)("button",{type:"button",className:"btn-close closebtn position-absolute top-0 mb-3","aria-label":"Close",disabled:1==J,onClick:e.closeappointmentform}),(0,u.jsx)("hr",{className:"p-0 m-0"}),(0,u.jsxs)("div",{className:"col-12 ps-1",children:[(0,u.jsx)("div",{className:"col-12 clinics bg-seashell align-self-center border-0 ps-2",children:b.map((function(e,n){return(0,u.jsx)("div",{className:"d-".concat(t==e.id?"block":"none"," "),children:(0,u.jsxs)("div",{className:"row p-0 m-0 align-items-center",children:[(0,u.jsx)("div",{className:"col-auto p-0 m-0 me-1",children:(0,u.jsx)("img",{src:"/images/location.png"})}),(0,u.jsxs)("div",{className:"col-auto p-0 m-0 fw-bold mt-1",style:{letterSpacing:"1px"},children:[e.title," ",e.address]})]})},n)}))}),(0,u.jsxs)("div",{className:"row p-0 m-0 mt-2 pe-2",children:[(0,u.jsxs)("div",{className:"col-md-4 col-4 ",children:[(0,u.jsx)("label",{className:"fw-bold",style:{letterSpacing:"1px"},children:"Selected Doctor"}),(0,u.jsx)("div",{className:"col-12",children:(0,u.jsxs)("select",{className:"col-10 form-control button-charcoal-outline rounded-1",ref:ae,onChange:function(e){return me.apply(this,arguments)},children:[(0,u.jsx)("option",{defaultValue:"Select Doctor",children:"Select Doctor"}),x?h.map((function(t,n){return(0,u.jsxs)("option",{className:" text-".concat(he(t[0])?"pearl":he(t[0])," bg-").concat(he(t[0])?he(t[0]):"seashell"),name:he(t[0])?"Currently Avaliable":"",selected:t[0]===e.appointmentdoctorid,value:t[0],children:[t[0],".",t[1]," ",xe(t[0])]})})):(0,u.jsx)("div",{children:"Loading..."})]})})]}),(0,u.jsxs)("div",{className:"col-md-auto col-4 m-0 p-0",children:[(0,u.jsx)("label",{className:"fw-bold",style:{letterSpacing:"1px"},children:"Selected Date"}),(0,u.jsx)("div",{className:"col-12",children:(0,u.jsx)("input",{type:"date",ref:ne,className:"form-control border-charcoal bg-seashell  rounded-1",onChange:function(e){return pe.apply(this,arguments)}})})]}),(0,u.jsxs)("div",{className:"col-md-3 col-lg-3 col-4",children:[(0,u.jsx)("label",{className:"fw-bold text-charcoal50",style:{letterSpacing:"1px"},children:"Selected Time"}),(0,u.jsx)("div",{className:"col-12",children:(0,u.jsx)("button",{className:"button button-charcoal50 shadow-none",disabled:!0,children:e.appointmenttime})})]})]}),(0,u.jsx)("p",{className:"m-0 p-0 mb-md-2 mt-2 ps-2 fw-bold",style:{letterSpacing:"1px"},children:"Select new Time Slot"}),(0,u.jsx)("div",{className:"scroll align-items-center justify-content-around col-12 ms-2",children:X&&0!==X.length?(0,u.jsxs)(u.Fragment,{children:[X.map((function(e,t){return 0==e[2]?(0,u.jsx)("button",{style:{letterSpacing:"1px"},className:"button-sm button-".concat(I==t?"charcoal":"charcoal-outline"," rounded-1 px-3 py-2 fw-bold  m-1"),id:t,value:e[0],onClick:function(e){!function(e){e.preventDefault(),M(e.target.value)}(e),U(t)},children:te(e[1])}):(0,u.jsx)("button",{style:{letterSpacing:"1px"},disabled:!0,className:"button-sm button-charcoa50 px-3 py-2 fw-bold m-1 rounded-1",id:t,value:e[0],children:te(e[1])})})),(0,u.jsxs)("button",{className:"btn btn-sm done m-1 d-none",children:[(0,u.jsx)("img",{src:"/images/addicon.png",alt:"displaying_image",className:"mb-1 me-1",style:{width:"1.2rem"}})," Time Slot"]})]}):(0,u.jsx)("div",{className:"p-2 w-100 m-0",children:(0,u.jsx)("button",{className:"button rounded fw-bold text-burntumber button-lightred",children:"No timeslots Avaliable"})})}),(0,u.jsx)("hr",{}),(0,u.jsx)("div",{className:"row m-0 p-0",children:J?(0,u.jsx)("div",{className:"col-6 py-2 pb-2 m-auto text-center",children:(0,u.jsx)("div",{class:"spinner-border",role:"status",children:(0,u.jsx)("span",{class:"visually-hidden",children:"Loading..."})})}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"col-auto py-2 pb-2 m-auto text-center",children:(0,u.jsx)("button",{className:"btn button-charcoal",onClick:function(t){t.preventDefault(),(0,p.H)(),m().Confirm.show("Update Appointment Details","Do you surely want to update ".concat(e.patientname," Appointment Details"),"Yes","No",(function(){ue()}),(function(){return 0}),{})},children:"Done"})}),(0,u.jsx)("div",{className:"col-auto py-2 pb-2 m-auto text-center",children:(0,u.jsx)("button",{className:"btn button-pearl",onClick:ce,children:"Set Previous"})})]})})]})]})},x=n(3433),f=(n(9371),function(e){var t=(0,l.useContext)(r.Jx),n=localStorage.getItem("id"),c={description:"",amount:0,discount:0,cgst:0,sgst:0,gross_amount:0,id:""},d={paymentmethod:"",amount:0},h=(0,l.useState)(!1),f=(0,o.Z)(h,2),g=f[0],b=f[1],j=(0,l.useState)(),N=(0,o.Z)(j,2),v=N[0],y=N[1],w=(0,l.useState)([]),_=(0,o.Z)(w,2),C=_[0],Z=_[1],k=(0,l.useState)(""),S=(0,o.Z)(k,2),A=S[0],P=S[1],L=(0,l.useState)(0),F=(0,o.Z)(L,2),D=F[0],E=F[1],z=(0,l.useState)(0),T=(0,o.Z)(z,2),B=T[0],M=T[1],W=(0,l.useState)(0),G=(0,o.Z)(W,2),I=G[0],U=G[1],O=(0,l.useState)(0),R=(0,o.Z)(O,2),J=R[0],H=R[1],V=(0,l.useState)(e.doctorfee),$=(0,o.Z)(V,2),Q=$[0],Y=$[1],q=(0,l.useState)(),K=(0,o.Z)(q,2),X=K[0],ee=K[1],te=(0,l.useState)(),ne=(0,o.Z)(te,2),ae=ne[0],se=ne[1],oe=(0,l.useState)([]),le=(0,o.Z)(oe,2),ie=le[0],ce=le[1],re=(0,l.useState)(),de=(0,o.Z)(re,2),me=de[0],pe=de[1];function ue(){return(ue=(0,s.Z)((0,a.Z)().mark((function t(){var n,s;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=[],s=0;s<e.appointmentdata.other_charges.length;s++)n.push({description:null!=e.appointmentdata.other_charges[s].description?e.appointmentdata.other_charges[s].description:"N/A",amount:null!=e.appointmentdata.other_charges[s].total_amount?e.appointmentdata.other_charges[s].total_amount:0,discount:null!=e.appointmentdata.other_charges[s].discount?e.appointmentdata.other_charges[s].discount:0,cgst:null!=e.appointmentdata.other_charges[s]&&null!=e.appointmentdata.other_charges[s].gst_rate?e.appointmentdata.other_charges[s].gst_rate/2:0,sgst:null!=e.appointmentdata.other_charges[s]&&null!=e.appointmentdata.other_charges[s].gst_rate?e.appointmentdata.other_charges[s].gst_rate/2:0,gross_amount:e.appointmentdata.other_charges[s].final_amount&&null!==e.appointmentdata.other_charges[s].final_amount?e.appointmentdata.other_charges[s].final_amount:"",id:e.appointmentdata.other_charges[s].id&&null!=e.appointmentdata.other_charges[s].id?e.appointmentdata.other_charges[s].id:""});U(e.appointmentdata.aartas_discount),E(e.appointmentdata.doc_discount),P(e.appointmentdata.cons_text),Z(n);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function he(){return he=(0,s.Z)((0,a.Z)().mark((function t(){var n,s,o,l,i;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=[],o=[],(n=[]).push(Object.keys(JSON.parse(e.appointmentdata.payment_method_details))),s.push(Object.values(JSON.parse(e.appointmentdata.payment_method_details))),l=[],{paymentmethod:"",amount:0},n[0]){for(i=0;i<n[0].length;i++)o.push({paymentmethod:n[0][i],amount:s[0][i]});ce(o)}ie.push(l);case 9:case"end":return t.stop()}}),t)}))),he.apply(this,arguments)}function xe(){return(xe=(0,s.Z)((0,a.Z)().mark((function n(s){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!C[s].id){n.next=6;break}return Z([]),n.next=4,i.Z.post("".concat(t,"/appointment/delete/extra/charges"),{id:C[s].id}).then((function(t){Z([]),C.splice(s,s),m().Notify.success(t.data.message),e.Appointmentlist()}));case 4:n.next=7;break;case 6:C.splice(s,s);case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function fe(e,t,n,a){Z((function(e){return(0,x.Z)(e)}));var s=n||0,o=(e||0)-(t||0);return o=(o+=s=(s+(a||0))*o/100).toFixed(2)}function ge(){for(var e=[],t=0,n=0;n<C.length;n++)e.push((Number(C[n].gross_amount)-(Number(C[n].amount)-Number(C[n].discount)))/2);return e.forEach((function(e){t+=e})),t=t.toFixed(2)}function be(){var e=0,t=Number(I)+Number(D)+Number(B);return C.map((function(t){return e+=Number(t.gross_amount)})),e=(e=e+Number(Q)-t).toFixed(2)}function je(){return je=(0,s.Z)((0,a.Z)().mark((function o(){var l,c,r,d,p,u,h,x,f,g,b,j,N,v,y,w,_,k,S,P;return(0,a.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:for(P=function(){return(P=(0,s.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,pe(!0),n.next=4,i.Z.post("".concat(t,"/appointment/save/charges"),k).then((function(t){e.Appointmentlist(),e.setsingleload(0),Z([]),m().Notify.success(t.data.message),pe(!1)}));case 4:n.next=10;break;case 6:n.prev=6,n.t0=n.catch(0),m().Notify.failure(n.t0.message),pe(!1);case 10:case"end":return n.stop()}}),n,null,[[0,6]])})))).apply(this,arguments)},S=function(){return P.apply(this,arguments)},l=be(),l=Number(l),c=Number(e.doctorfee),r=Number(D),d=Number(I),p=ge(),u=ge(),h=[],x=[],f=[],g=[],b=[],j=[],N=[],v=0;v<C.length;v++)h.push(C[v].description),x.push(Number(C[v].amount)),f.push(Number(C[v].discount)),b.push(Number(C[v].amount)-Number(C[v].discount)),C[v].id&&j.push(Number(C[v].id)),C[v].cgst&&C[v].sgst?N.push(Number(C[v].cgst+C[v].sgst)):N.push(0),g.push(C[v].gross_amount);for(y=[],w=[],_=0;_<ie.length;_++)y.push(ie[_].paymentmethod),w.push(Number(ie[_].amount));k={appointment_id:e.appointmentid,g_total_main:l,cons_fee:c,description:h,total_amount:x,discount:f,amount:b,doc_dis:r,aartas_discount:d,payment_method:y,payment_method_main:y,payment_method_details:w,SGST:Number(u),CGST:Number(p),admin_id:Number(n),cons_text:A,add_to_cart:J,show_cons_fee:Q==e.doctorfee?1:0,ot_id:j,gst_rate:N,final_amount:g},S();case 22:case"end":return o.stop()}}),o)}))),je.apply(this,arguments)}(0,l.useEffect)((function(){!function(){ue.apply(this,arguments)}(),function(){he.apply(this,arguments)}()}),[]);function Ne(){return(Ne=(0,s.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:b(!0),i.Z.post("".concat(t,"/advance/balance"),{patient_id:e.patientid}).then((function(e){b(!1),y(e.data.data)}));case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return(0,l.useEffect)((function(){!function(){Ne.apply(this,arguments)}()}),[]),(0,u.jsxs)("div",{className:"bg-seashell p-0 m-0",children:[(0,u.jsxs)("h5",{className:"text-charcoal mt-2 fw-bold text-start ps-3",children:[e.patientname," Bill"]}),(0,u.jsx)("button",{className:"btn btn-close position-absolute top-0 end-0 me-2 mt-1 ",onClick:function(){e.toggle_bill()}}),(0,u.jsx)("hr",{className:"p-0 m-0"}),(0,u.jsxs)("div",{className:"scroll",children:[e.isLoading?(0,u.jsx)("div",{className:"col-6 py-2 pb-2 m-auto text-center",children:(0,u.jsx)("div",{class:"spinner-border spinner-border-sm",role:"status",children:(0,u.jsx)("span",{class:"visually-hidden",children:"Loading..."})})}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"container-fluid text-start px-3 py-2 position-relative",children:[(0,u.jsx)("h6",{className:"fw-bold text-charcoal",children:"Consultation"}),(0,u.jsxs)("label",{className:"position-absolute end-0 top-0 mt-2 me-4 text-cahrcoal fw-bolder",children:[(0,u.jsx)("input",{className:"form-check-input me-1 ",type:"checkbox",disabled:!0,checked:Q,onClick:Q==e.doctorfee?function(){return Y(0)}:function(){return Y(e.doctorfee)}}),"Add Consultation Amount"]}),(0,u.jsxs)("div",{className:"row p-0 m-0 justify-content-between",children:[(0,u.jsxs)("div",{className:"col-8 ps-0 ",children:[(0,u.jsx)("label",{className:"text-charcoal75 fw-bold",children:"Consultation text"}),(0,u.jsx)("input",{className:"form-control bg-seashell fw-bold border-0",disabled:!0,value:A||"",onChange:function(e){return P(e.target.value)}})]}),(0,u.jsxs)("div",{className:"col-4 pe-0 ",children:[(0,u.jsx)("label",{className:"text-charcoal75 fw-bold",children:"Doctor's Consultation Charge"}),(0,u.jsx)("input",{className:"form-control bg-seashell fw-bold border-0",disabled:!0,value:Q})]})]})]}),(0,u.jsxs)("div",{className:"container-fluid text-start p-2 ps-3",children:[(0,u.jsx)("h6",{className:"fw-bolder text-charcoal",children:"Discounts"}),(0,u.jsxs)("div",{className:"row p-0 m-0",children:[(0,u.jsxs)("div",{className:"col-4 ps-0",children:[(0,u.jsx)("label",{className:"text-charcoal75 fw-bold",children:"Coupon"}),(0,u.jsx)("input",{className:"form-control border-0 fw-bold text-burntumber text-start",disabled:!0,value:B||"",onChange:function(e){return M(e.target.value)}})]}),(0,u.jsxs)("div",{className:"col-4",children:[(0,u.jsx)("label",{className:"text-charcoal75 fw-bold",children:"Doctor"}),(0,u.jsx)("input",{className:"form-control bg-seashell fw-bold text-burntumber text-start border-0",disabled:!0,value:D||"",onChange:function(e){return E(e.target.value)}})]}),(0,u.jsxs)("div",{className:"col-4",children:[(0,u.jsx)("label",{className:"text-charcoal75 fw-bold",children:"Aartas"}),(0,u.jsx)("input",{className:"form-control bg-seashell fw-bold text-burntumber text-start border-0",disabled:!0,value:I||"",onChange:function(e){return U(e.target.value)}})]})]})]}),(0,u.jsx)("div",{className:"container-fluid text-start p-2",children:(0,u.jsxs)("div",{className:"bg-seashell position-relative",children:[(0,u.jsxs)("div",{className:"row p-0 m-0 align-items-center mb-2",children:[(0,u.jsx)("div",{className:"col-auto p-0 m-0 ps-2 pe-1",children:(0,u.jsx)("h6",{className:" p-0 m-0 text-charcoal fw-bolder",children:"Extra Charges"})}),(0,u.jsx)("div",{className:"col-auto p-0 m-0 d-none",children:(0,u.jsx)("button",{className:"btn p-0 m-0 py-0",onClick:function(){return Z((function(e){return[].concat((0,x.Z)(e),[c])}))},children:(0,u.jsx)("img",{src:"/images/add.png",className:"img-fluid",style:{width:"2rem"}})})})]}),e.isLoading?(0,u.jsx)("div",{className:"col-6 py-2 pb-2 m-auto text-center",children:(0,u.jsx)("div",{class:"spinner-border spinner-border-sm",role:"status",children:(0,u.jsx)("span",{class:"visually-hidden",children:"Loading..."})})}):C.map((function(e,t){return(0,u.jsx)("div",{className:"container-fluid p-0 m-0",children:(0,u.jsxs)("div",{className:"row p-0 m-0",children:[(0,u.jsxs)("div",{className:"col-2",children:[(0,u.jsx)("label",{className:"fw-bold text-charcoal75 text-start ps-1",children:"Description"}),(0,u.jsx)("input",{className:"form-control bg-seashell m-0 text-start fw-bold border-0 ",disabled:!0,value:e.description?e.description:"",onChange:function(t){e.description=t.target.value,fe(e.amount,e.discount,e.cgst,e.sgst)}})]}),(0,u.jsxs)("div",{className:"col-2",children:[(0,u.jsx)("label",{className:"fw-bold text-charcoal75 text-start ps-1",children:"Amount"}),(0,u.jsx)("input",{type:"number",className:"form-control text-start bg-seashell m-0 fw-bold border-0 ",disabled:!0,value:e.amount?e.amount:"",onChange:function(t){e.amount=t.target.value,e.gross_amount=fe(e.amount,e.discount,e.cgst,e.sgst)}})]}),(0,u.jsxs)("div",{className:"col-2 ",children:[(0,u.jsx)("label",{className:"fw-bold text-charcoal75 text-start ps-1",children:"Discount"}),(0,u.jsx)("input",{type:"number",className:"form-control text-start bg-seashell m-0 fw-bold border-0 ",disabled:!0,value:e.discount?e.discount:"",onChange:function(t){e.discount=t.target.value,e.gross_amount=fe(e.amount,e.discount,e.cgst,e.sgst)}})]}),(0,u.jsxs)("div",{className:"col-2",children:[(0,u.jsx)("label",{className:"fw-bold text-charcoal75 text-start ps-1",children:"GST %"}),(0,u.jsx)("input",{type:"number",className:"form-control text-start bg-seashell m-0 fw-bold border-0 ",disabled:!0,value:e.cgst&&e.sgst?e.cgst+e.sgst:"",onChange:function(t){e.cgst=t.target.value/2,e.sgst=t.target.value/2,e.gross_amount=fe(e.amount,e.discount,e.cgst,e.sgst)}})]}),(0,u.jsxs)("div",{className:"col-2 p-0 align-self-end ",children:[(0,u.jsxs)("div",{className:"row p-0 m-0 ",children:[(0,u.jsx)("div",{className:"col-6 p-0 m-0 fw-bold text-charcoal75 text-end",children:"Amount:"}),(0,u.jsx)("input",{type:"number",className:"col-6 p-0 border-0 text-start bg-seashell m-0 ps-1 fw-bold text-burntumber border-0",disabled:!0,style:{letterSpacing:"1px"},value:e.amount&&e.discount?e.amount-e.discount:"",onChange:function(t){e.gross_amount=fe(e.amount,e.discount,e.cgst,e.sgst)}})]}),(0,u.jsxs)("div",{className:"row p-0 m-0",children:[(0,u.jsx)("div",{className:"col-6 p-0 m-0 fw-bold text-charcoal75 text-end",children:"incl. gst:"}),(0,u.jsx)("input",{className:"col-6 p-0 border-0 m-0 text-start bg-seashell ps-1 fw-bold text-burntumber",disabled:!0,style:{letterSpacing:"1px"},value:e.gross_amount?e.gross_amount:""})]})]}),(0,u.jsx)("div",{className:"col-1 align-self-end d-none",children:(0,u.jsx)("button",{className:"btn btn-sm p-0 m-0",onClick:function(){!function(e){xe.apply(this,arguments)}(t),ce((function(e){return(0,x.Z)(e)}))},children:(0,u.jsx)("img",{src:"/images/delete.png",className:"img-fluid",style:{width:"1.5rem"}})})})]})})}))]})}),(0,u.jsx)("div",{className:"container-fluid text-start my-2  py-1 rounded-1 w-auto mx-3",children:(0,u.jsx)("div",{className:"row p-0 m-0 align-items-center",children:(0,u.jsx)("div",{className:"col-auto",children:(0,u.jsxs)("div",{className:"row p-0 m-0",children:[(0,u.jsx)("div",{className:"col-auto p-0 m-0",children:(0,u.jsxs)("div",{className:"row p-0 m-0",children:[(0,u.jsx)("div",{className:"col-auto p-0 m-0 align-self-center",children:(0,u.jsx)("label",{className:"text-burntumber fw-bold p-0 m-0",children:"SGST:- \u20b9"})}),(0,u.jsx)("div",{className:"col-auto p-0 m-0",children:(0,u.jsx)("input",{className:"form-control bg-seashell fw-bold border-0 p-0 m-0",disabled:!0,value:X||ge(),onChange:function(e){return ee(e.target.value)}})})]})}),(0,u.jsx)("div",{className:"col-auto p-0 m-0",children:(0,u.jsxs)("div",{className:"row p-0 m-0",children:[(0,u.jsx)("div",{className:"col-auto p-0 m-0",children:(0,u.jsx)("label",{className:"text-burntumber fw-bold p-0 m-0",children:"CGST:- \u20b9"})}),(0,u.jsx)("div",{className:"col-auto p-0 m-0",children:(0,u.jsx)("input",{className:"form-control bg-seashell fw-bold border-0 p-0 m-0",disabled:!0,value:ae||ge(),onChange:function(e){return se(e.target.value)}})})]})})]})})})}),(0,u.jsx)("div",{className:"container-fluid p-2 mt-2",children:(0,u.jsxs)("div",{className:"row text-center p-0 m-0 align-items-center",children:[(0,u.jsxs)("div",{className:"col-4 align-self-end text-start",children:[(0,u.jsx)("label",{className:" fw-bolder text-charcoal text-wrap text-start",children:"Advance Amount Balance"}),g?(0,u.jsx)("div",{className:"col-6 py-2 pb-2 m-auto text-center",children:(0,u.jsx)("div",{class:"spinner-border spinner-border-sm",role:"status",children:(0,u.jsx)("span",{class:"visually-hidden",children:"Loading..."})})}):v?(0,u.jsx)("input",{className:"form-control text-lightgreen text-start border-0 rounded-1 fw-bolder p-0  bg-seashell",disabled:!0,value:v.advnace_total}):(0,u.jsx)("div",{className:"bg-lightred text-center fw-bolder rounded-1 p-2",children:"No Advance Payments Found"})]}),(0,u.jsxs)("div",{className:"col-4 align-self-end text-start",children:[(0,u.jsx)("label",{className:" fw-bolder text-charcoal text-start text-wrap",children:"Consumables Amount"}),(0,u.jsx)("input",{disabled:!0,className:"form-control text-start rounded-1  border-0 fw-bolder p-0 text-charcoal50",defaultValue:"not available"})]})]})}),(0,u.jsxs)("div",{className:"container-fluid text-start position-relative mt-2",children:[(0,u.jsxs)("div",{className:"row p-0 m-0 align-items-center",children:[(0,u.jsx)("div",{className:"col-auto p-0 m-0 ps-1",children:(0,u.jsx)("h6",{className:"text-charcoal p-0 m-0 fw-bolder",children:"Payments"})}),(0,u.jsx)("div",{className:"col-auto p-0 m-0 d-none",children:(0,u.jsx)("button",{className:"btn p-0 ms-1",onClick:function(){return ce((function(e){return[].concat((0,x.Z)(e),[d])}))},children:(0,u.jsx)("img",{src:"/images/add.png",className:"img-fluid",style:{width:"2rem"}})})})]}),(0,u.jsx)("div",{className:"row justify-content-start p-0 m-0 mt-2",children:(0,u.jsxs)("div",{className:"col-5 text-start p-0 m-0 me-3 ",children:[(0,u.jsx)("span",{className:" text-start p-0 m-0 text-charcoal fw-bold",children:" Total Amount: "}),(0,u.jsxs)("span",{className:"text-lightgreen fw-bold",children:[" ",ie&&ie.length>0?function(){var e=[],t=0;if(ie&&ie.length>0){for(var n=0;n<ie.length;n++)e.push(Number(ie[n].amount));return e.forEach((function(e){t+=Number(e)})),t=t.toFixed(2)}return 0}():0]})]})}),ie.map((function(e,t){return(0,u.jsxs)("div",{className:"row p-0 m-0 justify-content-start m-2 ps-2",children:[(0,u.jsx)("div",{className:"col-4 p-0 mx-2",children:(0,u.jsxs)("select",{className:"form-control bg-seashell py-1 fw-bold border-0 text-end",disabled:!0,value:e.paymentmethod,onChange:function(t){e.paymentmethod=t.target.value,ce((function(e){return(0,x.Z)(e)}))},children:[(0,u.jsx)("option",{className:"text-charcoal75 fw-bolder",children:"Payment Method"}),(0,u.jsx)("option",{value:"Cash",children:"Cash"}),(0,u.jsx)("option",{value:"Card",children:"Card"}),(0,u.jsx)("option",{value:"Paytm",children:"Paytm"}),(0,u.jsx)("option",{value:"Phonepe",children:"Phone Pe"}),(0,u.jsx)("option",{value:"Wire-Transfer",children:"Wire Transfer"}),(0,u.jsx)("option",{value:"Razorpay",children:"Razorpay"}),(0,u.jsx)("option",{value:"Points",children:"Points"}),(0,u.jsx)("option",{value:"Adjust-Advance",children:"Adjust-Advance"})]})}),(0,u.jsx)("div",{className:"col-4 p-0 m-0",children:(0,u.jsx)("input",{className:"form-control bg-seashell py-1 fw-bold border-0",disabled:!0,value:e.amount,onChange:function(t){e.amount=t.target.value,ce((function(e){return(0,x.Z)(e)}))}})}),(0,u.jsx)("div",{className:"col-2",children:(0,u.jsx)("button",{className:"btn d-none btn-sm p-0 m-0",onClick:function(){!function(e){ie.splice(e,e)}(t),ce((function(e){return(0,x.Z)(e)}))},children:(0,u.jsx)("img",{src:"/images/delete.png",className:"img-fluid",style:{width:"1rem"}})})})]})}))]})]}),(0,u.jsx)("hr",{}),(0,u.jsx)("div",{className:"container-fluid p-0 m-0 bg-seashell position-sticky bottom-0  pb-2",style:{marginTop:"2vh"},children:me?(0,u.jsx)("div",{className:"col-6 py-2 pb-2 m-auto text-center",children:(0,u.jsx)("div",{class:"spinner-border",role:"status",children:(0,u.jsx)("span",{class:"visually-hidden",children:"Loading..."})})}):(0,u.jsxs)("div",{className:"row p-0 m-0 text-center",children:[(0,u.jsxs)("div",{className:"col-4 align-self-end text-start",children:[(0,u.jsx)("label",{className:" fw-bolder text-charcoal text-wrap text-start",children:"Grand Total"}),(0,u.jsx)("div",{className:"form-control rounded-1 text-burntumber fs-6 text-start border-0 fw-bolder p-0 bg-seashell",children:be()})]}),(0,u.jsx)("div",{className:"col-4 justify-content-center",children:(0,u.jsx)("button",{className:"button button-charcoal",onClick:function(e){(0,p.H)(),m().Confirm.show("Add Charges and Payments","Do you surely want to add the following Charges and Payments with Grand Total ".concat(be()),"Yes","No",(function(){H(0),function(){je.apply(this,arguments)}()}),(function(){return 0}),{})},children:"Save"})}),(0,u.jsx)("div",{className:"col-4 justify-content-center",children:(0,u.jsx)("button",{className:"button button-pearl",onClick:function(){(0,p.H)(),m().Confirm.show("Add Charges and Payments in Cart","Do you surely want to add the following Charges and Payments with Grand Total ".concat(be()," in Cart"),"Yes","No",(function(){H(1)}),(function(){H(0)}),{})},children:"Add to Cart"})})]})})]})]})}),g=function(e){var t=(0,l.useContext)(r.Jx),n=localStorage.getItem("id"),c=(0,l.useState)(0),d=(0,o.Z)(c,2),p=d[0],h=d[1],f=(0,l.useState)([]),g=(0,o.Z)(f,2),b=g[0],j=g[1],N=(0,l.useState)([]),v=(0,o.Z)(N,2),y=v[0],w=v[1],_=(0,l.useState)([]),C=(0,o.Z)(_,2),Z=C[0],k=C[1],S=(0,l.useState)(!1),A=(0,o.Z)(S,2),P=A[0],L=A[1],F=(0,l.useState)(""),D=(0,o.Z)(F,2),E=D[0],z=D[1],T=(0,l.useState)(),B=(0,o.Z)(T,2),M=B[0],W=B[1],G=(0,l.useState)(!1),I=(0,o.Z)(G,2),U=I[0],O=I[1],R={paymentmethod:"",amount:0},J={paymentmethod:"",amount:0};function H(){return V.apply(this,arguments)}function V(){return(V=(0,s.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:L(!0),i.Z.post("".concat(t,"/advance/balance"),{patient_id:e.patientid}).then((function(e){W(e.data.data),L(!1)}));case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function $(){return $=(0,s.Z)((0,a.Z)().mark((function o(){var l,c,r,d,p,u;return(0,a.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:for(u=function(){return(u=(0,s.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return L(!0),n.next=3,i.Z.post("".concat(t,"/save/advance"),d).then((function(t){e.fetchallAppointmentslist(),k([]),z(""),H(),m().Notify.success(t.data.message),L(!1)}));case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)},p=function(){return u.apply(this,arguments)},l=[],c=[],r=0;r<Z.length;r++)c.push(Z[r].paymentmethod),l.push(Z[r].amount);d={patient_id:e.patientid,admin_id:Number(n),description:E,payment_method:c,payment_method_main:c,payment_method_details:l},p();case 7:case"end":return o.stop()}}),o)}))),$.apply(this,arguments)}function Q(){return(Q=(0,s.Z)((0,a.Z)().mark((function t(){var n,s;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=[],s=0;s<e.appointmentdata.pending_payments.length;s++)n.push(e.appointmentdata.pending_payments[s]);j(n);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Y(){return Y=(0,s.Z)((0,a.Z)().mark((function o(){var l,c,r,d,p,u,x,f;return(0,a.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:for(f=function(){return(f=(0,s.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return O(!0),n.next=3,i.Z.post("".concat(t,"/appointment/save/pending/charges"),u).then((function(t){e.fetchallAppointmentslist(),m().Notify.success(t.data.message),e.setsingleload(0),h(1),O(!1)}));case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)},x=function(){return f.apply(this,arguments)},l=[],c=[],r="",d=0;d<e.appointmentdata.pending_payments.length;d++)0==e.appointmentdata.pending_payments[d].is_paid&&(r=e.appointmentdata.pending_payments[d].id);for(p=0;p<y.length;p++)l.push(y[p].paymentmethod),c.push(Number(y[p].amount));u={payment_method:l,payment_method_main:l,payment_method_details:c,admin_id:Number(n),pending_id:r},x();case 9:case"end":return o.stop()}}),o)}))),Y.apply(this,arguments)}(0,l.useEffect)((function(){H()}),[]),(0,l.useEffect)((function(){!function(){Q.apply(this,arguments)}()}),[]);var q=function(e){if(e&&null!=e)return e=e.split("-").reverse().join("-")};return(0,u.jsxs)("div",{className:" text-start p-0 m-0",children:[(0,u.jsxs)("h5",{className:"text-start fw-bold",children:[e.patientname," Payments Section"]}),(0,u.jsx)("button",{className:"btn-close position-absolute end-0 p-2 top-0",onClick:e.toggle_payments}),(0,u.jsx)("div",{className:"d-flex justify-content-start p-0 m-0 gx-2 mt-3",children:["Advance payments","Pending Payments"].map((function(e,t){return(0,u.jsx)("button",{className:"button button-".concat(t===p?"charcoal":"seashell"," rounded-1 me-1 border-charcoal rounded-0"),onClick:function(){h(t)},children:e})}))}),(0,u.jsxs)("div",{className:"container-fluid p-0 m-0  d-".concat(0===p?"block":"none"),children:[(0,u.jsxs)("h6",{className:"text-charcoal75 fw-bolder mt-2 mb-1",children:["Advance Payments from ",e.patientname]}),P||e.isLoading?(0,u.jsx)("div",{className:"col-6 py-2 pb-2 m-auto ",children:(0,u.jsx)("div",{class:"spinner-border spinner-border-sm",role:"status",children:(0,u.jsx)("span",{class:"visually-hidden",children:"Loading..."})})}):M&&0!==M.advnace_total?(0,u.jsxs)("table",{className:"bg-pearl table rounded-1",children:[(0,u.jsxs)("thead",{className:"",children:[(0,u.jsx)("th",{className:"ps-2",children:"Description"}),(0,u.jsx)("th",{className:"ps-2",children:"Amount"})]}),(0,u.jsx)("tbody",{className:"align-middle",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{}),(0,u.jsx)("td",{children:M.advnace_total})]})})]}):(0,u.jsx)("div",{className:"bg-lightyellow fw-bolder rounded-1 p-2 m-1 mt-2 text-center",children:"No Advance Payments Found"}),(0,u.jsx)("hr",{}),(0,u.jsx)("h6",{className:"text-charcoal75 fw-bolder mb-2 mt-3",children:"Add Advance Payment"}),(0,u.jsxs)("div",{className:"row p-0 m-0 align-items-center",children:[(0,u.jsx)("div",{className:"col-3 ps-0",children:(0,u.jsx)("p",{className:"text-charcoal p-0 m-0 fw-bold",children:"Description"})}),(0,u.jsx)("div",{className:"col-9",children:(0,u.jsx)("input",{type:"text",className:"form-control p-0 m-0 p-1 bg-seashell mx-auto",value:E||"",onChange:function(e){return z(e.target.value)}})})]}),(0,u.jsxs)("div",{className:"row p-0 m-0 align-items-center",children:[(0,u.jsx)("div",{className:"col-auto p-0 m-0",children:(0,u.jsx)("p",{className:"text-charcoal fw-bold mt-3",children:"Add Payment Method"})}),(0,u.jsx)("div",{className:"col-auto p-0 m-0",children:(0,u.jsx)("button",{className:"btn py-0",onClick:function(){return k((function(e){return[].concat((0,x.Z)(e),[R])}))},children:(0,u.jsx)("img",{src:"/images/add.png",className:"img-fluid",style:{width:"2rem"}})})})]}),Z.map((function(e,t){return(0,u.jsxs)("div",{className:"row p-0 m-0 mt-2 justify-content-around",children:[(0,u.jsx)("div",{className:"col-5 p-0 m-0 ",children:(0,u.jsxs)("select",{className:"form-control bg-seashell py-1",value:e.paymentmethod,onChange:function(t){e.paymentmethod=t.target.value,k((function(e){return(0,x.Z)(e)}))},children:[(0,u.jsx)("option",{className:"text-charcoal75 fw-bolder",children:"Payment Method"}),(0,u.jsx)("option",{value:"Cash",children:"Cash"}),(0,u.jsx)("option",{value:"Card",children:"Card"}),(0,u.jsx)("option",{value:"Paytm",children:"Paytm"}),(0,u.jsx)("option",{value:"Phonepe",children:"Phone Pe"}),(0,u.jsx)("option",{value:"Wire-Transfer",children:"Wire Transfer"}),(0,u.jsx)("option",{value:"Razorpay",children:"Razorpay"}),(0,u.jsx)("option",{value:"Points",children:"Points"}),(0,u.jsx)("option",{value:"Adjust-Advance",children:"Adjust-Advance Cash"})]})}),(0,u.jsx)("div",{className:"col-4 p-0 m-0 ms-1",children:(0,u.jsx)("input",{className:"form-control bg-seashell py-1",value:e.amount,onChange:function(t){e.amount=t.target.value,k((function(e){return(0,x.Z)(e)}))}})}),(0,u.jsx)("div",{className:"col-1 col-lg-1 col-md-1 col-sm-1 m-0 p-0 ",children:(0,u.jsx)("button",{className:"btn p-0 m-0",onClick:function(){!function(e){Z.splice(e,e)}(t),k((function(e){return(0,x.Z)(e)}))},children:(0,u.jsx)("img",{src:"/images/delete.png",className:"img-fluid",style:{width:"1.5rem"}})})})]})})),(0,u.jsx)("div",{className:"container text-center",children:(0,u.jsx)("button",{className:"button  button-charcoal rounded-1 mt-3 mb-2",disabled:!E,onClick:function(){return $.apply(this,arguments)},children:"Save"})})]}),(0,u.jsx)("div",{className:"container-fluid p-0 m-0 d-".concat(1===p?"block":"none"," "),children:b&&null!=b&&0!=b.length?U?(0,u.jsx)("div",{className:"col-6 py-2 pb-2 m-auto ",children:(0,u.jsx)("div",{class:"spinner-border",role:"status",children:(0,u.jsx)("span",{class:"visually-hidden",children:"Loading..."})})}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h6",{className:"fw-bolder text-charcoal75 mt-2",children:"Previous paid payments"}),(0,u.jsx)("div",{className:"p-0 m-0 scroll scroll-y rounded-1",children:(0,u.jsxs)("table",{className:" p-0 m-0 border-0 bg-pearl p-2 ",children:[(0,u.jsxs)("thead",{className:"p-0 m-0",children:[(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"p-0 m-0 px-1",rowspan:"2",children:"Amount Paid"}),(0,u.jsx)("th",{className:"p-0 m-0 px-1",rowspan:"2",children:"Pending Date"}),(0,u.jsx)("th",{className:"p-0 m-0 px-1",rowspan:"2",children:"Paid Date"}),(0,u.jsx)("th",{className:"p-0 m-0 px-1 border-bottom",colspan:"7",scope:"colgroup",children:"Payment Method"})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"p-0 m-0 px-1 bg-pearl",scope:"col",children:"Cash"}),(0,u.jsx)("th",{className:"p-0 m-0 px-1 bg-pearl",scope:"col",children:"Card"}),(0,u.jsx)("th",{className:"p-0 m-0 px-1 bg-pearl",scope:"col",children:"Paytm"}),(0,u.jsx)("th",{className:"p-0 m-0 px-1 bg-pearl",scope:"col",children:"Phonepe"}),(0,u.jsx)("th",{className:"p-0 m-0 px-1 bg-pearl",scope:"col",children:"Razorpay"}),(0,u.jsx)("th",{className:"p-0 m-0 px-1 bg-pearl",scope:"col",children:"Wire-Transfer"}),(0,u.jsx)("th",{className:"p-0 m-0 px-1 bg-pearl",scope:"col",children:"Points"})]})]}),(0,u.jsx)("tbody",{children:b.map((function(e){return(0,u.jsxs)("tr",{className:"d-".concat(1==e.is_paid?"":"none"),children:[(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:e.paid_amount}),(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:q(e.pending_date)}),(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:q(e.paid_date)}),(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:e.payment_method_details&&null!=e.payment_method_details?JSON.parse(e.payment_method_details).Cash:"N/A"}),(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:e.payment_method_details&&null!=e.payment_method_details?JSON.parse(e.payment_method_details).Card:"N/A"}),(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:e.payment_method_details&&null!=e.payment_method_details?JSON.parse(e.payment_method_details).Paytm:"N/A"}),(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:e.payment_method_details&&null!=e.payment_method_details?JSON.parse(e.payment_method_details).Phonepe:"N/A"}),(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:e.payment_method_details&&null!=e.payment_method_details?JSON.parse(e.payment_method_details).Razorpay:"N/A"}),(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:e.payment_method_details&&null!=e.payment_method_details?JSON.parse(e.payment_method_details)["Wire-Transfer"]:"N/A"}),(0,u.jsx)("td",{className:"p-0 m-0 px-1",children:e.payment_method_details&&null!=e.payment_method_details?JSON.parse(e.payment_method_details).Points:"N/A"})]})}))})]})}),b.map((function(e){return(0,u.jsxs)("div",{className:"d-".concat(0==e.is_paid?"block":"none"," "),children:[(0,u.jsxs)("div",{className:"row p-0 m-0 align-items-center mt-2 justify-content-center",children:[(0,u.jsx)("div",{className:"col-auto",children:(0,u.jsxs)("span",{className:"text-burntumber fw-bolder",children:["Pending Amount: ",e.pending_amount]})}),(0,u.jsx)("div",{className:"col-auto",children:(0,u.jsx)("button",{className:"btn p-0",onClick:function(){return w((function(e){return[].concat((0,x.Z)(e),[J])}))},children:(0,u.jsx)("img",{src:"/images/add.png",className:"img-fluid",style:{width:"2rem"}})})})]}),y.map((function(e,t){return(0,u.jsxs)("div",{className:"",children:[(0,u.jsx)("label",{className:"text-charcoal fw-bold mt-3",children:"Select Payment Method to Pay Remaining pendings"}),(0,u.jsxs)("div",{className:"row p-0 m-0 justify-content-start",children:[(0,u.jsx)("div",{className:"col-5 col-lg-5 col-md-5 col-sm-5 p-0 m-0 ",children:(0,u.jsxs)("select",{className:"form-control bg-seashell py-1",value:e.paymentmethod,onChange:function(t){e.paymentmethod=t.target.value,w((function(e){return(0,x.Z)(e)}))},children:[(0,u.jsx)("option",{className:"text-charcoal75 fw-bolder",children:"Payment Method"}),(0,u.jsx)("option",{value:"Cash",children:"Cash"}),(0,u.jsx)("option",{value:"Card",children:"Card"}),(0,u.jsx)("option",{value:"Paytm",children:"Paytm"}),(0,u.jsx)("option",{value:"Phonepe",children:"Phone Pe"}),(0,u.jsx)("option",{value:"Wire-Transfer",children:"Wire Transfer"}),(0,u.jsx)("option",{value:"Razorpay",children:"Razorpay"}),(0,u.jsx)("option",{value:"Points",children:"Points"}),(0,u.jsx)("option",{value:"Adjust-Advance",children:"Adjust-Advance Cash"})]})}),(0,u.jsx)("div",{className:"col-5 col-lg-5 col-md-5 col-sm-1 p-0 m-0 ms-1",children:(0,u.jsx)("input",{className:"form-control bg-seashell py-1",value:e.amount,onChange:function(t){e.amount=t.target.value,w((function(e){return(0,x.Z)(e)}))}})}),(0,u.jsx)("div",{className:"col-1 col-lg-1 col-md-1 col-sm-1 m-0 p-0 ms-2 ",children:(0,u.jsx)("button",{className:"btn btn-sm p-0 m-0",onClick:function(){!function(e){y.splice(e,e)}(t),w((function(e){return(0,x.Z)(e)}))},children:(0,u.jsx)("img",{src:"/images/delete.png",className:"img-fluid",style:{width:"1.5rem"}})})})]})]})}))]})})),(0,u.jsx)("div",{className:"container text-center",children:(0,u.jsx)("button",{className:"button button-charcoal mt-lg-4 mt-md-3 mt-1 mb-2",onClick:function(){return Y.apply(this,arguments)},children:"Save"})})]}):void 0!==e.paymentsi?(0,u.jsx)("div",{className:"rounded-1 bg-lightgreen fw-bolder p-2 my-4 text-center",children:"Please generate the bill first"}):(0,u.jsx)("div",{className:"rounded-1 bg-lightgreen fw-bolder p-2 my-4 text-center",children:"No Pending Payments Found"})})]})},b=function(e){var t=(0,l.useContext)(r.Jx),n=(0,l.useContext)(r.Pl),d=localStorage.getItem("id"),x=(0,l.useState)("none"),b=(0,o.Z)(x,2),j=b[0],N=b[1],v=(0,l.useState)("none"),y=(0,o.Z)(v,2),w=y[0],_=y[1],C=(0,l.useState)(),Z=(0,o.Z)(C,2),k=Z[0],S=Z[1],A=(0,l.useState)(),P=(0,o.Z)(A,2),L=P[0],F=P[1],D=(0,l.useState)(),E=(0,o.Z)(D,2),z=E[0],T=E[1],B=(0,l.useState)("none"),M=(0,o.Z)(B,2),W=M[0],G=M[1],I=function(){"block"===j&&(N("none"),F())},U=function(){"none"===w&&_("block"),"block"===w&&(_("none"),S())},O=function(){"none"===W&&G("block"),"block"===W&&(G("none"),T())},R=function(e){if(e)return e=e.split("-").reverse().join("-")};function J(){return(J=(0,s.Z)((0,a.Z)().mark((function n(s){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(s.target.value&&d&&s.target.name)){n.next=13;break}return n.prev=1,m().Loading.circle("Updating Appointment Status",{backgroundColor:"rgb(242, 242, 242,0.5)",svgColor:"#96351E",messageColor:"#96351E",messageFontSize:"1.5rem"}),n.next=5,i.Z.post("".concat(t,"/appointment/change/status"),{appointment_id:s.target.name,status:s.target.value,admin_id:d}).then((function(t){e.fetchallAppointmentslist(),m().Loading.remove(),m().Notify.success(t.data.message)}));case 5:n.next=11;break;case 7:n.prev=7,n.t0=n.catch(1),alert(n.t0),m().Loading.remove();case 11:n.next=14;break;case 13:m().Notify.alert("Please try Again");case 14:case"end":return n.stop()}}),n,null,[[1,7]])})))).apply(this,arguments)}var H=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m().Loading.circle("Generating Bill",{backgroundColor:"rgb(242, 242, 242,0.5)",svgColor:"#96351E",messageColor:"#96351E",messageFontSize:"1.5rem"});try{i.Z.post("".concat(t,"/appointment/bill"),{appointment_id:n,admin_id:d}).then((function(e){m().Notify.success(e.data.message),window.open(e.data.data.bill_url,"_blank","noreferrer"),m().Loading.remove()}))}catch(a){m().Notify.failure(a.message),m().Loading.remove()}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m().Loading.circle("Generating Prescription",{backgroundColor:"rgb(242, 242, 242,0.5)",svgColor:"#96351E",messageColor:"#96351E",messageFontSize:"1.5rem"});try{i.Z.post("".concat(t,"/swift/pdf"),{appointment_id:n}).then((function(e){m().Notify.success(e.data.message),m().Loading.remove(),window.open(e.data.data.prescription_pdf,"_blank","noreferrer")}))}catch(a){m().Notify.failure(a.message),m().Loading.remove()}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n,s,o){var l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=o,void 0==s||null==s)m().Notify.failure("Please Add a Phone Number to send the message on WhatsApp");else{m().Loading.circle("Sending Bill on Whats App",{backgroundColor:"rgb(242, 242, 242,0.5)",svgColor:"#96351E",messageColor:"#96351E",messageFontSize:"1.5rem"});try{i.Z.post("".concat(t,"/send/bill/whatsapp"),{appointment_id:n,check_pres:l,admin_id:d}).then((function(e){m().Notify.success("".concat(e.data.message).concat(1==l?" with Prescription":" without Prescription")),m().Loading.remove()}))}catch(a){m().Notify.failure(a.message),m().Loading.remove()}}case 2:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Q=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n,s,o){var l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=o,void 0==s||null==s)m().Notify.failure("Please Add a Phone Number to send the message on SMS");else{m().Loading.circle("Sending Bill on SMS",{backgroundColor:"rgb(242, 242, 242,0.5)",svgColor:"#96351E",messageColor:"#96351E",messageFontSize:"1.5rem"});try{i.Z.post("".concat(t,"/send/bill/sms"),{appointment_id:n,check_bill:1,check_pre:l}).then((function(e){m().Notify.success("".concat(e.data.message).concat(1==l?" with Prescription":" without Prescription")),m().Loading.remove()}))}catch(a){m().Notify.failure(a.message),m().Loading.remove()}}case 2:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();return(0,u.jsx)(u.Fragment,{children:1==e.isLoading?(0,u.jsxs)("div",{className:"container text-center position-absolute start-0 end-0",children:[(0,u.jsx)("h4",{children:"Hold on its Loading"}),(0,u.jsx)("div",{className:"spinner-grow bg-secondary col-2",role:"status",children:(0,u.jsx)("span",{className:"visually-hidden",children:"Loading..."})})]}):0==e.getAppointments.length?(0,u.jsx)("div",{className:"container text-center text-charcoal position-absolute start-0 end-0",children:(0,u.jsx)("p",{className:"p-0 m-0 text-charcoal75 fw-bolder mt-3",children:"No Appointments found for the selected Date & Doctor"})}):e.getAppointments.map((function(t,a){return(0,u.jsxs)("tr",{id:a,className:"align-middle text-start",children:[(0,u.jsx)("td",{className:"d-".concat(1==n.appointment_edit?"":"none"," bg-").concat(L==a?"lightyellow":""," text-center ps-3"),children:(0,u.jsx)("img",{src:"/images/confirmed.png",onClick:function(e){"none"===j&&N("block"),F(a)},className:"btn img-fluid p-0 m-0"})}),(0,u.jsx)("td",{className:"text-start pe-5 pe-lg-0 ",children:(0,u.jsxs)("div",{className:"row p-0 m-0 align-items-center text-wrap",children:[(0,u.jsx)("div",{className:"col-1 p-0 m-0 me-2",children:(0,u.jsx)("div",{className:"rounded-circle border-1 button-".concat(e.status_color(t.appointment_status)),style:{height:"12px",width:"12px"}})}),(0,u.jsx)("div",{className:"col-5 p-0 m-0 text-wrap ",children:(0,u.jsxs)("select",{disabled:1!=n.appointment_edit,className:"bg-transparent fw-bold border-0 text-wrap ",name:t.id,onChange:function(e){!function(e){J.apply(this,arguments)}(e)},children:[(0,u.jsx)("option",{className:"button text-start",selected:!0,disabled:!0,children:e.status(t.appointment_status)}),(0,u.jsx)("option",{className:"button-lightred",value:"1",children:"Pending"}),(0,u.jsx)("option",{className:"button-lightblue",value:"2",children:"Booked"}),(0,u.jsx)("option",{className:"button-lightred",value:"3",children:"Cancelled"}),(0,u.jsx)("option",{className:"button-pearl",value:"4",children:"QR Generated"}),(0,u.jsx)("option",{className:"button-brandy",value:"5",children:"Checked_in"}),(0,u.jsx)("option",{className:"button-lightred",value:"6",children:"Vitals Done"}),(0,u.jsx)("option",{className:"button-lightyellow",value:"7",children:"In_apppointment"}),(0,u.jsx)("option",{className:"button-lightgreen",value:"8",children:"Payment done"}),(0,u.jsx)("option",{className:"button-lightyellow",value:"9",children:"Unattained"}),(0,u.jsx)("option",{className:"button-lightgreen",value:"10",children:"Completed"})]})})]})}),(0,u.jsxs)("td",{className:"text-charcoal fw-bold",children:[(0,u.jsx)("div",{className:"col-auto",children:null!=t.patient&&null!=t.patient.full_name?t.patient.full_name:""}),(0,u.jsx)("div",{className:"col-auto text-burntumber",children:null!=t.patient&&null!=t.patient.phone_number?t.patient.phone_number:""})]}),(0,u.jsx)("td",{className:"text-charcoal fw-bold",children:null!=t.doctor&&null!=t.doctor.doctor_name?t.doctor.doctor_name:""}),(0,u.jsxs)("td",{className:"text-charcoal fw-bold",children:[(0,u.jsx)("div",{className:"col-auto",children:t.timeslot&&null!==t.timeslot.date?R(t.timeslot.date):""}),(0,u.jsx)("div",{className:"col-auto text-burntumber",children:t.follow_up_date?"F/U- "+R(t.follow_up_date?t.follow_up_date:""):""})]}),(0,u.jsx)("td",{className:"text-charcoal fw-bold",children:t.timeslot&&null!==t.timeslot.time_from?e.tConvert(t.timeslot.time_from):""}),(0,u.jsxs)("td",{className:"text-charcoal fw-bold text-start",style:{width:"min-content"},children:[(0,u.jsxs)("div",{className:"col-auto",children:["\u20b9",(t.total_amount&&t.total_amount,t.total_amount)]}),(0,u.jsx)("div",{className:"col-auto",children:(0,u.jsx)(c.Z,{appointmentData:t})})]}),(0,u.jsx)("td",{className:"text-center  align-self-center p-0 m-0 ",children:(0,u.jsxs)("div",{className:"dropdown text-decoration-none d-inline-block",children:[(0,u.jsx)("button",{className:"button p-0 m-0 bg-transparent border-0 p-0  fw-bold dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,u.jsx)("img",{src:"/images/more.png",alt:"displaying_image"})}),(0,u.jsxs)("ul",{className:"dropdown-menu shadow-sm text-decoration-none p-0 m-0 p-2",style:{"-webkit-appearance":"none",width:"max-content"},children:[(0,u.jsxs)("li",{className:"dropdown-item border-bottom p-0 m-0 align-items-center",onClick:function(){T(a),O()},children:[(0,u.jsx)("img",{className:"m-2 img-fluid",src:"images/bill.png"}),"Bill"]}),(0,u.jsxs)("li",{className:"dropdown-item border-bottom p-0 m-0 align-items-center d-".concat(1==n.appointment_charges_edit?"":"none"),onClick:function(){S(a),U()},children:[(0,u.jsx)("img",{className:"m-2 img-fluid",src:"images/rupee.png"}),"Payments"]}),(0,u.jsxs)("li",{className:"dropdown-item border-bottom p-0 m-0 align-items-center",onClick:function(){H(t.id)},children:[(0,u.jsx)("img",{className:"m-2 img-fluid",src:"/images/pdf.png",alt:"displaying_image"}),"Generate Bill"]}),(0,u.jsxs)("li",{className:"dropdown-item border-bottom p-0 m-0 align-items-center",onClick:function(){V(t.id)},children:[(0,u.jsx)("img",{className:"m-2 img-fluid",src:"/images/pdf.png",alt:"displaying_image"})," Generate Prescription "]}),(0,u.jsxs)("li",{className:"dropdown-item border-bottom p-0 m-0 align-items-center",onClick:function(){var e,n;e=t.id,n=t.patient.phone_number,(0,p.H)(),m().Confirm.show("Choose Option to Send ","Do you want to send the Bill","With the Prescription ?","Without the Prescription ?",(function(){$(e,n,1)}),(function(){$(e,n,0)}),{})},children:[(0,u.jsx)("img",{className:"m-2 img-fluid",src:"/images/whatsapp.png",alt:"displaying_image"})," Send on Whats App "]}),(0,u.jsxs)("li",{className:"dropdown-item p-0 m-0 align-items-center",onClick:function(){var e,n;e=t.id,n=t.patient.phone_number,(0,p.H)(),m().Confirm.show("Choose Option to Send ","Do you want to send the Bill","With the Prescription ?","Without the Prescription ?",(function(){Q(e,n,1)}),(function(){Q(e,n,0)}),{})},children:[(0,u.jsx)("img",{className:"m-2 img-fluid ms-2",src:"/images/message.png",alt:"displaying_image"})," ","Send on SMS"]})]})]})}),L==a?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"backdrop"}),(0,u.jsx)("td",{className:" d-".concat(L==a?j:"none"," updateappointment bg-seashell p-0 col-lg-8 col-xl-5 col-md-10 col-sm-10 col-12 start-0 end-0 fw-none  mx-auto top-0 border border-1 rounded-2 shadow-sm position-absolute"),style:{zIndex:"3",marginTop:"10rem"},children:(0,u.jsx)(h,{fetchallAppointmentslist:e.fetchallAppointmentslist,patientname:null!=t.patient&&null!=t.patient.full_name?t.patient.full_name:"",patientid:null!=t.patient&&null!=t.patient.id?t.patient.id:"",appointmentid:t.id,closeappointmentform:I,doctorid:e.doctorid,fetchapi:e.fetchapi,appointmentdoctorid:t.doctor.id,appointmentdate:t.appointment_date,appointmenttime:(s=t.timeslot.time_from,(s=s.toString().match(/^([01]\d|2[0-3])(:)([0-5]\d)(:[0-5]\d)?$/)||[s]).length>1&&((s=s.slice(1))[3]=+s[0]<12?" AM ":" PM ",s[0]=+s[0]%12||12),s.join(""))})})]}):(0,u.jsx)(u.Fragment,{}),z==a?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"backdrop"}),(0,u.jsx)("td",{className:"bill d-".concat(z==a?W:"none"," bg-seashell col-lg-8 col-md-10 start-0 mx-auto end-0 top-0 col-sm-12 col-12 col-xl-6 border border-2 rounded-1 shadow-sm position-absolute"),style:{zIndex:"3",marginTop:"6rem"},children:(0,u.jsx)(f,{fetchallAppointmentslist:e.fetchallAppointmentslist,toggle_bill:O,patientid:t.patient&&null!=t.patient.id?t.patient.id:"",patientname:null!=t.patient&&null!=t.patient.full_name?t.patient.full_name:"",appointmentdata:e.getAppointments[a],appointmentid:t.id,doctorfee:t.doctor.consulationFee})})]}):(0,u.jsx)(u.Fragment,{}),k==a?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"backdrop"}),(0,u.jsx)("td",{className:"payments top-0 start-0 end-0 mx-auto bg-seashell col-lg-6 col-md-8 col-sm-12 col-12 col-xl-6 rounded-1 border border-1 position-absolute shadow  d-".concat(k==a?w:"none"),style:{zIndex:"3",marginTop:"10rem"},children:(0,u.jsx)(g,{toggle_payments:U,appointmentdata:e.getAppointments[a],fetchallAppointmentslist:e.fetchallAppointmentslist,patientname:null!=t.patient&&null!=t.patient.full_name?t.patient.full_name:"",patientid:null!=t.patient&&null!=t.patient.id?t.patient.id:""})})]}):(0,u.jsx)(u.Fragment,{})]},a);var s}))})},j=function(e){var t=(0,l.useContext)(r.Jx),n=(0,l.useContext)(r.Pl),d=localStorage.getItem("id"),x=(0,l.useState)("none"),b=(0,o.Z)(x,2),j=b[0],N=b[1],v=(0,l.useState)("none"),y=(0,o.Z)(v,2),w=y[0],_=y[1],C=(0,l.useState)(),Z=(0,o.Z)(C,2),k=Z[0],S=Z[1],A=(0,l.useState)(),P=(0,o.Z)(A,2),L=P[0],F=P[1],D=(0,l.useState)("none"),E=(0,o.Z)(D,2),z=E[0],T=E[1],B=(0,l.useState)(),M=(0,o.Z)(B,2),W=M[0],G=M[1],I=function(e){if(e)return e=e.split("-").reverse().join("-")},U=function(){"block"===j&&(N("none"),G())},O=function(){"none"===w&&_("block"),"block"===w&&(_("none"),S())},R=function(){"none"===z&&T("block"),"block"===z&&(T("none"),F())};function J(){return(J=(0,s.Z)((0,a.Z)().mark((function n(s){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(s.target.value&&d&&s.target.name)){n.next=13;break}return n.prev=1,m().Loading.circle("Updating Appointment Status",{backgroundColor:"rgb(242, 242, 242,0.5)",svgColor:"#96351E"}),n.next=5,i.Z.post("".concat(t,"/appointment/change/status"),{appointment_id:s.target.name,status:s.target.value,admin_id:d}).then((function(t){e.fetchallAppointmentslist(),m().Loading.remove(),m().Notify.success(t.data.message)}));case 5:n.next=11;break;case 7:n.prev=7,n.t0=n.catch(1),alert(n.t0),m().Loading.remove();case 11:n.next=14;break;case 13:m().Notify.alert("Please try Again");case 14:case"end":return n.stop()}}),n,null,[[1,7]])})))).apply(this,arguments)}var H=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m().Loading.circle("Generating Bill",{backgroundColor:"rgb(242, 242, 242,0.5)",svgColor:"#96351E",messageColor:"#96351E",messageFontSize:"1.5rem"});try{i.Z.post("".concat(t,"/appointment/bill"),{appointment_id:n,admin_id:d}).then((function(e){m().Notify.success(e.data.message),window.open(e.data.data.bill_url,"_blank","noreferrer"),m().Loading.remove()}))}catch(a){m().Notify.failure(a.message),m().Loading.remove()}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m().Loading.circle("Generating Prescription",{backgroundColor:"rgb(242, 242, 242,0.5)",svgColor:"#96351E",messageColor:"#96351E",messageFontSize:"1.5rem"});try{i.Z.post("".concat(t,"/swift/pdf"),{appointment_id:n}).then((function(e){m().Notify.success(e.data.message),m().Loading.remove(),window.open(e.data.data.prescription_pdf,"_blank","noreferrer")}))}catch(a){m().Notify.failure(a.message),m().Loading.remove()}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n,s,o){var l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=o,void 0==s||null==s)m().Notify.failure("Please Add a Phone Number to send the message on WhatsApp");else{m().Loading.circle("Sending Bill on Whats App",{backgroundColor:"rgb(242, 242, 242,0.5)",svgColor:"#96351E",messageColor:"#96351E",messageFontSize:"1.5rem"});try{i.Z.post("".concat(t,"/send/bill/whatsapp"),{appointment_id:n,check_pres:l,admin_id:d}).then((function(e){m().Notify.success("".concat(e.data.message).concat(1==l?" with Prescription":" without Prescription")),m().Loading.remove()}))}catch(a){m().Notify.failure(a.message),m().Loading.remove()}}case 2:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Q=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n,s,o){var l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=o,void 0==s||null==s)m().Notify.failure("Please Add a Phone Number to send the message on SMS");else{m().Loading.circle("Sending Bill on SMS",{backgroundColor:"rgb(242, 242, 242,0.5)",svgColor:"#96351E",messageColor:"#96351E",messageFontSize:"1.5rem"});try{i.Z.post("".concat(t,"/send/bill/sms"),{appointment_id:n,check_bill:1,check_pre:l}).then((function(e){m().Notify.success("".concat(e.data.message).concat(1==l?" with Prescription":" without Prescription")),m().Loading.remove()}))}catch(a){m().Notify.failure(a.message),m().Loading.remove()}}case 2:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();return(0,u.jsx)(u.Fragment,{children:1==e.isselectedLoading?(0,u.jsxs)("div",{className:"container text-center position-absolute start-0 end-0",children:[(0,u.jsx)("h4",{children:"Hold on its loading"}),(0,u.jsx)("div",{class:"spinner-grow bg-charcoal col-2",role:"status",children:(0,u.jsx)("span",{class:"visually-hidden",children:"Loading..."})})]}):0==e.appointmentdata.length?(0,u.jsx)("div",{className:"container text-center text-charcoal position-absolute start-0 end-0",children:(0,u.jsx)("p",{className:"p-0 m-0 text-charcoal75 fw-bolder mt-3",children:"No Appointments found for the selected Date & Doctor"})}):e.appointmentdata.map((function(t,a){return(0,u.jsxs)("tr",{id:a,className:"text-charcoal fw-bold align-middle text-start",children:[(0,u.jsx)("td",{className:"ps-3 d-".concat(1==n.appointment_edit?"":"none"," bg-").concat(W==a?"lightyellow":""),children:(0,u.jsx)("img",{src:"/images/confirmed.png",onClick:function(e){G(a),"none"===j&&N("block")},className:"btn p-0 m-0"})}),(0,u.jsx)("td",{children:(0,u.jsxs)("div",{className:"row p-0 m-0 align-items-center",children:[(0,u.jsx)("div",{className:"col-1 p-0 m-0 me-2",children:(0,u.jsx)("div",{className:"rounded-circle border-1 button-".concat(e.status_color(t.appointment_status)),style:{height:"12px",width:"12px"}})}),(0,u.jsx)("div",{className:"col-5 p-0 m-0 ",children:(0,u.jsxs)("select",{disabled:1!=n.appointment_edit,className:"fw-bold bg-transparent border-0 ",name:t.id,onChange:function(e){!function(e){J.apply(this,arguments)}(e)},children:[(0,u.jsx)("option",{className:"button text-start",selected:!0,disabled:!0,children:e.status(t.appointment_status)}),(0,u.jsx)("option",{className:"button-lightred",value:"1",children:"Pending"}),(0,u.jsx)("option",{className:"button-lightblue",value:"2",children:"Booked"}),(0,u.jsx)("option",{className:"button-lightred",value:"3",children:"Cancelled"}),(0,u.jsx)("option",{className:"button-pearl",value:"4",children:"QR Generated"}),(0,u.jsx)("option",{className:"button-brandy",value:"5",children:"Checked_in"}),(0,u.jsx)("option",{className:"button-lightred",value:"6",children:"Vitals Done"}),(0,u.jsx)("option",{className:"button-lightyellow",value:"7",children:"In_apppointment"}),(0,u.jsx)("option",{className:"button-lightgreen",value:"8",children:"Payment done"}),(0,u.jsx)("option",{className:"button-lightyellow",value:"9",children:"Unattained"}),(0,u.jsx)("option",{className:"button-lightgreen",value:"10",children:"Completed"})]})})]})}),(0,u.jsxs)("td",{children:[(0,u.jsx)("div",{className:"col-auto",children:null!=t.patient&&null!=t.patient.full_name?t.patient.full_name:""}),(0,u.jsx)("div",{className:"col-auto text-burntumber",children:null!=t.patient&&null!=t.patient.phone_number?t.patient.phone_number:""})]}),(0,u.jsx)("td",{children:null!=t.doctor&&null!=t.doctor.doctor_name?t.doctor.doctor_name:""}),(0,u.jsxs)("td",{children:[(0,u.jsx)("div",{className:"col-auto",children:t.timeslot.date&&null!==t.timeslot.date?I(t.timeslot.date):""}),(0,u.jsx)("div",{className:"col-auto text-burntumber",children:t.follow_up_date?"F/U- "+I(t.follow_up_date?t.follow_up_date:""):""})]}),(0,u.jsx)("td",{children:e.tConvert(t.timeslot.time_from)}),(0,u.jsxs)("td",{children:[(0,u.jsx)("div",{className:"col-auto",children:t.total_amount}),(0,u.jsx)("div",{className:"col-auto",children:(0,u.jsx)(c.Z,{appointmentData:t})})]}),(0,u.jsx)("td",{className:"text-center",children:(0,u.jsxs)("div",{className:"dropdown text-decoration-none d-inline-block bg-transparent",children:[(0,u.jsx)("button",{className:"button p-0 m-0 px-1 py-1 bg-transparent border-0 p-0  fw-bold dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,u.jsx)("img",{src:"/images/more.png",alt:"displaying_image"})}),(0,u.jsxs)("ul",{className:"dropdown-menu text-decoration-none bg-white p-2",style:{"-webkit-appearance":"none",appearance:"none",width:"max-content"},children:[(0,u.jsxs)("li",{className:"dropdown-item d-flex border-bottom p-0 m-0 align-items-center",onClick:function(){F(a),R()},children:[(0,u.jsx)("img",{className:"m-2 img-fluid",src:"images/bill.png"}),"Bill"]}),(0,u.jsxs)("li",{className:"dropdown-item  border-bottom p-0 m-0 align-items-center d-".concat(1==n.appointment_charges_edit?"":"none"),onClick:function(){S(a),O()},children:[(0,u.jsx)("img",{className:"m-2 img-fluid",src:"images/rupee.png"}),"Payments"]}),(0,u.jsxs)("li",{className:"dropdown-item d-flex border-bottom p-0 m-0 align-items-center",onClick:function(){H(t.id)},children:[(0,u.jsx)("img",{className:"m-2 img-fluid",src:"/images/pdf.png",alt:"displaying_image"}),"Generate Bill"]}),(0,u.jsxs)("li",{className:"dropdown-item d-flex border-bottom p-0 m-0 align-items-center",onClick:function(){V(t.id)},children:[(0,u.jsx)("img",{className:"m-2 img-fluid",src:"/images/pdf.png",alt:"displaying_image"})," Generate Prescription "]}),(0,u.jsxs)("li",{className:"dropdown-item d-flex border-bottom p-0 m-0 align-items-center",onClick:function(){var e,n;e=t.id,n=t.patient.phone_number,(0,p.H)(),m().Confirm.show("Choose Option to Send ","Do you want to send the Bill","With the Prescription ?","Without the Prescription ?",(function(){$(e,n,1)}),(function(){$(e,n,0)}),{})},children:[(0,u.jsx)("img",{className:"m-2 img-fluid",src:"/images/whatsapp.png",alt:"displaying_image"})," Send on Whats App "]}),(0,u.jsxs)("li",{className:"dropdown-item d-flex p-0 m-0 align-items-center",onClick:function(){var e,n;e=t.id,n=t.patient.phone_number,(0,p.H)(),m().Confirm.show("Choose Option to Send ","Do you want to send the Bill","With the Prescription ?","Without the Prescription ?",(function(){Q(e,n,1)}),(function(){Q(e,n,0)}),{})},children:[(0,u.jsx)("img",{className:"m-2 img-fluid",src:"/images/message.png",alt:"displaying_image"})," ","Send on SMS"]})]})]})}),W==a?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"backdrop"}),(0,u.jsx)("td",{className:" d-".concat(W==a?j:"none","  updateappointment bg-seashell col-lg-8 col-xl-5 col-md-10 col-sm-10 col-12 start-0 end-0  mx-auto top-0 border border-1 rounded-1 position-absolute"),style:{zIndex:"3",marginTop:"10rem"},children:(0,u.jsx)(h,{fetchallAppointmentslist:e.fetchallAppointmentslist,patientname:null!=t.patient&&null!=t.patient.full_name?t.patient.full_name:"N/A",patientid:t.patient&&null!==t.patient.id?t.patient.id:"N/A",appointmentid:t.id&&null!==t.id?t.id:"N/A",closeappointmentform:U,doctorid:e.doctorid?e.doctorid:"N/A",fetchapi:e.fetchapi,appointmentdoctorid:t.doctor.id,appointmentdate:t.appointment_date,appointmenttime:(s=t.timeslot.time_from,(s=s.toString().match(/^([01]\d|2[0-3])(:)([0-5]\d)(:[0-5]\d)?$/)||[s]).length>1&&((s=s.slice(1))[3]=+s[0]<12?" AM ":" PM ",s[0]=+s[0]%12||12),s.join(""))})})]}):(0,u.jsx)(u.Fragment,{}),L==a?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"backdrop"}),(0,u.jsx)("td",{className:"bill d-".concat(L==a?z:"none"," bg-seashell col-lg-8 col-md-10 start-0 mx-auto end-0 top-0 col-sm-12 col-12 col-xl-6 border border-2 rounded-1 shadow position-absolute"),style:{zIndex:"3",marginTop:"6rem"},children:(0,u.jsx)(f,{fetchallAppointmentslist:e.fetchallAppointmentslist,toggle_bill:R,patientid:t.patient&&null!=t.patient.id?t.patient.id:"",patientname:null!=t.patient&&null!=t.patient.full_name?t.patient.full_name:"",appointmentdata:e.appointmentdata[a],appointmentid:t.id,doctorfee:t.doctor.consulationFee})})]}):(0,u.jsx)(u.Fragment,{}),k==a?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"backdrop"}),(0,u.jsx)("td",{className:"payments top-0 start-0 end-0 mx-auto bg-seashell col-lg-6 col-md-8 col-sm-12 col-12 col-xl-6 rounded-1 border border-1 position-absolute shadow  d-".concat(k==a?w:"none"),style:{zIndex:"3",marginTop:"10rem"},children:(0,u.jsx)(g,{toggle_payments:O,appointmentdata:e.appointmentdata[a],fetchallAppointmentslist:e.fetchallAppointmentslist,patientname:null!=t.patient&&null!=t.patient.full_name?t.patient.full_name:"",patientid:null!=t.patient&&null!=t.patient.id?t.patient.id:""})})]}):(0,u.jsx)(u.Fragment,{})]});var s}))})};var N=function(e){var t=(0,l.useContext)(r.U8),n=(0,l.useContext)(r.Pl),c=(0,l.useContext)(r.Jx),d=localStorage.getItem("ClinicId"),m=(0,l.useContext)(r.j8),p=(0,l.useState)(),h=(0,o.Z)(p,2),x=h[0],f=h[1],g=(0,l.useState)(),N=(0,o.Z)(g,2),v=N[0],y=N[1],w=(0,l.useState)(),_=(0,o.Z)(w,2),C=_[0],Z=_[1],k=(0,l.useState)(),S=(0,o.Z)(k,2),A=S[0],P=S[1],L=(0,l.useState)([]),F=(0,o.Z)(L,2),D=F[0],E=F[1],z=(0,l.useState)(),T=(0,o.Z)(z,2),B=T[0],M=T[1],W=(0,l.useState)([]),G=(0,o.Z)(W,2),I=G[0],U=G[1],O=(0,l.useState)(),R=(0,o.Z)(O,2),J=R[0],H=R[1],V=(0,l.useState)([]),$=(0,o.Z)(V,2),Q=$[0],Y=$[1],q=(0,l.useState)("All"),K=(0,o.Z)(q,2),X=K[0],ee=K[1],te=(0,l.useState)(""),ne=(0,o.Z)(te,2),ae=ne[0],se=ne[1];function oe(){return le.apply(this,arguments)}function le(){return(le=(0,s.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x){e.next=14;break}return U([]),e.prev=2,P(!0),e.next=6,i.Z.get("".concat(c,"/appointment/list?clinic_id=").concat(d,"&doctor_id=").concat(x,"&from_date=").concat(v||t,"&to_date=").concat(C||(v||t),"&status=").concat(B||"")).then((function(e){E(e.data.data)}));case 6:P(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),alert(e.t0);case 12:e.next=27;break;case 14:return E([]),n=[],e.prev=16,Y(),H(!0),e.next=21,i.Z.get("".concat(c,"/appointment/list?clinic_id=").concat(d,"&from_date=").concat(v||t,"&to_date=").concat(C||(v||t),"&status=").concat(B||"")).then((function(e){U(e.data.data),e.data.data.map((function(e){n.push(e.doctor.id)})),Y(n,[])}));case 21:H(!1),e.next=27;break;case 24:e.prev=24,e.t1=e.catch(16),alert(e.t1);case 27:case"end":return e.stop()}}),e,null,[[2,9],[16,24]])})))).apply(this,arguments)}function ie(e){return(e=e.toString().match(/^([01]\d|2[0-3])(:)([0-5]\d)(:[0-5]\d)?$/)||[e]).length>1&&((e=e.slice(1))[3]=+e[0]<12?" AM ":" PM ",e[0]=+e[0]%12||12),e.join("")}(0,l.useEffect)((function(){oe()}),[]),(0,l.useEffect)((function(){oe()}),[x,v,C,B]);var ce=[[1,"Pending","lightred"],[2,"Booked","lightblue"],[3,"Cancelled","lightred"],[4,"QR Generated","light"],[5,"Checked_in","brandy"],[6,"Vitals Done","lightred"],[7,"In_apppointment","lightyellow"],[8,"Payment done","lightgreen"],[9,"Unattained","lightyellow"],[10,"Completed","lightgreen"]];function re(e){for(var t,n=0;n<ce.length;n++)if(e==ce[n][0]){t=ce[n][1];break}return t}function de(e){for(var t,n=0;n<ce.length;n++)if(e==ce[n][0]){t=ce[n][2];break}return t}var me=(0,l.useState)(0),pe=(0,o.Z)(me,2);function ue(e){for(var t=[],n=0;n<Q.length;n++)e===Q[n]&&t.push(e);if(0!=t.length)return"("+t.length+" Appointments)"}return pe[0],pe[1],(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("section",{className:"page2appointment ",children:[(0,u.jsx)("div",{className:"container-fluid",children:(0,u.jsx)("div",{className:"row justify-content-between",children:(0,u.jsxs)("div",{className:"col-auto",children:[(0,u.jsx)("div",{className:"col-12 mt-2",children:(0,u.jsx)("h4",{className:"p-lg-2 p-md-2 p-sm-2",children:"All Appointments"})}),(0,u.jsx)("div",{className:"col-auto mt-2",children:(0,u.jsxs)("div",{className:"row p-0 m-0 g-lg-2 g-md-2 g-sm-2 g-2",children:[(0,u.jsx)("div",{className:"col-auto",children:(0,u.jsxs)("div",{className:"dropdown",children:[(0,u.jsxs)("button",{class:"button button-seashell border-0 rounded-2 fw-bold dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:[X||"Status","    ",(0,u.jsxs)("span",{class:" p-0 m-0 ms-2 badge text-burntumber fw-bolder",style:{zIndex:"2"},children:[" ",x?D.length:I.length," "]})]}),(0,u.jsxs)("ul",{class:"dropdown-menu bg-seashell shadow-sm border-0",children:[(0,u.jsx)("li",{className:"dropdown-item fw-bolder text-".concat("All"==X?"white":"charcoal"," bg-").concat("All"==X?"charcoal":"seashell"),onClick:function(){ee("All"),M("")},children:"All  "}),(0,u.jsx)("li",{className:"dropdown-item fw-bolder text-".concat("Cancelled"==X?"white":"charcoal"," bg-").concat("Cancelled"==X?"charcoal":"seashell"),onClick:function(){ee("Cancelled"),M(3)},children:"Cancelled "}),(0,u.jsx)("li",{className:"dropdown-item fw-bolder text-".concat("Completed"==X?"white":"charcoal"," bg-").concat("Completed"==X?"charcoal":"seashell"),onClick:function(){ee("Completed"),M(10)},children:"Completed "}),(0,u.jsx)("li",{className:"dropdown-item fw-bolder text-".concat("Unattended"==X?"white":"charcoal"," bg-").concat("Unattended"==X?"charcoal":"seashell"),onClick:function(){ee("Unattended"),M(9)},children:"Unattended "})]})]})}),(0,u.jsx)("div",{className:"col-auto",children:(0,u.jsxs)("div",{className:"dropdown",children:[(0,u.jsx)("button",{class:"button button-seashell border-0 rounded-2 fw-bold dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:ae||"Select Doctor"}),(0,u.jsx)("ul",{class:"dropdown-menu bg-seashell shadow-sm border-0",children:Q?m.map((function(e,t){return(0,u.jsxs)("li",{className:"dropdown-item fw-bolder text-".concat(x==e[0]?"white":"charcoal"," bg-").concat(x==e[0]?"charcoal":"seashell"),onClick:function(){f(e[0]),se("Dr."+e[1]+" "+ue(e[0]))},children:["Dr. ",e[1]," "," ",ue(e[0]),"  "]})})):(0,u.jsx)("li",{})})]})}),(0,u.jsx)("div",{className:"col-auto bg-seashell rounded-2",children:(0,u.jsxs)("div",{className:"row p-0 m-0 align-items-center align-self-center",children:[(0,u.jsx)("div",{className:"col-auto p-0 m-0 bg-seashell",children:(0,u.jsx)("input",{placeholder:"Start Date",className:"button button-seashell bg-seashell fw-bolder",value:v||(t||""),onFocus:function(){Z(),f(),se("")},type:"date",onChange:function(e){y(e.target.value)}})}),(0,u.jsx)("div",{className:"col-auto p-0 m-0",children:"-"}),(0,u.jsx)("div",{className:"col-auto p-0 m-0",children:(0,u.jsx)("input",{disabled:null==v,value:C||(v||(t||"")),placeholder:"End Date",className:"button button-seashell border-0 fw-bolder",type:"date",onChange:function(e){Z(e.target.value)}})})]})}),(0,u.jsx)("div",{className:"col-auto",children:(0,u.jsx)("button",{className:" button fw-bolder text-burntumber button-pearl",onClick:function(){f(),y(),se(),Z()},children:"Clear"})})]})})]})})}),(0,u.jsx)("section",{className:"container-fluid scroll scroll-y mt-2 ",children:(0,u.jsxs)("table",{className:"table text-start",children:[(0,u.jsx)("thead",{className:"text-charcoal75 fw-bold",children:(0,u.jsxs)("tr",{className:" bg-pearl position-sticky top-0",children:[(0,u.jsx)("th",{className:"text-center d-".concat(1==n.appointment_edit?"":"none"),children:"Update"}),(0,u.jsx)("th",{className:"",children:"Status"}),(0,u.jsx)("th",{children:"Patient"}),(0,u.jsx)("th",{children:"Doctor Name"}),(0,u.jsx)("th",{children:"Date & F/U Date"}),(0,u.jsx)("th",{children:"Time"}),(0,u.jsx)("th",{children:"Amount"}),(0,u.jsx)("th",{className:" text-center bg-pearl",children:"More"})]})}),(0,u.jsx)("tbody",{className:"text-charcoal appointments ",children:x?(0,u.jsx)(j,{appointmentdata:D,isselectedLoading:A,type:B,doctorid:x,fromdate:v,todate:C,fetchallAppointmentslist:oe,status:re,status_color:de,tConvert:ie,fetchapi:e.fetchapi}):(0,u.jsx)(b,{isLoading:J,getAppointments:I,type:B,fromdate:v,todate:C,doctorid:x,fetchallAppointmentslist:oe,status:re,status_color:de,tConvert:ie,fetchapi:e.fetchapi})})]})})]})})}},4012:function(e,t,n){n.d(t,{H:function(){return o}});n(9045);var a=n(7992),s=n.n(a),o=function(){return s().Confirm.init({className:"notiflix-confirm",width:"30rem",zindex:4003,position:"top",distance:"0rem",backgroundColor:"#f2f2f2",borderRadius:"20px",backOverlay:!0,backOverlayColor:"rgba(0,0,0,0.5)",rtl:!1,fontFamily:"Urbanist",cssAnimation:!0,cssAnimationDuration:300,cssAnimationStyle:"fade",plainText:!0,titleColor:"#222023",titleFontSize:"1.5rem",titleMaxLength:34,messageColor:"#222023",messageFontSize:"1.2rem",messageMaxLength:110,buttonsFontSize:"1rem",buttonsMaxLength:34,okButtonColor:"#f8f8f8",okButtonBackground:"#222023",cancelButtonColor:"#222023",cancelButtonBackground:"#ffffff"})}},9045:function(){}}]);
//# sourceMappingURL=615.8e7f559f.chunk.js.map