"use strict";(self.webpackChunkconnect_app=self.webpackChunkconnect_app||[]).push([[867],{2867:function(e,t,a){a.r(t);var s=a(4165),n=a(5861),c=a(1413),l=a(9439),r=a(9867),o=a(606),i=a(6626),d=a(7992),h=a.n(d),m=a(7548),u=a.n(m),x=a(5517),p=(a(4012),a(9045),a(9371),a(4594),a(2834));t.default=function(){var e=(0,r.useRef)(null),t=((0,r.useContext)(i.Pl),(0,r.useContext)(i.U8)),a=(localStorage.getItem("ClinicId"),localStorage.getItem("id"),(0,r.useContext)(i.Jx)),d=(0,r.useRef)(),m=(0,r.useState)(),f=(0,l.Z)(m,2),b=f[0],g=f[1],N=(0,r.useState)(),v=(0,l.Z)(N,2),j=v[0],y=v[1],w=(0,r.useState)(!1),k=(0,l.Z)(w,2),C=k[0],S=k[1],Z=(0,r.useState)([]),_=(0,l.Z)(Z,2),R=_[0],B=_[1],L=(0,r.useState)([]),O=(0,l.Z)(L,2),P=O[0],z=(O[1],(0,r.useState)()),I=(0,l.Z)(z,2),D=I[0],F=(I[1],(0,r.useState)([""])),H=(0,l.Z)(F,2),A=H[0],T=H[1],E=(0,r.useState)(),M=(0,l.Z)(E,2),Q=M[0],U=M[1],G=(0,r.useState)(),J=(0,l.Z)(G,2),q=J[0],K=J[1],V=(0,r.useState)(""),W=(0,l.Z)(V,2),X=W[0],Y=W[1],$=(0,r.useState)(),ee=(0,l.Z)($,2),te=ee[0],ae=ee[1],se=function(e){if(e)return e=e.split("-").reverse().join("-")};function ne(e){if(void 0!==q)if(void 0==e||void 0==e.selected){S(!0);try{o.Z.get("".concat(a,"/reports/stock/report/by/item?item_id=").concat(q||"","&item_type=").concat(X||"","&from=").concat(b||t,"&to=").concat(j||(b||t))).then((function(e){var t=[],a=[],s=[],n=Object.keys(e.data.data.medicine).map((function(t){return(0,c.Z)({medicine_id:t},e.data.data.medicine[t])}));t.push(n);var l=Object.keys(e.data.data.vaccine).map((function(t){return(0,c.Z)({vaccine_id:t},e.data.data.vaccine[t])}));a.push(l),s.push(t),s.push(a),s=s.flat(),B(s.flat()),S(!1)})).catch((function(e){h().Notify.warning(e.message),S(!1)}))}catch(s){h().Notify.warning(s.message),S(!1)}}else{S(!0);try{o.Z.get("".concat(a,"/reports/stock/report/by/item?item_id=").concat(q,"&item_type=").concat(X,"&from=").concat(b||t,"&to=").concat(j||(b||t))).then((function(e){var t=[],a=[],s=[],n=Object.keys(e.data.data.medicine).map((function(t){return(0,c.Z)({medicine_id:t},e.data.data.medicine[t])}));t.push(n);var l=Object.keys(e.data.data.vaccine).map((function(t){return(0,c.Z)({vaccine_id:t},e.data.data.vaccine[t])}));a.push(l),s.push(t),s.push(a),s=s.flat(),B(s.flat()),S(!1)})).catch((function(e){h().Notify.warning(e.message),S(!1)}))}catch(s){h().Notify.warning(s.message),S(!1)}}}var ce=function(){var t=(0,n.Z)((0,s.Z)().mark((function t(n){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ae(!0),t.prev=1,t.next=4,o.Z.get("".concat(a,"/item/search?search=").concat(n)).then((function(t){var a=[],s=[],c=[];a.push(t.data.data.medicines?t.data.data.medicines:[]),s.push(t.data.data.vaccines?t.data.data.vaccines:[]),c=(c=a.concat(s)).flat(),T(c),ae(!1),n.length>1?e.current.style.display="block":e.current.style.display="none"}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),h().Notify.warning(t.t0.data.message);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}();(0,r.useEffect)((function(){ne()}),[q,b,j]);var le=Object.keys(R).map((function(e){return(0,c.Z)({id:e},R[e])}));return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("h2",{className:" ms-3 text-charcoal fw-bolder mt-4",style:{width:"fit-content"},children:[" ",D," ",D>1?" Stock Reports By Name":" Stock Report By Name"," ","  "]}),(0,p.jsxs)("div",{className:"row p-0 m-0  mt-2 ms-2",children:[(0,p.jsx)("div",{className:"col-auto p-0 m-0 text-charcoal text-center fw-bolder bg-seashell me-2 align-items-center rounded-2",children:(0,p.jsxs)("div",{className:"position-relative",children:[(0,p.jsx)("input",{className:"fw-bold button button-seashell text-charcoal border-0 text-center bg-seashell",placeholder:"Search Items",value:Q||"",onChange:function(e){ce(e.target.value),U(e.target.value),Y()}}),(0,p.jsx)("div",{ref:e,className:"position-absolute rounded-4 col-12",style:{zIndex:"2"},children:A?te?(0,p.jsxs)("div",{className:"rounded-1 p-1 bg-pearl",children:["Searching Please wait....",(0,p.jsxs)("div",{className:"spinner-border my-auto",style:{width:"1rem",height:"1rem"},role:"status",children:[(0,p.jsx)("span",{className:"sr-only",children:" "})," "]})]}):0==A.length?(0,p.jsx)("div",{className:"bg-burntumber text-light rounded-1 p-1 text-wrap",children:" Oops! Not Avaliable "}):(0,p.jsxs)("div",{className:"mt-1 rounded-4 bg-pearl shadow px-1 pb-2 d-".concat(A&&A.length>1?"block":"none"),children:[(0,p.jsxs)("p",{className:"p-0 m-0 bg-pearl fw-bold text-charcoal75 text-start rounded-4 ps-2 ",style:{fontSize:"0.8rem"},children:[" ",A.length," Search Results "]}),A.map((function(t,a){return(0,p.jsx)("div",{style:{cursor:"pointer"},className:"p-0 ps-1 text-start text-charcoal text-wrap py-2  bg-".concat(a%2==0?"":"seashell"),name:t.id,onClick:function(a){U(t.display_name?t.display_name:t.name),K(t.id),Y(t.vaccines_id?"v":"m"),e.current.style.display="none"},children:t.display_name?t.display_name:t.name})}))]}):(0,p.jsx)(p.Fragment,{})})]})}),(0,p.jsx)("div",{className:"col-auto bg-seashell rounded-2",children:(0,p.jsxs)("div",{className:"row p-0 m-0 align-items-center align-self-center",children:[(0,p.jsx)("div",{className:"col-auto p-0 m-0 text-charcoal text-center fw-bolder bg-seashell ",children:(0,p.jsx)("input",{type:"date",placeholder:"fromdate",className:"button button-seashell rounded-0 text-charcoal text-center fw-bolder ",value:b||(t||""),onChange:function(e){g(e.target.value)}})}),(0,p.jsx)("div",{className:"col-auto p-0 m-0",children:"-"}),(0,p.jsx)("div",{className:"col-auto p-0 m-0  text-charcoal text-center fw-bolder bg-seashell",children:(0,p.jsx)("input",{type:"date",className:"button button-seashell rounded-0 text-charcoal text-center bg-seashell fw-bolder",value:j||(b||(t||"")),onChange:function(e){y(e.target.value)}})})]})}),(0,p.jsx)("div",{className:"col-auto export align-self-center text-center ",children:(0,p.jsx)(x.DownloadTableExcel,{filename:"".concat(se(b)+" to "+se(j)," StockReports_by_Name"),sheet:"StockReports_by_Name",currentTableRef:d.current,children:(0,p.jsx)("button",{className:"button button-seashell fw-bold",children:" Export"})})})]}),(0,p.jsx)("div",{className:"scroll scroll-y p-0 m-0 mt-2",style:{minHeight:"40vh",height:"58vh",maxHeight:"70vh"},children:(0,p.jsxs)("table",{className:"table text-start table-responsive",ref:d,children:[(0,p.jsx)("thead",{className:" p-0 m-0 position-sticky top-0 bg-pearl",children:(0,p.jsxs)("tr",{className:" ",children:[(0,p.jsx)("th",{className:"text-charcoal75 fw-bolder p-0 m-0 px-1",children:" Date Opening "}),(0,p.jsx)("th",{className:"text-charcoal75 fw-bolder p-0 m-0 px-1",children:" Type "}),(0,p.jsx)("th",{className:"text-charcoal75 fw-bolder p-0 m-0 px-1",children:" Invoice No. "}),(0,p.jsx)("th",{className:"text-charcoal75 fw-bolder p-0 m-0 px-1",children:" Party Name "}),(0,p.jsx)("th",{className:"text-charcoal75 fw-bolder p-0 m-0 px-1",children:" Batch "}),(0,p.jsx)("th",{className:"text-charcoal75 fw-bolder p-0 m-0 px-1",children:"  Price "}),(0,p.jsx)("th",{className:"text-charcoal75 fw-bolder p-0 m-0 px-1",children:"  Qty In "}),(0,p.jsx)("th",{className:"text-charcoal75 fw-bolder p-0 m-0 px-1",children:" Qty Out  "}),(0,p.jsx)("th",{className:"text-charcoal75 fw-bolder p-0 m-0 px-1",children:" Closing "})]})}),C?(0,p.jsx)("tbody",{className:"text-center",style:{minHeight:"55vh",height:"55vh"},children:(0,p.jsx)("tr",{className:"position-absolute border-0 start-0 end-0 px-5",children:(0,p.jsxs)("div",{class:"d-flex align-items-center spinner",children:[(0,p.jsx)("strong",{className:"",style:{fontSize:"1rem"},children:"Getting Details please be Patient ..."}),(0,p.jsx)("div",{className:"spinner-border ms-auto",role:"status","aria-hidden":"true"})]})})}):R&&0!=R.length?(0,p.jsx)("tbody",{children:le.map((function(e,t){return(0,p.jsxs)("tr",{className:" bg-".concat(t%2==0?"seashell":"pearl"," align-middle"),children:[(0,p.jsx)("td",{className:"text-charcoal fw-bold",children:" "}),(0,p.jsxs)("td",{className:"text-charcoal fw-bold",children:[X," "]}),(0,p.jsx)("td",{className:"text-charcoal fw-bold",children:" "}),(0,p.jsx)("td",{className:"text-charcoal fw-bold",children:" "}),(0,p.jsx)("td",{className:"text-charcoal fw-bold",children:" "}),(0,p.jsx)("td",{className:"text-charcoal fw-bold",children:" "}),(0,p.jsx)("td",{className:"text-charcoal fw-bold",children:" "}),(0,p.jsx)("td",{className:"text-charcoal fw-bold",children:" "}),(0,p.jsx)("td",{className:"text-charcoal fw-bold",children:" "})]},t)}))}):(0,p.jsx)("tbody",{className:"text-center p-0 m-0",style:{minHeight:"55vh",maxHeight:"55vh"},children:(0,p.jsx)("div",{className:"position-absolute border-0 start-0 end-0 mx-3 p-2",children:(0,p.jsx)("strong",{className:"text-charcoal fw-bolder text-center",children:" No Stock Reports By Name "})})})]})}),(0,p.jsx)("div",{className:"container-fluid mt-2 d-flex justify-content-center",children:(0,p.jsx)(u(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:".",pageCount:P,marginPagesDisplayed:3,pageRangeDisplayed:2,onPageChange:ne,containerClassName:"pagination scroll align-self-center align-items-center",pageClassName:"page-item text-charcoal",pageLinkClassName:"page-link text-decoration-none text-charcoal border-charcoal rounded-1 mx-1",previousClassName:"btn button-charcoal-outline me-2",previousLinkClassName:"text-decoration-none text-charcoal",nextClassName:"btn button-charcoal-outline ms-2",nextLinkClassName:"text-decoration-none text-charcoal",breakClassName:"d-flex mx-2 text-charcoal fw-bold fs-4",breakLinkClassName:"text-decoration-none text-charcoal",activeClassName:"active "})})]})}},4012:function(e,t,a){a.d(t,{H:function(){return c}});a(9045);var s=a(7992),n=a.n(s),c=function(){return n().Confirm.init({className:"notiflix-confirm",width:"30rem",zindex:4003,position:"top",distance:"0rem",backgroundColor:"#f2f2f2",borderRadius:"20px",backOverlay:!0,backOverlayColor:"rgba(0,0,0,0.5)",rtl:!1,fontFamily:"Urbanist",cssAnimation:!0,cssAnimationDuration:300,cssAnimationStyle:"fade",plainText:!0,titleColor:"#222023",titleFontSize:"1.5rem",titleMaxLength:34,messageColor:"#222023",messageFontSize:"1.2rem",messageMaxLength:110,buttonsFontSize:"1rem",buttonsMaxLength:34,okButtonColor:"#f8f8f8",okButtonBackground:"#222023",cancelButtonColor:"#222023",cancelButtonBackground:"#ffffff"})}},9045:function(){}}]);
//# sourceMappingURL=867.6f7db020.chunk.js.map