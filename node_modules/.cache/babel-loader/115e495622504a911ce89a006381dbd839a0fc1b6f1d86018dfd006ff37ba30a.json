{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Aartas-WebDesign\\\\Desktop\\\\ConnectApp_React\\\\connect_app\\\\FrontEnd\\\\src\\\\components\\\\pharmacy\\\\Exports.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { ExportExcel } from '../features/ExportExcel';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ExportPurchaseEntry = props => {\n  _s();\n  const [ExportPurchaseEntry, setExportPurchaseEntry] = useState([]);\n  const [ExportPurchaseEntry2, setExportPurchaseEntry2] = useState([]);\n  const fileName = 'purchase';\n  const reversefunction = date => {\n    if (date) {\n      date = date.split(\"-\").reverse().join(\"-\");\n      return date;\n    }\n  };\n  function TotalTaxPercent(cgst, sgst, igst) {\n    if (cgst && sgst && igst !== null || undefined) {\n      return Number(cgst) + Number(sgst) + Number(igst);\n    }\n  }\n  function TotalTaxRate(cgst, sgst, igst) {\n    if (cgst && sgst && igst !== null || undefined) {\n      return Number(cgst) + Number(sgst) + Number(igst);\n    }\n  }\n  async function MakePurchaseEntryExport() {\n    if (props.purchaseentryarr.length !== 0) {\n      const vendors = await props.purchaseentryarr.map(data => ({\n        \"PE ID\": \"PE-\" + data.bill_id,\n        \"PO ID\": data.purchase_order_id != null ? data.purchase_order_id : '',\n        'Channel': data.channel == 1 ? 'Pharmacy' : 'Consumables',\n        'Invoice No.': data.invoice_no != null ? data.invoice_no : '',\n        'Bill Date': data.bill_date != null ? data.bill_date : '',\n        'Bill Total': data.bill_total != null ? data.bill_total : '',\n        'Vendor': data.distributor.entity_name && data.distributor.entity_name != null ? data.distributor.entity_name : ''\n      }));\n      var obj = [];\n      for (let i = 0; i < props.purchaseentryarr.length; i++) {\n        var vendorsitems = props.purchaseentryarr[i].medicines.map(Data => ({\n          'Bill Date': reversefunction(Data.purchase_entry.bill_date),\n          'Distributer': Data.purchase_entry.distributor.entity_name,\n          'GSTIN': Data.purchase_entry.distributor.GSTIN_no,\n          'Item ID': Data.id != null ? Data.id : '',\n          'Item Name': Data.medicine && Data.medicine.name && Data.medicine.name != null ? Data.medicine.name : '',\n          'Batch No.': Data.batch_no != null ? Data.batch_no : '',\n          'ExpiryDate': Data.expiry_date !== null ? reversefunction(Data.expiry_date) : '',\n          'MRP': Data.mrp != null ? Data.mrp : '',\n          'Rate': Data.rate != null ? Data.rate : '',\n          'Discount': Data.discount != null ? Data.discount : '',\n          'Trade Disc.': Data.trade_discount != null ? Data.trade_discount : '',\n          'CGST %': Data.CGST,\n          'CGST Rs': Data.CGST_rate,\n          'SGST %': Data.SGST,\n          'SGST Rs': Data.SGST_rate,\n          'IGST %': Data.IGST,\n          'IGST Rs': Data.IGST_rate,\n          'Total Tax %': TotalTaxPercent(Data.CGST, Data.SGST, Data.IGST),\n          'Total Tax Rs': TotalTaxPercent(Data.CGST_rate, Data.SGST_rate, Data.IGST_rate),\n          'Cost Rs': Data.cost,\n          'Qty': Data.qty,\n          'Total Rs': Data.total_amount ? Data.total_amount : '',\n          'HSN Code': Data.medicine.hsn_code\n        }));\n        obj.push(vendorsitems);\n      }\n      var obj2 = obj.flat();\n      setExportPurchaseEntry(vendors);\n      setExportPurchaseEntry2(obj2);\n      console.log(obj2);\n    }\n  }\n  useEffect(() => {\n    async function func() {\n      await MakePurchaseEntryExport();\n    }\n    func();\n  }, [props.purchaseentryarr]);\n  console.log(props.purchaseentryarr);\n  // console.log(ExportPurchaseEntry, ExportPurchaseEntry2)\n  return /*#__PURE__*/_jsxDEV(ExportExcel, {\n    apiData: ExportPurchaseEntry2,\n    fileName: fileName\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 9\n  }, this);\n};\n_s(ExportPurchaseEntry, \"wmkwy/kawiNDBqG+cxij8KnSrqE=\");\n_c = ExportPurchaseEntry;\nexport { ExportPurchaseEntry };\nvar _c;\n$RefreshReg$(_c, \"ExportPurchaseEntry\");","map":{"version":3,"names":["React","useState","useEffect","ExportExcel","ExportPurchaseEntry","props","setExportPurchaseEntry","ExportPurchaseEntry2","setExportPurchaseEntry2","fileName","reversefunction","date","split","reverse","join","TotalTaxPercent","cgst","sgst","igst","undefined","Number","TotalTaxRate","MakePurchaseEntryExport","purchaseentryarr","length","vendors","map","data","bill_id","purchase_order_id","channel","invoice_no","bill_date","bill_total","distributor","entity_name","obj","i","vendorsitems","medicines","Data","purchase_entry","GSTIN_no","id","medicine","name","batch_no","expiry_date","mrp","rate","discount","trade_discount","CGST","CGST_rate","SGST","SGST_rate","IGST","IGST_rate","cost","qty","total_amount","hsn_code","push","obj2","flat","console","log","func"],"sources":["C:/Users/Aartas-WebDesign/Desktop/ConnectApp_React/connect_app/FrontEnd/src/components/pharmacy/Exports.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { ExportExcel } from '../features/ExportExcel'\r\nconst ExportPurchaseEntry = (props) => {\r\n    const [ExportPurchaseEntry, setExportPurchaseEntry] = useState([])\r\n    const [ExportPurchaseEntry2, setExportPurchaseEntry2] = useState([])\r\n    const fileName = 'purchase'\r\n    const reversefunction = (date) => {\r\n        if (date) {\r\n            date = date.split(\"-\").reverse().join(\"-\")\r\n            return date\r\n        }\r\n\r\n    }\r\n    function TotalTaxPercent(cgst, sgst, igst) {\r\n        if (cgst && sgst && igst !== null || undefined) {\r\n            return Number(cgst) + Number(sgst) + Number(igst)\r\n        }\r\n    }\r\n    function TotalTaxRate(cgst, sgst, igst) {\r\n        if (cgst && sgst && igst !== null || undefined) {\r\n            return Number(cgst) + Number(sgst) + Number(igst)\r\n        }\r\n    }\r\n    async function MakePurchaseEntryExport() {\r\n        if (props.purchaseentryarr.length !== 0) {\r\n            const vendors = await props.purchaseentryarr.map(data => (\r\n\r\n                {\r\n                    \"PE ID\": \"PE-\" + data.bill_id,\r\n                    \"PO ID\": data.purchase_order_id != null ? data.purchase_order_id : '',\r\n                    'Channel': data.channel == 1 ? 'Pharmacy' : 'Consumables',\r\n                    'Invoice No.': data.invoice_no != null ? data.invoice_no : '',\r\n                    'Bill Date': data.bill_date != null ? data.bill_date : '',\r\n                    'Bill Total': data.bill_total != null ? data.bill_total : '',\r\n                    'Vendor': data.distributor.entity_name && data.distributor.entity_name != null ? data.distributor.entity_name : ''\r\n\r\n                }\r\n            ))\r\n            var obj = []\r\n            for (let i = 0; i < props.purchaseentryarr.length; i++) {\r\n                var vendorsitems = props.purchaseentryarr[i].medicines.map(Data => ({\r\n                    'Bill Date':reversefunction(Data.purchase_entry.bill_date),\r\n                    'Distributer':Data.purchase_entry.distributor.entity_name,\r\n                    'GSTIN':Data.purchase_entry.distributor.GSTIN_no,\r\n                    'Item ID': Data.id != null ? Data.id : '',\r\n                    'Item Name': Data.medicine && Data.medicine.name && Data.medicine.name != null ? Data.medicine.name : '',\r\n                    'Batch No.': Data.batch_no != null ? Data.batch_no : '',\r\n                    'ExpiryDate': Data.expiry_date !== null ? reversefunction(Data.expiry_date) : '',\r\n                    'MRP': Data.mrp != null ? Data.mrp : '',\r\n                    'Rate': Data.rate != null ? Data.rate : '',\r\n                    'Discount': Data.discount != null ? Data.discount : '',\r\n                    'Trade Disc.': Data.trade_discount != null ? Data.trade_discount : '',\r\n                    'CGST %': Data.CGST,\r\n                    'CGST Rs': Data.CGST_rate,\r\n                    'SGST %': Data.SGST,\r\n                    'SGST Rs': Data.SGST_rate,\r\n                    'IGST %': Data.IGST,\r\n                    'IGST Rs': Data.IGST_rate,\r\n                    'Total Tax %': TotalTaxPercent(Data.CGST, Data.SGST, Data.IGST),\r\n                    'Total Tax Rs': TotalTaxPercent(Data.CGST_rate, Data.SGST_rate, Data.IGST_rate),\r\n                    'Cost Rs': Data.cost,\r\n                    'Qty': Data.qty,\r\n                    'Total Rs':Data.total_amount?Data.total_amount:'',\r\n                    'HSN Code':Data.medicine.hsn_code\r\n                }))\r\n                obj.push(vendorsitems)  \r\n\r\n            }\r\n            var obj2 = obj.flat()\r\n\r\n            setExportPurchaseEntry(vendors)\r\n            setExportPurchaseEntry2(obj2)\r\n            console.log(obj2)\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        async function func() {\r\n            await MakePurchaseEntryExport()\r\n        }\r\n        func()\r\n    }, [props.purchaseentryarr])\r\n    console.log(props.purchaseentryarr)\r\n    // console.log(ExportPurchaseEntry, ExportPurchaseEntry2)\r\n    return (\r\n        <ExportExcel apiData={ExportPurchaseEntry2} fileName={fileName} />\r\n    )\r\n}\r\n\r\nexport { ExportPurchaseEntry }"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}